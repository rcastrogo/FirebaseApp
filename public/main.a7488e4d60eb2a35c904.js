!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=17)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(2),s=n(4),a=n(5),u=n(6),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.ErrorFactory("app","Firebase",c),l=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.Logger("@firebase/app"),p=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next()){var l=h.value;this._addComponent(l)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if(s.contains(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=l[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.12.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!s.contains(e,t))throw h.create("no-app",{appName:t});return e[t]}function c(a){var u,c,l=a.name;if(n.has(l))return f.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?r[l]:null;if(n.set(l,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[l])throw h.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==a.serviceProps&&s.deepExtend(p,a.serviceProps),r[l]=p,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,l);return n.apply(this,a.multipleInstances?t:[])}}try{for(var d=o.__values(Object.keys(e)),v=d.next();!v.done;v=d.next()){var y=v.value;e[y]._addComponent(a)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[l]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){s.deepExtend(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(s.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),m.apply(void 0,t)};var g=d;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.0",e),t.registerVersion("fire-js","")}(g),e.default=g,e.firebase=g},function(t,e,n){"use strict";var r,i=(r=n(0))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.registerVersion("firebase","7.13.1","app"),t.exports=i},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return s})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return h})),n.d(e,"__generator",(function(){return l})),n.d(e,"__exportStar",(function(){return f})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return d})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return g})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return b})),n.d(e,"__makeTemplateObject",(function(){return I})),n.d(e,"__importStar",(function(){return E})),n.d(e,"__importDefault",(function(){return T})),n.d(e,"__classPrivateFieldGet",(function(){return N})),n.d(e,"__classPrivateFieldSet",(function(){return A}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function I(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function N(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function A(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=h(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var p=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,d.prototype.create),i}return r.__extends(e,t),e}(Error),d=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new p(i,a),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},t}();function v(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(t){return JSON.parse(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(c(o[0])||""),n=m(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var b=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function I(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=i,e.Deferred=l,e.ErrorFactory=d,e.FirebaseError=p,e.Sha1=w,e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new b(t,e);return n.subscribe.bind(n)},e.decode=g,e.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return h(void 0,t)},e.deepExtend=h,e.errorPrefix=E,e.getUA=f,e.isAdmin=function(t){var e=g(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=g(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=g(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(E(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(E(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(E(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(3))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(4),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),a=s[0],u=s[1],c=this.normalizeInstanceIdentifier(a);try{var h=this.getOrInitializeService(c);u.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=a,e.Provider=s},function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return l})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return p}));var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){var e="string"==typeof t?a[t]:t;s.forEach((function(t){t.logLevel=e}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){n(i[r])}}},function(t,e,n){"use strict";var r,i=(r=n(0))&&"object"==typeof r&&"default"in r?r.default:r,o=n(2),s=n(5),a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},u=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return o.__extends(e,t),e}(Error);var c=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var l=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return h(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?h(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function t(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new l,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new c(e,n),this.cancelAllRequests=new Promise((function(t){i.deleteService=function(){return t()}}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+n+"/"+t:"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,s,c,h,l,f,p;return o.__generator(this,(function(o){switch(o.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},s=new Headers,[4,this.contextProvider.getContext()];case 1:return(c=o.sent()).authToken&&s.append("Authorization","Bearer "+c.authToken),c.instanceIdToken&&s.append("Firebase-Instance-ID-Token",c.instanceIdToken),h=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,s),(d=h,new Promise((function(t,e){setTimeout((function(){e(new u("deadline-exceeded","deadline-exceeded"))}),d)}))),this.cancelAllRequests])];case 2:if(!(l=o.sent()))throw new u("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var c=s.status;if("string"==typeof c){if(!a[c])return new u("internal","internal");r=a[c],i=c}var h=s.message;"string"==typeof h&&(i=h),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new u(r,i,o)}(l.status,l.json,this.serializer))throw f;if(!l.json)throw new u("internal","Response is not valid JSON object.");if(void 0===(p=l.json.data)&&(p=l.json.result),void 0===p)throw new u("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}var d}))}))},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new f(n,r,i,e)}var d;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
d={Functions:f},i.INTERNAL.registerComponent(new s.Component("functions",p,"PUBLIC").setServiceProps(d).setMultipleInstances(!0)),i.registerVersion("@firebase/functions","0.4.38")},function(t,e,n){"use strict";(function(t){var e=n(0),r=n.n(e);(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var i=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function s(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,e){if(e){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in r||(r[s]={}),r=r[s]}(e=e(o=r[t=t[t.length-1]]))!=o&&null!=e&&n(r,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Oa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).Oa(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Oa(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function l(){}function f(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:b).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now||function(){return+new Date};function N(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t,e,n){this.code=_+t,this.message=e||O[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new A(e.substring(_.length),t.message,t.serverResponse):null}N(A,Error),A.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.v()};var k,_="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function C(t){for(var e in D)if(D[e].id===t)return{firebaseEndpoint:(t=D[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function x(t){if(Error.captureStackTrace)Error.captureStackTrace(this,x);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");x.call(this,n+t[r])}function L(t,e){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}k=C("__EID__")?"__EID__":void 0,N(x,Error),x.prototype.name="CustomError",N(P,x),P.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new M((function(){return new q}),(function(t){t.reset()}));function F(){var t=ge,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=B(t,e)}function J(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function X(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,st=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=u.navigator;if(ct){var ht=ct.userAgent;if(ht){Q=ht;break t}}Q=""}function lt(t){return at(Q,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function dt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===It&&e||"",this.b=bt}function wt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ra=!0,gt.prototype.qa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var bt={},It={},Et=new gt(It,"");function Tt(t,e){this.a=t===Ot&&e||"",this.b=_t}function Nt(t){return t instanceof Tt&&t.constructor===Tt&&t.b===_t?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function At(t,e){var n=wt(t);if(!kt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?wt(t):encodeURIComponent(String(t))})),new Tt(Ot,t)}Tt.prototype.ra=!0,Tt.prototype.qa=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,kt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,_t={},Ot={};function Dt(t,e){this.a=t===Lt&&e||"",this.b=Pt}function Ct(t){return t instanceof Dt&&t.constructor===Dt&&t.b===Pt?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Dt.prototype.ra=!0,Dt.prototype.qa=function(){return this.a.toString()},Dt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){return t instanceof Dt?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Rt.test(t)||(t="about:invalid#zClosurez"),new Dt(Lt,t))}var Pt={},Lt={};function Mt(){this.a="",this.b=jt}function Ut(t){return t instanceof Mt&&t.constructor===Mt&&t.b===jt?t.a:(L("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}Mt.prototype.ra=!0,Mt.prototype.qa=function(){return this.a.toString()},Mt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Vt(t){var e=new Mt;return e.a=t,e}Vt("<!DOCTYPE html>");var Ft=Vt("");function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function Gt(t){return Gt[" "](t),t}Vt("<br>"),Gt[" "]=l;var Ht,zt,Wt=lt("Opera"),Kt=lt("Trident")||lt("MSIE"),Jt=lt("Edge"),Yt=Jt||Kt,Xt=lt("Gecko")&&!(at(Q.toLowerCase(),"webkit")&&!lt("Edge"))&&!(lt("Trident")||lt("MSIE"))&&!lt("Edge"),$t=at(Q.toLowerCase(),"webkit")&&!lt("Edge");function Qt(){var t=u.document;return t?t.documentMode:void 0}t:{var Zt="",te=(zt=Q,Xt?/rv:([^\);]+)(\)|;)/.exec(zt):Jt?/Edge\/([\d\.]+)/.exec(zt):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zt):$t?/WebKit\/(\S+)/.exec(zt):Wt?/(?:Version)[ \/]?(\S+)/.exec(zt):void 0);if(te&&(Zt=te?te[1]:""),Kt){var ee=Qt();if(null!=ee&&ee>parseFloat(Zt)){Ht=String(ee);break t}}Ht=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Z(String(Ht)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ut(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ut(0==s[2].length,0==a[2].length)||ut(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}ne=u.document&&Kt?Qt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(zt){}var oe=!Kt||9<=Number(ne);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ae(t,e){ft(e,(function(e,n){e&&"object"==typeof e&&e.ra&&(e=e.qa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ue,ce,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function le(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!p(o)||v(o)&&0<o.nodeType?r(o):G(pe(o)?$(o):o,r)}}function fe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function de(t){u.setTimeout((function(){throw t}),0)}function ve(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!lt("Presto")&&(t=function(){var t=fe(document,"IFRAME");t.style.display="none",function(t){var e=new Tt(Ot,wt(Et));mt(t,"HTMLIFrameElement"),t.src=Nt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ut(Ft)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!lt("Trident")&&!lt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}function ye(t,e){ce||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);ce=function(){t.then(we)}}else ce=function(){var t=we;!d(u.setImmediate)||u.Window&&u.Window.prototype&&!lt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(ue||(ue=ve()),ue(t)):u.setImmediate(t)}}(),me||(ce(),me=!0),ge.add(t,e)}var me=!1,ge=new j;function we(){for(var t;t=F();){try{t.a.call(t.b)}catch(t){de(t)}U(V,t)}me=!1}function be(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){xe(n,Ee,t)}),(function(t){if(!(t instanceof Fe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}xe(n,Te,t)}))}catch(t){xe(this,Te,t)}}var Ie=0,Ee=2,Te=3;function Ne(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ne.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ae=new M((function(){return new Ne}),(function(t){t.reset()}));function Se(t,e,n){var r=Ae.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof be)return t;var e=new be(l);return xe(e,Ee,t),e}function _e(t){return new be((function(e,n){n(t)}))}function Oe(t,e,n){Pe(t,e,n,null)||ye(E(e,t))}function De(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Oe(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Ce(t,e){t.b||t.a!=Ee&&t.a!=Te||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Se(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Fe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Ce(t,i),i.a}function xe(t,e,n){t.a==Ie&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Pe(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Te||n instanceof Fe||function(t,e){t.g=!0,ye((function(){t.g&&Ve.call(null,e)}))}(t,n)))}function Pe(t,e,n,r){if(t instanceof be)return Ce(t,Se(e||l,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Le(t){t.h||(t.h=!0,ye(t.ec,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(t){Ve.call(null,t)}U(Ae,e)}function je(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Re(this,d(t)?t:null,d(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(e=be.prototype).ma=function(t,e){return(t=Se(t,t,e)).c=!0,Ce(this,t),this},e.o=function(t,e){return Re(this,null,t,e)},e.cancel=function(t){if(this.a==Ie){var e=new Fe(t);ye((function(){!function t(e,n){if(e.a==Ie)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==Ie&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Me(r),Ue(r,o,Te,n)))}e.c=null}else xe(e,Te,n)}(this,e)}),this)}},e.Yc=function(t){this.a=Ie,xe(this,Ee,t)},e.Zc=function(t){this.a=Ie,xe(this,Te,t)},e.ec=function(){for(var t;t=Me(this);)Ue(this,t,this.a,this.i);this.h=!1};var Ve=de;function Fe(t){x.call(this,t)}function qe(){0!=Be&&(Ge[y(this)]=this),this.wa=this.wa,this.na=this.na}N(Fe,x),Fe.prototype.name="cancel";var Be=0,Ge={};function He(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=Be)){var e=y(t);if(0!=Be&&t.na&&0<t.na.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ge[e]}}qe.prototype.wa=!1,qe.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var ze=Object.freeze||function(t){return t},We=!Kt||9<=Number(ne),Ke=Kt&&!ie("9"),Je=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",l,e),u.removeEventListener("test",l,e)}catch(t){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Gt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$e[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},N(Xe,Ye);var $e=ze({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Xe.prototype.f=function(){return this.a};var Qe="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ze,this.ua=this.Na=!1}function en(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&J(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new tn(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=wn(n),t&&t[Qe]?In(t,e,n,v(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=mn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy){if(r=function(){var t=yn,e=We?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Je||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=wn(n),t&&t[Qe]?En(t,e,n,v(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=wn(n),t&&t[Qe]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Qe])rn(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&fn(t),n.call(r,e)}function yn(t,e){if(t.ua)return!0;if(!We){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function mn(t){return(t=t[sn])instanceof nn?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(t){return d(t)?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function bn(){qe.call(this),this.u=new nn(this),this.Yb=this,this.eb=null}function In(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&rn(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(d(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function An(t){var e=null;return new be((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function Sn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function kn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function _n(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _n)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function On(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}N(bn,qe),bn.prototype[Qe]=!0,bn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;yt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Tn(s,r,!0,t)&&i}if(i=Tn(s=t.b=n,r,!0,t)&&i,i=Tn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Ba=function(){if(bn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.eb=null},(e=_n.prototype).V=function(){On(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.X=function(){return On(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},e.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Cn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Rn?(this.h=void 0!==e?e:t.h,xn(this,t.f),this.i=t.i,this.b=t.b,Pn(this,t.l),this.c=t.c,Ln(this,tr(t.a)),this.g=t.g):t&&(n=String(t).match(Cn))?(this.h=!!e,xn(this,n[1]||"",!0),this.i=Fn(n[2]||""),this.b=Fn(n[3]||"",!0),Pn(this,n[4]),this.c=Fn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.g=Fn(n[7]||"")):(this.h=!!e,this.a=new Jn(null,this.h))}function xn(t,e,n){t.f=n?Fn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Pn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Ln(t,e,n){e instanceof Jn?(t.a=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($n(this,e),Zn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=qn(e,Wn)),t.a=new Jn(e,t.h))}function Mn(t,e,n){t.a.set(e,n)}function Un(t,e){return t.a.get(e)}function jn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Vn(t,e){var n=new Rn(null,void 0);return xn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qn(e,Gn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(qn(e,Gn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?zn:Hn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",qn(n,Kn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?xn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)Pn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?Ln(e,tr(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Gn=/[#\/\?@]/g,Hn=/[#\?:]/g,zn=/[#\?]/g,Wn=/[#\?@]/g,Kn=/#/g;function Jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new _n,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=kn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Jn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function $n(t,e){Yn(t),e=er(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&On(t)))}function Qn(t,e){return Yn(t),e=er(t,e),Dn(t.a.b,e)}function Zn(t,e,n){$n(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),$(n)),t.b+=n.length)}function tr(t){var e=new Jn;return e.c=t.c,t.a&&(e.a=new _n(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),sr(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":sr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new rr,t,e),e.join("")}function rr(){}(e=Jn.prototype).add=function(t,e){Yn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){Yn(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.X=function(){Yn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.V=function(t){Yn(this);var e=[];if("string"==typeof t)Qn(this,t)&&(e=X(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},e.set=function(t,e){return Yn(this),this.c=null,Qn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=Sr();return Kt&&!!ne&&11==ne||/Edge\/\d+/.test(t)}function ur(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||u.window;var n="about:blank";t&&(n=Ct(xt(t))),e.location.href=n}function hr(t){return!!((t=(t||Sr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function lr(t){t=t||u.window;try{t.close()}catch(t){}}function fr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Sr().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Tr(Sr())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Dt?n:xt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((lt("iPhone")&&!lt("iPod")&&!lt("iPad")||lt("iPad")||lt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(mt(s=fe(document,"A"),"HTMLAnchorElement"),e instanceof Dt||e instanceof Dt||(e="object"==typeof e&&e.ra?e.qa():String(e),Rt.test(e)||(e="about:invalid#zClosurez"),e=new Dt(Lt,e)),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Ct(e),s&&(Yt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Vt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">'),r=s.document)&&(r.write(Ut(t)),r.close())):(s=r.open(Ct(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var pr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dr=/^[^@]+@[^@]+$/;function vr(){var t=null;return new be((function(e){"complete"==u.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function yr(t){return t=t||Sr(),!("file:"!==Cr()&&"ionic:"!==Cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function mr(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function gr(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function wr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":gr()?"Worker":"Browser"}function br(){var t=wr();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Er="Chrome";function Tr(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Ir:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Nr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Ar(t,e){e=e||[];var n,r=[],i={};for(n in Nr)i[Nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Tr(i=Sr()):"Worker"===r&&(r=Tr(i=Sr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Sr(){return u.navigator&&u.navigator.userAgent||""}function kr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function _r(){try{var t=u.localStorage,e=Mr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!u.indexedDB}catch(t){return gr()&&!!u.indexedDB}return!1}function Or(){return(Dr()||"chrome-extension:"===Cr()||yr())&&!br()&&_r()&&!gr()}function Dr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){return u.location&&u.location.protocol||null}function Rr(t){return!hr(t=t||Sr())&&Tr(t)!=Ir}function xr(t){return void 0===t?null:nr(t)}function Pr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Lr(t){if(null!==t)return JSON.parse(t)}function Mr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Tr(t=t||Sr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function jr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Sr(),e=wr(),this.b=hr(t)||"ReactNative"===e}function Fr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function qr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Br(){return!(!kr("fireauth.oauthhelper",u)&&!kr("fireauth.iframe",u))}Vr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Dr()&&"chrome-extension:"!==Cr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Gr,Hr={};function zr(t){Hr[t]||(Hr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Wr={};Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:2}),Gr=2==Wr.abcd}catch(zt){Gr=!1}function Kr(t,e,n){Gr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Kr(t,n,e[n])}function Yr(t){var e={};return Jr(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Kr(e,n,Xr(t[n]));return e}function $r(t){var e=t&&(t[ni]?"phone":null);if(!(e&&t&&t[ei]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Kr(this,"uid",t[ei]),Kr(this,"displayName",t[Zr]||null);var n=null;t[ti]&&(n=new Date(t[ti]).toUTCString()),Kr(this,"enrollmentTime",n),Kr(this,"factorId",e)}function Qr(t){try{var e=new ri(t)}catch(t){e=null}return e}$r.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Zr="displayName",ti="enrolledAt",ei="mfaEnrollmentId",ni="phoneInfo";function ri(t){$r.call(this,t),Kr(this,"phoneNumber",t[ni])}function ii(t){var e={},n=t[ui],r=t[hi],i=t[li];if(t=Qr(t[ci]),!i||i!=si&&i!=ai&&!n||i==ai&&!r||i==oi&&!t)throw Error("Invalid checkActionCode response!");i==ai?(e[pi]=n||null,e[vi]=n||null,e[fi]=r):(e[pi]=r||null,e[vi]=r||null,e[fi]=n||null),e[di]=t||null,Kr(this,mi,i),Kr(this,yi,Xr(e))}N(ri,$r),ri.prototype.v=function(){var t=ri.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var oi="REVERT_SECOND_FACTOR_ADDITION",si="EMAIL_SIGNIN",ai="VERIFY_AND_CHANGE_EMAIL",ui="email",ci="mfaInfo",hi="newEmail",li="requestType",fi="email",pi="fromEmail",di="multiFactorInfo",vi="previousEmail",yi="data",mi="operation";function gi(t){var e=Un(t=jn(t),wi)||null,n=Un(t,bi)||null,r=Un(t,Ti)||null;if(r=r&&Ai[r]||null,!e||!n||!r)throw new A("argument-error",wi+", "+bi+"and "+Ti+" are required in a valid action code URL.");Jr(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,Ii)||null,languageCode:Un(t,Ei)||null,tenantId:Un(t,Ni)||null})}var wi="apiKey",bi="oobCode",Ii="continueUrl",Ei="languageCode",Ti="mode",Ni="tenantId",Ai={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:oi,signIn:si,verifyAndChangeEmail:ai,verifyEmail:"VERIFY_EMAIL"};function Si(t){try{return new gi(t)}catch(t){return null}}function ki(t){var e=t[Ri];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[_i];if(n&&"object"==typeof n){e=n[Li];var r=n[xi];if(n=n[Pi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",xi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",Pi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",Li+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",_i+" property must be a non null object when specified.");if(this.f=null,(e=t[Ci])&&"object"==typeof e){if("string"==typeof(e=e[Mi])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",Mi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Ci+" property must be a non null object when specified.");if(void 0!==(e=t[Di])&&"boolean"!=typeof e)throw new A("argument-error",Di+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var _i="android",Oi="dynamicLinkDomain",Di="handleCodeInApp",Ci="iOS",Ri="url",xi="installApp",Pi="minimumVersion",Li="packageName",Mi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ji=null;function Vi(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=ji[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!ji){ji={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ji[o]&&(ji[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Fi(t){var e=Bi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,T(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function qi(t){try{return new Fi(t)}catch(t){return null}}function Bi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Vi(t))}catch(t){}return null}Fi.prototype.S=function(){return this.f},Fi.prototype.i=function(){return this.b},Fi.prototype.toString=function(){return this.g};var Gi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],zi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Hi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Hi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Hi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Gi},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function Wi(t){for(var e in zi)if(zi[e].ea==t)return zi[e];return null}function Ki(t){var e={};e["facebook.com"]=Qi,e["google.com"]=to,e["github.com"]=Zi,e["twitter.com"]=eo;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new $i(t);if(void 0!==t[Ji])return new Xi(t)}catch(t){}return null}var Ji="idToken",Yi="providerId";function Xi(t){var e=t[Yi];if(!e&&t[Ji]){var n=qi(t[Ji]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Kr(this,"providerId",e),Kr(this,"isNewUser",n)}function $i(t){Xi.call(this,t),Kr(this,"profile",Xr((t=Lr(t.rawUserInfo||"{}"))||{}))}function Qi(t){if($i.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Zi(t){if($i.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",this.profile&&this.profile.login||null)}function to(t){if($i.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if($i.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",t.screenName||null)}function no(t){var e=jn(t),n=Un(e,"link"),r=Un(jn(n),"link");return e=Un(e,"deep_link_id"),Un(jn(e),"link")||e||r||n||t}function ro(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?io:oo}N($i,Xi),N(Qi,$i),N(Zi,$i),N(to,$i),N(eo,$i);var io="enroll",oo="signin";function so(){}function ao(t,e){return t.then((function(t){if(t[Ys]){var n=qi(t[Ys]);if(!n||e!=n.h)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==_+"user-not-found"?new A("user-mismatch"):t}))}function uo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Kr(this,"providerId",t),Kr(this,"signInMethod",t)}function co(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new uo(t.providerId,t.pendingToken)}catch(t){}return null}function lo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Kr(this,"idToken",e.idToken),e.accessToken&&Kr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Kr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Kr(this,"accessToken",e.oauthToken),Kr(this,"secret",e.oauthTokenSecret)}Kr(this,"providerId",t),Kr(this,"signInMethod",n)}function fo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function po(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new lo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function vo(t,e){this.Oc=e||[],Jr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Wi(t)||{}).Ha||null,this.kb=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');vo.call(this,t,[])}function mo(t){vo.call(this,t,Hi),this.a=[]}function go(){mo.call(this,"facebook.com")}function wo(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new go).credential({accessToken:e})}function bo(){mo.call(this,"github.com")}function Io(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function Eo(){mo.call(this,"google.com"),this.Aa("profile")}function To(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function No(){vo.call(this,"twitter.com",Gi)}function Ao(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new lo("twitter.com",n,"twitter.com")}function So(t,e,n){this.a=t,this.f=e,Kr(this,"providerId","password"),Kr(this,"signInMethod",n===_o.EMAIL_LINK_SIGN_IN_METHOD?_o.EMAIL_LINK_SIGN_IN_METHOD:_o.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ko(t){return t&&t.email&&t.password?new So(t.email,t.password,t.signInMethod):null}function _o(){Jr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Do(e)))throw new A("argument-error","Invalid email link!");return new So(t,e.code,_o.EMAIL_LINK_SIGN_IN_METHOD)}function Do(t){return(t=Si(t=no(t)))&&t.operation===si?t:null}function Co(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new A("internal-error");this.a=t,Kr(this,"providerId","phone"),this.ea="phone",Kr(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Co(e)}return null}function xo(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Po(t){try{this.a=t||r.a.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Jr(this,{providerId:"phone",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Co({bb:t,ab:e})}function Mo(t){if(t.temporaryProof&&t.phoneNumber)return new Co({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return To(o,n);case"facebook.com":return wo(n);case"github.com":return Io(n);case"twitter.com":return Ao(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new uo(e,s):new lo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new mo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Uo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function jo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Fo(){this.b=null,this.a=[]}ro.prototype.Fa=function(){return this.a?ke(this.a):ke(this.b)},ro.prototype.v=function(){return this.type==io?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},so.prototype.ia=function(){},so.prototype.b=function(){},so.prototype.c=function(){},so.prototype.v=function(){},uo.prototype.ia=function(t){return va(t,co(this))},uo.prototype.b=function(t,e){var n=co(this);return n.idToken=e,ya(t,n)},uo.prototype.c=function(t,e){return ao(ma(t,co(this)),e)},uo.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},lo.prototype.ia=function(t){return va(t,fo(this))},lo.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,ya(t,n)},lo.prototype.c=function(t,e){return ao(ma(t,fo(this)),e)},lo.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},vo.prototype.Ia=function(t){return this.Fb=dt(t),this},N(yo,vo),N(mo,vo),mo.prototype.Aa=function(t){return K(this.a,t)||this.a.push(t),this},mo.prototype.Nb=function(){return $(this.a)},mo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new lo(this.providerId,n,this.providerId)},N(go,mo),Kr(go,"PROVIDER_ID","facebook.com"),Kr(go,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),N(bo,mo),Kr(bo,"PROVIDER_ID","github.com"),Kr(bo,"GITHUB_SIGN_IN_METHOD","github.com"),N(Eo,mo),Kr(Eo,"PROVIDER_ID","google.com"),Kr(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),N(No,vo),Kr(No,"PROVIDER_ID","twitter.com"),Kr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),So.prototype.ia=function(t){return this.signInMethod==_o.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,Aa,{email:this.a,oobCode:this.f}):Qa(t,Ka,{email:this.a,password:this.f})},So.prototype.b=function(t,e){return this.signInMethod==_o.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,Sa,{idToken:e,email:this.a,oobCode:this.f}):Qa(t,Va,{idToken:e,email:this.a,password:this.f})},So.prototype.c=function(t,e){return ao(this.ia(t),e)},So.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Jr(_o,{PROVIDER_ID:"password"}),Jr(_o,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Jr(_o,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Co.prototype.ia=function(t){return t.cb(xo(this))},Co.prototype.b=function(t,e){var n=xo(this);return n.idToken=e,Qa(t,Ya,n)},Co.prototype.c=function(t,e){var n=xo(this);return n.operation="REAUTH",ao(t=Qa(t,Xa,n),e)},Co.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Po.prototype.cb=function(t,e){var n=this.a.b;return ke(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==io?i.Fa().then((function(t){return function(t,e){return Qa(t,qa,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==oo?i.Fa().then((function(e){return function(t,e){return Qa(t,Ba,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return Qa(t,Ua,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Jr(Po,{PROVIDER_ID:"phone"}),Jr(Po,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},jo.prototype.S=function(){return this.h},jo.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var qo,Bo=null;function Go(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.b,"chrome-extension"==(r=r.f)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Ho(t,e,n){A.call(this,t,n),(t=e||{}).Gb&&Kr(this,"email",t.Gb),t.da&&Kr(this,"phoneNumber",t.da),t.credential&&Kr(this,"credential",t.credential),t.Wb&&Kr(this,"tenantId",t.Wb)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(_)&&(e=e.substring(_.length));var n={credential:Mo(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Wo(){}function Ko(t){return t.c||(t.c=t.b())}function Jo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function $o(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.oc,this),this.a.onerror=I(this.Pb,this),this.a.onprogress=I(this.pc,this),this.a.ontimeout=I(this.tc,this)}function Qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Zo(t,e,n){this.reset(t,e,n,void 0,void 0)}N(Go,A),N(Ho,A),Ho.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&yt(t,e),t},Ho.prototype.toJSON=function(){return this.v()},Wo.prototype.c=null,N(Jo,Wo),Jo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},qo=new Jo,N(Xo,Wo),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new $o;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(e=$o.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},e.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},e.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Qo(this,4)},e.Pb=function(){this.status=500,this.response=this.responseText="",Qo(this,4)},e.tc=function(){this.Pb()},e.pc=function(){this.status=200,Qo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Zo.prototype.a=null;function ts(t){this.f=t,this.b=this.c=this.a=null}function es(t,e){this.name=t,this.value=e}Zo.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||T(),delete this.a},es.prototype.toString=function(){return this.name};var ns=new es("SEVERE",1e3),rs=new es("WARNING",900),is=new es("CONFIG",700),os=new es("FINE",500);ts.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(L("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ss={},as=null;function us(t){var e;if(as||(as=new ts(""),ss[""]=as,as.c=is),!(e=ss[t])){e=new ts(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=us(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ss[t]=e}return e}function cs(t,e){t&&t.log(os,e,void 0)}function hs(t){this.f=t}function ls(t){bn.call(this),this.s=t,this.readyState=fs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=us("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}N(hs,Wo),hs.prototype.a=function(){return new ls(this.f)},hs.prototype.b=function(t){return function(){return t}}({}),N(ls,bn);var fs=0;function ps(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function ds(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,vs(t)}function vs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ys(t){bn.call(this),this.headers=new _n,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ms,this.w=this.R=!1}(e=ls.prototype).open=function(t,e){if(this.readyState!=fs)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,vs(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ds(this,!1)),this.readyState=fs},e.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,vs(this)),this.a&&(this.readyState=3,vs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,ps(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},e.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ds(this,!0):vs(this),3==this.readyState&&ps(this)}},e.rc=function(t){this.a&&(this.response=this.responseText=t,ds(this,!0))},e.qc=function(t){this.a&&(this.response=t,ds(this,!0))},e.Sa=function(t){var e=this.h;e&&e.log(rs,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ds(this,!0)},e.setRequestHeader=function(t,e){this.i.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(rs,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(rs,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},N(ys,bn);var ms="";ys.prototype.b=us("goog.net.XhrIo");var gs=/^https?$/i,ws=["POST","PUT"];function bs(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():qo.a(),t.B=t.D?Ko(t.D):Ko(qo),t.a.onreadystatechange=I(t.Sb,t);try{cs(t.b,Os(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return cs(t.b,Os(t,"Error opening Xhr: "+e.message)),void Es(t,e)}e=r||"";var o=new _n(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)G(t,e,void 0);else for(var n=kn(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Is,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.X()),r=u.FormData&&e instanceof u.FormData,!K(ws,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Ss(t),0<t.g&&(t.w=function(t){return Kt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),cs(t.b,Os(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ka,t)):t.s=Nn(t.Ka,t.g,t)),cs(t.b,Os(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){cs(t.b,Os(t,"Send error: "+e.message)),Es(t,e)}}function Is(t){return"content-type"==t.toLowerCase()}function Es(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ts(t),As(t)}function Ts(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==a)if(t.B[1]&&4==ks(t)&&2==_s(t))cs(t.b,Os(t,"Local request error detected and ignored"));else if(t.i&&4==ks(t))Nn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==ks(t)){cs(t.b,Os(t,"Request complete")),t.c=!1;try{var e,n=_s(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Cn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!gs.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ks(t)?t.a.statusText:""}catch(e){cs(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+_s(t)+"]",Ts(t)}}finally{As(t)}}}function As(t,e){if(t.a){Ss(t);var n=t.a,r=t.B[0]?l:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ns,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ss(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function ks(t){return t.a?t.a.readyState:0}function _s(t){try{return 2<ks(t)?t.a.status:-1}catch(t){return-1}}function Os(t,e){return e+" ["+t.P+" "+t.l+" "+_s(t)+"]"}function Ds(t){var e=qs;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Cs(t,e,n){t.a=!0,t.c=n,t.f=!e,Ls(t)}function Rs(t){if(t.a){if(!t.u)throw new Ms(t);t.u=!1}}function xs(t,e,n,r){t.g.push([e,n,r]),t.a&&Ls(t)}function Ps(t){return W(t.g,(function(t){return d(t[1])}))}function Ls(t){if(t.h&&t.a&&Ps(t)){var e=t.h,n=Vs[e];n&&(u.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(R(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ps(t)||(n=!0)}}t.c=e,r&&(a=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof Ds?(xs(e,a,r),e.B=!0):e.then(a,r)),n&&(e=new js(e),Vs[e.a]=e,t.h=e.a)}function Ms(){x.call(this)}function Us(){x.call(this)}function js(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(e=ys.prototype).Ka=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",cs(this.b,Os(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(cs(this.b,Os(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),As(this))},e.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),As(this,!0)),ys.Za.Ba.call(this)},e.Sb=function(){this.wa||(this.O||this.i||this.f?Ns(this):this.Hc())},e.Hc=function(){Ns(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ms:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ns,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return cs(this.b,"Can not get response: "+t.message),null}},Ds.prototype.cancel=function(t){if(this.a)this.c instanceof Ds&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Us(this),Rs(this),Cs(this,!1,t))}},Ds.prototype.m=function(t,e){this.i=!1,Cs(this,t,e)},Ds.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return xs(this,r,(function(t){t instanceof Us?o.cancel():i(t)})),o.then(t,e,n)},Ds.prototype.$goog_Thenable=!0,N(Ms,x),Ms.prototype.message="Deferred has already fired",Ms.prototype.name="AlreadyCalledError",N(Us,x),Us.prototype.message="Deferred was canceled",Us.prototype.name="CanceledError",js.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function Fs(t){var e={},n=e.document||document,r=Nt(t).toString(),i=fe(document,"SCRIPT"),o={Tb:i,Ka:void 0},s=new Ds(o),a=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(a=window.setTimeout((function(){Bs(i,!0);var t=new zs(Hs,"Timeout reached for loading script "+r);Rs(s),Cs(s,!1,t)}),l),o.Ka=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Bs(i,e.ud||!1,a),Rs(s),Cs(s,!0,null))},i.onerror=function(){Bs(i,!0,a);var t=new zs(Gs,"Error while loading script "+r);Rs(s),Cs(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ae(i,o),function(t,e){mt(t,"HTMLScriptElement"),t.src=Nt(e),null===h&&(h=(e=(e=u.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function qs(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Bs(t,!0,this.Ka)}}function Bs(t,e,n){null!=n&&u.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Gs=0,Hs=1;function zs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),x.call(this,n),this.code=t}function Ws(t){this.f=t}function Ks(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Xs,this.g=dt(t.secureTokenHeaders||$s),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Qs,this.a=dt(t.firebaseHeaders||Zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=u.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!gr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,gr()?this.f=new hs(self):br()?this.f=new Ws(n):this.f=new Xo,this.b=null}N(zs,x),N(Ws,Wo),Ws.prototype.a=function(){return new this.f},Ws.prototype.b=function(){return{}};var Js,Ys="idToken",Xs=new Vr(3e4,6e4),$s={"Content-Type":"application/x-www-form-urlencoded"},Qs=new Vr(3e4,6e4),Zs={"Content-Type":"application/json"};function ta(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ea(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function na(t,e,n,r,i,o,s){(function(){var t=Sr();return!((t=Tr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Kt||!ne||9<ne)})()||gr()?t=I(t.w,t):(Js||(Js=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[ia]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){xs(t,null,e,void 0)}(Fs(At(ra,{onload:ia})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,s)}Ks.prototype.S=function(){return this.b},Ks.prototype.w=function(t,e,n,r,i,o){if(gr()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ys(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}In(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return cs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),En(s,"ready",(function(){a&&clearTimeout(a),He(this)})),En(s,"timeout",(function(){a&&clearTimeout(a),He(this),e&&e(null)})),bs(s,t,n,r,i)};var ra=new gt(It,"https://apis.google.com/js/client.js?onload=%{onload}"),ia="__fcb"+Math.floor(1e6*Math.random()).toString();function oa(t,e,n,r,i,o,s){var a=jn(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new be((function(e,n){na(t,a.toString(),(function(t){t?t.error?n(tu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:nr(Pr(i)),t.a,t.i.get())}))}function sa(t){if("string"!=typeof(t=t.email)||!dr.test(t))throw new A("invalid-email")}function aa(t){"email"in t&&sa(t)}function ua(t){if(!t[Ys]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,dt(t));throw new A("internal-error")}}function ca(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Ks.prototype.s=function(t,e,n,r,i){var o=this;Js.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ks.prototype.vb=function(){return Qa(this,Fa,{})},Ks.prototype.xb=function(t,e){return Qa(this,ja,{idToken:t,email:e})},Ks.prototype.yb=function(t,e){return Qa(this,Va,{idToken:t,password:e})};var ha={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function la(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function fa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function pa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Qn(t=new Jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function da(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=Za(t.errorMessage)),e)throw e;ua(t)}function va(t,e){return e.returnIdpCredential=!0,Qa(t,Ga,e)}function ya(t,e){return e.returnIdpCredential=!0,Qa(t,za,e)}function ma(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Qa(t,Ha,e)}function ga(t){if(!t.oobCode)throw new A("invalid-action-code")}(e=Ks.prototype).zb=function(t,e){var n={idToken:t},r=[];return ft(ha,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Qa(this,ja,n)},e.rb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),Qa(this,xa,t)},e.sb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),Qa(this,Da,t)},e.qb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Qa(this,Ca,t)},e.Ab=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Qa(this,Ra,t)},e.cb=function(t){return Qa(this,Ja,t)},e.jb=function(t,e){return Qa(this,Ma,{oobCode:t,newPassword:e})},e.Pa=function(t){return Qa(this,ba,{oobCode:t})},e.fb=function(t){return Qa(this,wa,{oobCode:t})};var wa={endpoint:"setAccountInfo",A:ga,Y:"email",C:!0},ba={endpoint:"resetPassword",A:ga,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},C:!0},Ia={endpoint:"signupNewUser",A:function(t){if(sa(t),!t.password)throw new A("weak-password")},G:ua,U:!0,C:!0},Ea={endpoint:"createAuthUri",C:!0},Ta={endpoint:"deleteAccount",M:["idToken"]},Na={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=f(t.deleteProvider))throw new A("internal-error")}},Aa={endpoint:"emailLinkSignin",M:["email","oobCode"],A:sa,G:ua,U:!0,C:!0},Sa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:sa,G:ua,U:!0},ka={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:la,G:ua,C:!0,La:!0},_a={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:la,G:ua,C:!0,La:!0},Oa={endpoint:"getAccountInfo"},Da={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");sa(t)},Y:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Y:"email",C:!0},Ra={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Y:"email",C:!0},xa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");sa(t)},Y:"email",C:!0},Pa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},La={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Ma={endpoint:"resetPassword",A:ga,Y:"email",C:!0},Ua={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},ja={endpoint:"setAccountInfo",M:["idToken"],A:aa,U:!0},Va={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(aa(t),!t.password)throw new A("weak-password")},G:ua,U:!0},Fa={endpoint:"signupNewUser",G:ua,U:!0,C:!0},qa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},C:!0,La:!0},Ba={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},C:!0,La:!0},Ga={endpoint:"verifyAssertion",A:fa,Wa:pa,G:da,U:!0,C:!0},Ha={endpoint:"verifyAssertion",A:fa,Wa:pa,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw Za(t.errorMessage);ua(t)},U:!0,C:!0},za={endpoint:"verifyAssertion",A:function(t){if(fa(t),!t.idToken)throw new A("internal-error")},Wa:pa,G:da,U:!0},Wa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:ua,U:!0,C:!0},Ka={endpoint:"verifyPassword",A:function(t){if(sa(t),!t.password)throw new A("wrong-password")},G:ua,U:!0,C:!0},Ja={endpoint:"verifyPhoneNumber",A:ca,G:ua,C:!0},Ya={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");ca(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);ua(t)}},Xa={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ca,G:ua,C:!0},$a={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ys]^!!t.refreshToken)throw new A("internal-error")},C:!0,La:!0};function Qa(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return _e(new A("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return ke(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),oa(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return r=t,e.Wa?e.Wa(n,r):r})).then(e.G).then((function(){if(!e.Y)return r;if(!(e.Y in r))throw new A("internal-error");return r[e.Y]}))}function Za(t){return tu({error:{errors:[{message:t}],code:400,message:t}})}function tu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=xr(t)),new A("internal-error",e)}function eu(t){this.b=t,this.a=null,this.nb=function(t){return(ou||(ou=new be((function(t,e){function n(){jr(),kr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){jr(),e(Error("Network Error"))},timeout:ru.get()})}if(kr("gapi.iframes.Iframe"))t();else if(kr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){kr("gapi.load")?n():e(Error("Network Error"))},ke(Fs(r=At(nu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw ou=null,t})))).then((function(){return new be((function(e,n){kr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),iu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var nu=new gt(It,"https://apis.google.com/js/api.js?onload=%{onload}"),ru=new Vr(3e4,6e4),iu=new Vr(5e3,15e3),ou=null;function su(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Vn(this.i,"/__/auth/iframe"),Mn(this.a,"apiKey",this.g),Mn(this.a,"appName",this.h),this.b=null,this.c=[]}function au(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function uu(t){try{return r.a.app(t).auth().Ea()}catch(t){return[]}}function cu(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function hu(t){var e=ur();return function(t){return Qa(t,Pa,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=jn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=jn(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:pr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Go(ur())}))}function lu(t){return t.l||(t.l=vr().then((function(){if(!t.s){var e=t.c,n=t.h,r=uu(t.b),i=new su(t.u,t.f,t.b);i.f=e,i.b=n,i.c=$(r||[]),t.s=i.toString()}t.i=new eu(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then((function(){t.a.register("authEvent",e,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(t)}))),t.l}function fu(t){return t.m||(t.w=t.c?Ar(t.c,uu(t.b)):null,t.m=new Ks(t.f,C(t.h),t.w)),t.m}function pu(t,e,n,r,i,o,s,a,u,c,h){return(t=new au(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=dt(u||null),t.f=c,t.ub(h).toString()}function du(t){if(this.a=t||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function vu(t){this.b=t,this.a={},this.f=I(this.c,this)}su.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):$n(this.a.a,"v"),this.b?Mn(this.a,"eid",this.b):$n(this.a.a,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):$n(this.a.a,"fw"),this.a.toString()},au.prototype.ub=function(t){return this.h=t,this},au.prototype.toString=function(){var t=Vn(this.s,"/__/auth/handler");if(Mn(t,"apiKey",this.m),Mn(t,"appName",this.c),Mn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=r.a.app(this.c).auth().ja()}catch(t){n=null}for(var i in e.kb=n,Mn(t,"providerId",this.a.providerId),n=Pr((e=this.a).Fb))n[i]=n[i].toString();i=e.Oc,n=dt(n);for(var o=0;o<i.length;o++){var s=i[o];s in n&&delete n[s]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),pt(n)||Mn(t,"customParameters",xr(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&Mn(t,"scopes",e.join(","))),this.l?Mn(t,"redirectUrl",this.l):$n(t.a,"redirectUrl"),this.g?Mn(t,"eventId",this.g):$n(t.a,"eventId"),this.i?Mn(t,"v",this.i):$n(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Un(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):$n(t.a,"tid"),this.f?Mn(t,"eid",this.f):$n(t.a,"eid"),(a=uu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(e=cu.prototype).Lb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.ka().then((function(){(function(t){var e={type:"webStorageSupport"};return lu(t).then((function(){return function(t,e){return t.nb.then((function(){return new be((function(n){t.a.send(e.type,e,n,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&lr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new be((function(e){return function n(){An(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return An(n).then((function(){e(r)}))}))},e.Ub=function(){var t=Sr();return!Rr(t)&&!Ur(t)},e.Qb=function(){return!1},e.Jb=function(t,e,n,r,i,o,s,a){if(!t)return _e(new A("popup-blocked"));if(s&&!Rr())return this.ka().o((function(e){lr(t),i(e)})),r(),ke();this.a||(this.a=hu(fu(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw lr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),s)||cr(pu(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,a),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},e.Kb=function(t,e,n,r){this.a||(this.a=hu(fu(this)));var i=this;return this.a.then((function(){Uo(e),cr(pu(i.u,i.f,i.b,t,e,ur(),n,i.c,void 0,i.h,r))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},e.ka=function(){var t=this;return lu(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new A("network-request-failed")}))},e.Xb=function(){return!0},e.Ca=function(t){this.g.push(t)},e.Qa=function(t){Y(this.g,(function(e){return e==t}))},(e=du.prototype).get=function(t){return ke(this.a.getItem(t)).then((function(t){return t&&Lr(t)}))},e.set=function(t,e){return ke(this.a.setItem(t,xr(e)))},e.T=function(t){return ke(this.a.removeItem(t))},e.ba=function(){},e.ha=function(){};var yu,mu=[];function gu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wu(t){this.a=t}function bu(t){this.c=t,this.b=!1,this.a=[]}function Iu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return _e(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Eu(t,c),e})).o((function(e){throw Eu(t,c),e}))}function Eu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Tu(){if(!Su())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=u.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t=this;gr()&&self?(this.l=function(){var t=gr()?self:null;if(G(mu,(function(n){n.b==t&&(e=n)})),!e){var e=new vu(t);mu.push(e)}return e}(),gu(this.l,"keyChanged",(function(e,n){return Cu(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:K(e,n.key)}}))})),gu(this.l,"ping",(function(){return ke(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?ke().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):ke(null)}().then((function(e){(t.h=e)&&(t.g=new bu(new wu(e)),Iu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&K(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Nu(t){return new be((function(e,n){var r=t.u.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Nu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Au(t){return t.m||(t.m=Nu(t)),t.m}function Su(){try{return!!u.indexedDB}catch(t){return!1}}function ku(t){return t.objectStore("firebaseLocalStorage")}function _u(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ou(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Du(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Iu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):ke()}function Cu(t){return Au(t).then((function(t){var e=ku(_u(t,!1));return e.getAll?Ou(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Ru(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function xu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then((function(){if(Su()){var t=Mr(),r="__sak"+t;return yu||(yu=new Tu),(n=yu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){G(e.a,(function(e){e(t)}))})),t}))}function Pu(){this.a={},this.type="inMemory"}function Lu(){if(!function(){var t="Node"==wr();if(!(t=Mu()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Mu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Mu(){try{var t=u.localStorage,e=Mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Uu(){this.type="nullStorage"}function ju(){if(!function(){var t="Node"==wr();if(!(t=Vu()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Vu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Vu(){try{var t=u.sessionStorage,e=Mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Fu(){var t={};t.Browser=Gu,t.Node=Hu,t.ReactNative=zu,t.Worker=Wu,this.a=t[wr()]}vu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(ke().then((function(){return e(t.origin,t.data.data)})))})),De(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},wu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},bu.prototype.close=function(){for(;0<this.a.length;)Eu(this,this.a[0]);this.b=!0},(e=Tu.prototype).set=function(t,e){var n,r=!1,i=this;return Au(this).then((function(e){return Ou((e=ku(_u(n=e,!0))).get(t))})).then((function(o){var s=ku(_u(n,!0));return o?(o.value=e,Ou(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Ou(s.add(o)))})).then((function(){return i.c[t]=e,Du(i,t)})).ma((function(){r&&i.b--}))},e.get=function(t){return Au(this).then((function(e){return Ou(ku(_u(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.T=function(t){var e=!1,n=this;return Au(this).then((function(r){return e=!0,n.b++,Ou(ku(_u(r,!0)).delete(t))})).then((function(){return delete n.c[t],Du(n,t)})).ma((function(){e&&n.b--}))},e.ba=function(t){0==this.a.length&&function(t){Ru(t),function e(){t.f=setTimeout((function(){t.i=Cu(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},e.ha=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Ru(this)},(e=xu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.T=function(t){return this.b.then((function(e){return e.T(t)}))},e.ba=function(t){this.a.push(t)},e.ha=function(t){Y(this.a,(function(e){return e==t}))},(e=Pu.prototype).get=function(t){return ke(this.a[t])},e.set=function(t,e){return this.a[t]=e,ke()},e.T=function(t){return delete this.a[t],ke()},e.ba=function(){},e.ha=function(){},(e=Lu.prototype).get=function(t){var e=this;return ke().then((function(){return Lr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return ke().then((function(){var r=xr(e);null===r?n.T(t):n.a.setItem(t,r)}))},e.T=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},e.ba=function(t){u.window&&un(u.window,"storage",t)},e.ha=function(t){u.window&&ln(u.window,"storage",t)},(e=Uu.prototype).get=function(){return ke(null)},e.set=function(){return ke()},e.T=function(){return ke()},e.ba=function(){},e.ha=function(){},(e=ju.prototype).get=function(t){var e=this;return ke().then((function(){return Lr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return ke().then((function(){var r=xr(e);null===r?n.T(t):n.a.setItem(t,r)}))},e.T=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},e.ba=function(){},e.ha=function(){};var qu,Bu,Gu={F:Lu,$a:ju},Hu={F:Lu,$a:ju},zu={F:du,$a:Uu},Wu={F:Lu,$a:Uu},Ku={od:"local",NONE:"none",qd:"session"};function Ju(){var t=!(Ur(Sr())||!mr()),e=Rr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},qu||(qu=new Fu),t=qu;try{this.g=!ar()&&Br()||!u.indexedDB?new t.a.F:new xu(gr()?new Pu:new t.a.F)}catch(t){this.g=new Pu,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Pu}this.u=new Pu,this.f=I(this.Vb,this),this.b={}}function Yu(){return Bu||(Bu=new Ju),Bu}function Xu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function $u(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Qu(t,e,n){return n=$u(e,n),"local"==e.F&&(t.b[n]=null),Xu(t,e.F).T(n)}function Zu(t){t.c&&(clearInterval(t.c),t.c=null)}function tc(t){this.a=t,this.b=Yu()}(e=Ju.prototype).get=function(t,e){return Xu(this,t.F).get($u(t,e))},e.set=function(t,e,n){var r=$u(t,n),i=this,o=Xu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},e.addListener=function(t,e,n){t=$u(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),pt(this.a)&&(Xu(this,"local").ba(this.f),this.h||(ar()||!Br())&&u.indexedDB||!this.l||function(t){Zu(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Vb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=$u(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Xu(this,"local").ha(this.f),Zu(this))},e.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Xu(this,"local").ha(this.f):Zu(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.ib(e))},Kt&&ne&&10==ne&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,I(this.ib,this))},e.ib=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var ec,nc={name:"authEvent",F:"local"};function rc(){this.a=Yu()}function ic(t,e){this.b=oc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===ec&&(ec=u.Int32Array?new Int32Array(fc):fc),this.reset()}N(ic,(function(){this.b=-1}));for(var oc=64,sc=oc-1,ac=[],uc=0;uc<sc;uc++)ac[uc]=0;var cc=X(128,ac);function hc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|ec[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function lc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(hc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(hc(t),i=0)}}t.c=i,t.g+=n}ic.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):$(this.h)};var fc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function pc(){ic.call(this,8,dc)}N(pc,ic);var dc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function vc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new rc,this.g=new tc(this.h),this.f=null,this.b=[],this.a=this.c=null}function yc(t){return new A("invalid-cordova-configuration",t)}function mc(t){var e=new pc;lc(e,t),t=[];var n=8*e.g;56>e.c?lc(e,cc,56-e.c):lc(e,cc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(hc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function gc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function wc(t){return t.f||(t.f=t.ka().then((function(){return new be((function(e){t.Ca((function n(r){return e(r),t.Qa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),bc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=no(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Lr(Un(o=jn(i),"firebaseError")||null))?S(o):null)?new jo(r.c,r.b,null,null,o,null,r.S()):new jo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}gc(t,i)}))}var n=new jo("unknown",null,null,null,new A("no-auth-event")),r=!1,i=An(500).then((function(){return bc(t).then((function(){r||gc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(kr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Bo||(Bo=new Fo),function(t){var e=Bo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=kr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function bc(t){var e=null;return function(t){return t.b.get(nc,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,Qu((n=t.g).b,nc,n.a)})).then((function(){return e}))}function Ic(t){this.a=t,this.b=Yu()}(e=vc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(yr(void 0)?vr().then((function(){return new be((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):_e(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof kr("universalLinks.subscribe",u))throw yc("cordova-universal-links-plugin-fix is not installed");if(void 0===kr("BuildInfo.packageName",u))throw yc("cordova-plugin-buildinfo is not installed");if("function"!=typeof kr("cordova.plugins.browsertab.openUrl",u))throw yc("cordova-plugin-browsertab is not installed");if("function"!=typeof kr("cordova.InAppBrowser.open",u))throw yc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},e.Lb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),ke()},e.Jb=function(){return _e(new A("operation-not-supported-in-this-environment"))},e.Xb=function(){return!1},e.Ub=function(){return!0},e.Qb=function(){return!0},e.Kb=function(t,e,n,r){if(this.c)return _e(new A("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,h=null;return this.c=ke().then((function(){return Uo(e),wc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new jo(e,r,null,o,new A("no-auth-event"),null,i),a=kr("BuildInfo.packageName",u);if("string"!=typeof a)throw new A("invalid-cordova-configuration");var c=kr("BuildInfo.displayName",u),h={};if(Sr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!Sr().toLowerCase().match(/android/))return _e(new A("operation-not-supported-in-this-environment"));h.apn=a}c&&(h.appDisplayName=c),o=mc(o),h.sessionId=o;var l=pu(t.u,t.i,t.l,e,n,null,r,t.m,h,t.s,i);return t.ka().then((function(){var e=t.h;return t.w.a.set(nc,s.v(),e)})).then((function(){var e=kr("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=kr("cordova.plugins.browsertab.openUrl",u)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=kr("cordova.InAppBrowser.open",u)))throw new A("invalid-cordova-configuration");e=Sr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){a=function(){var e=kr("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),c=function(){s||(s=An(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Fr()&&c()},o.addEventListener("resume",c,!1),Sr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return bc(i).then((function(){throw t}))}))})).ma((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null}))},e.Ca=function(t){this.b.push(t),wc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new jo("unknown",null,null,null,new A("no-auth-event")),t(e))}))},e.Qa=function(t){Y(this.b,(function(e){return e==t}))};var Ec={name:"pendingRedirect",F:"session"};function Tc(t){return Qu(t.b,Ec,t.a)}function Nc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new jc,this.B=new Gc,this.g=new Ic(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Ac(this.D,this.u,this.m,k)}function Ac(t,e,n,i){var o=r.a.SDK_VERSION||null;return yr()?new vc(t,e,n,o,i):new cu(t,e,n,o,i)}function Sc(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function kc(t){t.a.Ub()&&Sc(t).o((function(e){var n=new jo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));xc(e)&&t.s(n)})),t.a.Qb()||Vc(t.b)}function _c(t,e){K(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ec,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Tc(t.g).then((function(){Sc(t).o((function(e){var n=new jo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));xc(e)&&t.s(n)}))})):kc(t)})).o((function(){kc(t)}))}function Oc(t,e){Y(t.h,(function(t){return t==e}))}Nc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Ac(this.D,this.u,this.m),this.i={}},Nc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=T()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=T())),e=!0;break}}return Vc(this.b),e};var Dc=new Vr(2e3,1e4),Cc=new Vr(3e4,6e4);function Rc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),i,o,s)}function xc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Pc(t,e,n,r,i){var o;return function(t){return t.b.set(Ec,"pending",t.a)}(t.g).then((function(){return t.a.Kb(e,n,r,i).o((function(e){if(xc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Tc(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new be((function(){})):Tc(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function Lc(t,e,n,r,i){return t.a.Lb(r,(function(t){e.la(n,null,t,i)}),Dc.get())}Nc.prototype.pa=function(){return this.b.pa()};var Mc={};function Uc(t,e,n){var r=e+":"+n;return Mc[r]||(Mc[r]=new Nc(t,e,n)),Mc[r]}function jc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Vc(t){t.g||(t.g=!0,Bc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&Bc(t,!1,null,null)}function qc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Bc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):qc(t,n):qc(t,{user:null}),t.f=[],t.c=[]}function Gc(){}function Hc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function zc(t,e){this.a=e,Kr(this,"verificationId",t)}function Wc(t,e,n,r){return new Po(t).cb(e,n).then((function(t){return new zc(t,r)}))}function Kc(t){var e=Bi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Jr(this,{token:t,expirationTime:qr(1e3*e.exp),authTime:qr(1e3*e.auth_time),issuedAtTime:qr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Jc(t,e,n){var r=e&&e[Xc];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=dt(e),this.g=n,this.c=new ro(null,r),this.b=[];var i=this;G(e[Yc]||[],(function(t){(t=Qr(t))&&i.b.push(t)})),Kr(this,"auth",this.a),Kr(this,"session",this.c),Kr(this,"hints",this.b)}jc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},jc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Bc(this,!0,null,t.a),ke()):e.Da(n,r)?function(t,e,n){n=n.Da(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Bc(t,a,e,null)})).o((function(e){Bc(t,a,null,e)}))}(this,t,e):_e(new A("invalid-auth-event")):(Bc(this,!1,null,null),ke())}else _e(new A("invalid-auth-event"))},jc.prototype.pa=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=An(Cc.get()).then((function(){t.b||(t.g=!0,Bc(t,!0,null,e))}))}(t))}))},Gc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),ke()):e.Da(n,r)?function(t,e){var n=t.b,r=t.c;e.Da(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.la(r,t,null,n)})).o((function(t){e.la(r,null,t,n)}))}(t,e):_e(new A("invalid-auth-event"))}else _e(new A("invalid-auth-event"))},zc.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Yc="mfaInfo",Xc="mfaPendingCredential";function $c(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new Jc(t,e,n),Kr(this,"resolver",this.b)}function Qc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new $c(e,t.serverResponse,n,t.message)}catch(t){}return null}function Zc(){}function th(t){Kr(this,"factorId",t.ea),this.a=t}function eh(t){if(th.call(this,t),this.a.ea!=Po.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function nh(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function rh(t,e){this.a=t,this.b=[],this.c=I(this.wc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ei]=t.uid),t.displayName&&(r[Zr]=t.displayName),t.enrollmentTime&&(r[ti]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ni]=t.phoneNumber);try{e=new ri(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),ih(this,n)}function ih(t,e){t.b=e,Kr(t,"enrolledFactors",e)}function oh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function sh(t){this.c=t,this.b=this.a=null}function ah(t){return t.b&&1e3*t.b.c||0}function uh(t,e){var n=e.refreshToken;t.b=qi(e[Ys]||""),t.a=n}function ch(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?na(t,t.u+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(tu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.c,e).then((function(e){return t.b=qi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function hh(t,e){this.a=t||null,this.b=e||null,Jr(this,{lastSignInTime:qr(e||null),creationTime:qr(t||null)})}function lh(t,e,n,r,i,o){Jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function fh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=r.a.SDK_VERSION?Ar(r.a.SDK_VERSION):null,this.a=new Ks(this.l,C(k),t),this.b=new sh(this.a),wh(this,e[Ys]),uh(this.b,e),Kr(this,"refreshToken",this.b.a),Eh(this,n||{}),bn.call(this),this.P=!1,this.s&&Or()&&(this.i=Uc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(t){return new oh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=ah(t.b)-T()-3e5;return 0<e?e:0}))}(this),this.Z=I(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){dh(i,t.c)},this.$=null,this.O=new rh(this,n),Kr(this,"multiFactor",this.O)}function ph(t,e){t.aa&&ln(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&un(e,"languageCodeChanged",t.za)}function dh(t,e){t.W=e,ea(t.a,r.a.SDK_VERSION?Ar(r.a.SDK_VERSION,t.W):null)}function vh(t,e){t.$&&ln(t.$,"frameworkChanged",t.ya),(t.$=e)&&un(e,"frameworkChanged",t.ya)}function yh(t){try{return r.a.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function mh(t){t.D||t.B.b||(t.B.start(),ln(t,"tokenChanged",t.Z),un(t,"tokenChanged",t.Z))}function gh(t){ln(t,"tokenChanged",t.Z),t.B.stop()}function wh(t,e){t.xa=e,Kr(t,"_lat",e)}function bh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return De(e).then((function(){return t}))}function Ih(t){t.i&&!t.P&&(t.P=!0,_c(t.i,t))}function Eh(t,e){Jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new hh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Th(){}function Nh(t){return ke().then((function(){if(t.D)throw new A("app-deleted")}))}function Ah(t){return z(t.providerData,(function(t){return t.providerId}))}function Sh(t,e){e&&(kh(t,e.providerId),t.providerData.push(e))}function kh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function _h(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Kr(t,e,n)}function Oh(t,e){t!=e&&(Jr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Kr(t,"metadata",function(t){return new hh(t.a,t.b)}(e.metadata)):Kr(t,"metadata",new hh),G(e.providerData,(function(e){Sh(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Kr(t,"refreshToken",t.b.a),ih(t.O,e.O.b))}function Dh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Qa(t.a,Oa,{idToken:e}).then(I(t.Ic,t))}(t,e).then((function(){return n||_h(t,"isAnonymous",!1),e}))}))}function Ch(t,e){e[Ys]&&t.xa!=e[Ys]&&(uh(t.b,e),t.dispatchEvent(new nh("tokenChanged")),wh(t,e[Ys]),_h(t,"refreshToken",t.b.a))}function Rh(t,e){return Dh(t).then((function(){if(K(Ah(t),e))return bh(t).then((function(){throw new A("provider-already-linked")}))}))}function xh(t,e,n){return Yr({user:t,credential:Mo(e),additionalUserInfo:e=Ki(e),operationType:n})}function Ph(t,e){return Ch(t,e),t.reload().then((function(){return t}))}function Lh(t,e,n,i,o){if(!Or())return _e(new A("operation-not-supported-in-this-environment"));if(t.h&&!o)return _e(t.h);var s=Wi(n.providerId),a=Mr(t.uid+":::"),u=null;(!Rr()||mr())&&t.s&&n.isOAuthProvider&&(u=pu(t.s,t.l,t.m,e,n,null,a,r.a.SDK_VERSION||null,null,null,t.tenantId));var c=fr(u,s&&s.ta,s&&s.sa);return i=i().then((function(){if(Uh(t),!o)return t.I().then((function(){}))})).then((function(){return Rc(t.i,c,e,n,a,!!u,t.tenantId)})).then((function(){return new be((function(n,r){t.la(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.w=r,t.g=a,t.c=Lc(t.i,t,e,c,a)}))})).then((function(t){return c&&lr(c),t?Yr(t):null})).o((function(t){throw c&&lr(c),t})),jh(t,i,o)}function Mh(t,e,n,r,i){if(!Or())return _e(new A("operation-not-supported-in-this-environment"));if(t.h&&!i)return _e(t.h);var o=null,s=Mr(t.uid+":::");return r=r().then((function(){if(Uh(t),!i)return t.I().then((function(){}))})).then((function(){return t.fa=s,bh(t)})).then((function(e){return t.ga&&(e=(e=t.ga).b.set(qh,t.v(),e.a)),e})).then((function(){return Pc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ga)return Bh(t.ga);throw o})).then((function(){if(o)throw o})),jh(t,r,i)}function Uh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function jh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),_e(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new nh("userInvalidated")),t.h=e),e}))}(t,e,n);return t.N.push(r),r.ma((function(){J(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Qc(e.v(),yh(t),I(t.hc,t))),n||e}))}function Vh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ys]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new fh(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&Sh(r,Yr(t))})),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Fh(t){this.a=t,this.b=Yu()}Jc.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=dt(e.f);return delete n[Yc],delete n[Xc],yt(n,t),e.g(n)}))},N($c,A),Zc.prototype.ob=function(t,e,n){return e.type==io?function(t,e,n,r){return n.Fa().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:xo(t.a)}),Qa(e,ka,n)}))}(this,t,e,n):function(t,e,n){return n.Fa().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:xo(t.a)}),Qa(e,_a,n)}))}(this,t,e)},N(th,Zc),N(eh,th),N(nh,Ye),(e=rh.prototype).wc=function(t){ih(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=Qr(t))&&e.push(t)})),e}(t.ed))},e.Ob=function(){return this.a.I().then((function(t){return new ro(t,null)}))},e.dc=function(t,e){var n=this,r=this.a.a;return this.Ob().then((function(n){return t.ob(r,n,e)})).then((function(t){return Ch(n.a,t),n.a.reload()}))},e.$c=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Qa(r,$a,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return ih(e,r),Ch(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},e.v=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.v()}))}}},oh.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=An(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=u.document,e=null;return Fr()||!t?ke():new be((function(n){e=function(){Fr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},oh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},sh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:ah(this)}},sh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new A("user-token-expired")):t||!this.b||T()>ah(this)-3e4?this.a?ch(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},hh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},N(fh,bn),fh.prototype.va=function(t){this.oa=t,ta(this.a,t)},fh.prototype.ja=function(){return this.oa},fh.prototype.Ea=function(){return $(this.W)},fh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Kr(fh.prototype,"providerId","firebase"),(e=fh.prototype).reload=function(){var t=this;return jh(this,Nh(this).then((function(){return Dh(t).then((function(){return bh(t)})).then(Th)})))},e.mc=function(t){return this.I(t).then((function(t){return new Kc(t)}))},e.I=function(t){var e=this;return jh(this,Nh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.xa&&(wh(e,t.accessToken),e.dispatchEvent(new nh("tokenChanged"))),_h(e,"refreshToken",t.refreshToken),t.accessToken})))},e.Ic=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Eh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new lh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Sh(this,e[n]);_h(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new nh("userReloaded",{ed:t}))},e.Jc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},e.pb=function(t){var e=this,n=null;return jh(this,t.c(this.a,this.uid).then((function(t){return Ch(e,t),n=xh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},e.Ac=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},e.mb=function(t){var e=this,n=null;return jh(this,Rh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=xh(e,t,"link"),Ph(e,t)})).then((function(){return n})))},e.Bc=function(t,e){var n=this;return jh(this,Rh(this,"phone").then((function(){return Wc(yh(n),t,e,I(n.mb,n))})))},e.Kc=function(t,e){var n=this;return jh(this,ke().then((function(){return Wc(yh(n),t,e,I(n.pb,n))})),!0)},e.xb=function(t){var e=this;return jh(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return Ch(e,t),e.reload()})))},e.cd=function(t){var e=this;return jh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Ch(e,t),e.reload()})))},e.yb=function(t){var e=this;return jh(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return Ch(e,t),e.reload()})))},e.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Nh(this);var e=this;return jh(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Ch(e,t),_h(e,"displayName",t.displayName||null),_h(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&(Kr(t,"displayName",e.displayName),Kr(t,"photoURL",e.photoURL))})),bh(e)})).then(Th))},e.ad=function(t){var e=this;return jh(this,Dh(this).then((function(n){return K(Ah(e),t)?function(t,e,n){return Qa(t,Na,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(Ah(e),(function(t){n[t]||kh(e,t)})),n[Po.PROVIDER_ID]||Kr(e,"phoneNumber",null),bh(e)})):bh(e).then((function(){throw new A("no-such-provider")}))})))},e.delete=function(){var t=this;return jh(this,this.I().then((function(e){return Qa(t.a,Ta,{idToken:e})})).then((function(){t.dispatchEvent(new nh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");ph(t,null),vh(t,null),t.N=[],t.D=!0,gh(t),Kr(t,"refreshToken",null),t.i&&Oc(t.i,t)}))},e.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},e.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?I(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?I(this.Ib,this):null},e.Cc=function(t){var e=this;return Lh(this,"linkViaPopup",t,(function(){return Rh(e,t.providerId).then((function(){return bh(e)}))}),!1)},e.Lc=function(t){return Lh(this,"reauthViaPopup",t,(function(){return ke()}),!0)},e.Dc=function(t){var e=this;return Mh(this,"linkViaRedirect",t,(function(){return Rh(e,t.providerId)}),!1)},e.Mc=function(t){return Mh(this,"reauthViaRedirect",t,(function(){return ke()}),!0)},e.Hb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jh(this,this.I().then((function(n){return ya(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=xh(i,t,"link"),Ph(i,t)})).then((function(){return o})))},e.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jh(this,ke().then((function(){return ao(ma(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=xh(i,t,"reauthenticate"),Ch(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},e.qb=function(t){var e=this,n=null;return jh(this,this.I().then((function(e){return n=e,void 0===t||pt(t)?{}:Ui(new ki(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.Ab=function(t,e){var n=this,r=null;return jh(this,this.I().then((function(t){return r=t,void 0===e||pt(e)?{}:Ui(new ki(e))})).then((function(e){return n.a.Ab(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},e.hc=function(t){var e=null,n=this;return jh(this,t=ao(ke(t),n.uid).then((function(t){return e=xh(n,t,"reauthenticate"),Ch(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},e.toJSON=function(){return this.v()},e.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&yt(t,this.metadata.v()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.O.v()),t};var qh={name:"redirectUser",F:"session"};function Bh(t){return Qu(t.b,qh,t.a)}function Gh(t){this.a=t,this.b=Yu(),this.c=null,this.f=function(t){var e=Wh("local"),n=Wh("session"),r=Wh("none");return function(t,e,n){var r=$u(e,n),i=Xu(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Lr(u.localStorage.getItem(r))}catch(t){}if(s&&!o)return u.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(zh,t.a).then((function(t){return t?Wh(t):e}))}))}))})).then((function(e){return t.c=e,Hh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Wh("local"),this.a,I(this.g,this))}function Hh(t,e){var n,r=[];for(n in Ku)Ku[n]!==e&&r.push(Qu(t.b,Wh(Ku[n]),t.a));return r.push(Qu(t.b,zh,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Oe(t[a],E(o,a),s);else e(i)}))}(r)}Gh.prototype.g=function(){var t=this,e=Wh("local");Xh(this,(function(){return ke().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Hh(t,"local").then((function(){t.c=e}))}))}))};var zh={name:"persistence",F:"session"};function Wh(t){return{name:"authUser",F:t}}function Kh(t,e){return Xh(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function Jh(t){return Xh(t,(function(){return Qu(t.b,t.c,t.a)}))}function Yh(t,e){return Xh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Vh(t||{})}))}))}function Xh(t,e){return t.f=t.f.then(e,e),t.f}function $h(t){if(this.l=!1,Kr(this,"settings",new Hc),Kr(this,"app",t),!ol(this).options||!ol(this).options.apiKey)throw new A("invalid-api-key");t=r.a.SDK_VERSION?Ar(r.a.SDK_VERSION):null,this.b=new Ks(ol(this).options&&ol(this).options.apiKey,C(k),t),this.P=[],this.m=[],this.O=[],this.$b=r.a.INTERNAL.createSubscribe(I(this.xc,this)),this.W=void 0,this.ac=r.a.INTERNAL.createSubscribe(I(this.yc,this)),rl(this,null),this.i=new Gh(ol(this).options.apiKey+":"+ol(this).name),this.B=new Fh(ol(this).options.apiKey+":"+ol(this).name),this.Z=cl(this,function(t){var e=ol(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(qh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Vh(t||{})}))}(t.B,ol(t).options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),Bh(t.B)}));return cl(t,e)}(t).then((function(){return Yh(t.i,e)})).then((function(e){return e?(e.ga=t.B,t.D&&(t.D.fa||null)==(e.fa||null)?e:e.reload().then((function(){return Kh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Jh(t.i)}))):null})).then((function(e){rl(t,e||null)}));return cl(t,n)}(this)),this.h=cl(this,function(t){return t.Z.then((function(){return el(t)})).o((function(){})).then((function(){if(!t.l)return t.oa()})).o((function(){})).then((function(){if(!t.l){t.aa=!0;var e=t.i;e.b.addListener(Wh("local"),e.a,t.oa)}}))}(this)),this.aa=!1,this.oa=I(this.Xc,this),this.Ma=I(this.ca,this),this.xa=I(this.jc,this),this.ya=I(this.uc,this),this.za=I(this.vc,this),this.a=null,function(t){var e=ol(t).options.authDomain,n=ol(t).options.apiKey;e&&Or()&&(t.Zb=t.Z.then((function(){if(!t.l){if(t.a=Uc(e,n,ol(t).name),_c(t.a,t),sl(t)&&Ih(sl(t)),t.D){Ih(t.D);var r=t.D;r.va(t.ja()),ph(r,t),dh(r=t.D,t.N),vh(r,t),t.D=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Ec,this),this.s=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}(this),this.N=[]}function Qh(t){Ye.call(this,"languageCodeChanged"),this.g=t}function Zh(t){Ye.call(this,"frameworkChanged"),this.c=t}function tl(t){return t.Zb||_e(new A("auth-domain-config-required"))}function el(t){if(!Or())return _e(new A("operation-not-supported-in-this-environment"));var e=tl(t).then((function(){return t.a.pa()})).then((function(t){return t?Yr(t):null}));return cl(t,e)}function nl(t,e){var n={};return n.apiKey=ol(t).options.apiKey,n.authDomain=ol(t).options.authDomain,n.appName=ol(t).name,t.Z.then((function(){return function(t,e,n,r){var i=new fh(t,e);return n&&(i.ga=n),r&&dh(i,r),i.reload().then((function(){return i}))}(n,e,t.B,t.Ea())})).then((function(e){return sl(t)&&e.uid==sl(t).uid?(Oh(sl(t),e),t.ca(e)):(rl(t,e),Ih(e),t.ca(e))})).then((function(){ul(t)}))}function rl(t,e){sl(t)&&(function(t,e){Y(t.R,(function(t){return t==e}))}(sl(t),t.Ma),ln(sl(t),"tokenChanged",t.xa),ln(sl(t),"userDeleted",t.ya),ln(sl(t),"userInvalidated",t.za),gh(sl(t))),e&&(e.R.push(t.Ma),un(e,"tokenChanged",t.xa),un(e,"userDeleted",t.ya),un(e,"userInvalidated",t.za),0<t.s&&mh(e)),Kr(t,"currentUser",e),e&&(e.va(t.ja()),ph(e,t),dh(e,t.N),vh(e,t))}function il(t,e){var n=null,r=null;return cl(t,e.then((function(e){return n=Mo(e),r=Ki(e),nl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Qc(e.v(),t,I(t.ic,t))),n||e})).then((function(){return Yr({user:sl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ol(t){return t.app}function sl(t){return t.currentUser}function al(t){return sl(t)&&sl(t)._lat||null}function ul(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](al(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](al(t))}}function cl(t,e){return t.P.push(e),e.ma((function(){J(t.P,e)})),e}function hl(){}function ll(){this.a={},this.b=1e12}Gh.prototype.tb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Ku)if(Ku[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(t),Xh(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Hh(n,t)})).then((function(){if(n.c=Wh(t),e)return n.b.set(n.c,e,n.a)})):ke()}))},N($h,bn),N(Qh,Ye),N(Zh,Ye),(e=$h.prototype).tb=function(t){return cl(this,t=this.i.tb(t))},e.va=function(t){this.$===t||this.l||(this.$=t,ta(this.b,this.$),this.dispatchEvent(new Qh(this.ja())))},e.ja=function(){return this.$},e.dd=function(){var t=u.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.Ec=function(t){this.N.push(t),ea(this.b,r.a.SDK_VERSION?Ar(r.a.SDK_VERSION,this.N):null),this.dispatchEvent(new Zh(this.N))},e.Ea=function(){return $(this.N)},e.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},e.S=function(){return this.R},e.toJSON=function(){return{apiKey:ol(this).options.apiKey,authDomain:ol(this).options.authDomain,appName:ol(this).name,currentUser:sl(this)&&sl(this).v()}},e.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},e.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.gc,this):null},e.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then((function(){return il(i,va(i.b,o))}))},e.Vc=function(t){if(!Or())return _e(new A("operation-not-supported-in-this-environment"));var e=this,n=Wi(t.providerId),i=Mr(),o=null;(!Rr()||mr())&&ol(this).options.authDomain&&t.isOAuthProvider&&(o=pu(ol(this).options.authDomain,ol(this).options.apiKey,ol(this).name,"signInViaPopup",t,null,i,r.a.SDK_VERSION||null,null,null,this.S()));var s=fr(o,n&&n.ta,n&&n.sa);return cl(this,n=tl(this).then((function(n){return Rc(n,s,"signInViaPopup",t,i,!!o,e.S())})).then((function(){return new be((function(t,n){e.la("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=i,e.c=Lc(e.a,e,"signInViaPopup",s,i)}))})).then((function(t){return s&&lr(s),t?Yr(t):null})).o((function(t){throw s&&lr(s),t})))},e.Wc=function(t){if(!Or())return _e(new A("operation-not-supported-in-this-environment"));var e=this;return cl(this,tl(this).then((function(){return function(t){return Xh(t,(function(){return t.b.set(zh,t.c.F,t.a)}))}(e.i)})).then((function(){return Pc(e.a,"signInViaRedirect",t,void 0,e.S())})))},e.pa=function(){var t=this;return el(this).then((function(e){return t.a&&Fc(t.a.b),e})).o((function(e){throw t.a&&Fc(t.a.b),e}))},e.bd=function(t){if(!t)return _e(new A("null-user"));if(this.R!=t.tenantId)return _e(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=ol(this).options.apiKey,n.authDomain=ol(this).options.authDomain,n.appName=ol(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ys]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new fh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),r&&dh(e,r),Oh(e,t),e}(t,n,e.B,e.Ea());return cl(this,this.h.then((function(){if(ol(e).options.apiKey!=t.l)return r.reload()})).then((function(){return sl(e)&&t.uid==sl(e).uid?(Oh(sl(e),t),e.ca(t)):(rl(e,r),Ih(r),e.ca(r))})).then((function(){ul(e)})))},e.wb=function(){var t=this;return cl(this,this.h.then((function(){return t.a&&Fc(t.a.b),sl(t)?(rl(t,null),Jh(t.i).then((function(){ul(t)}))):ke()})))},e.Xc=function(){var t=this;return Yh(this.i,ol(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=sl(t)&&e){n=sl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Oh(sl(t),e),sl(t).I();(sl(t)||e)&&(rl(t,e),e&&(Ih(e),e.ga=t.B),t.a&&_c(t.a,t),ul(t))}}))},e.ca=function(t){return Kh(this.i,t)},e.jc=function(){ul(this),this.ca(sl(this))},e.uc=function(){this.wb()},e.vc=function(){this.wb()},e.ic=function(t){var e=this;return this.h.then((function(){return il(e,ke(t))}))},e.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(sl(e))}))},e.yc=function(t){var e=this;!function(t,e){t.O.push(e),cl(t,t.h.then((function(){!t.l&&K(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(al(t)))})))}(this,(function(){t.next(sl(e))}))},e.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){d(t)?t(sl(r)):d(t.next)&&t.next(sl(r))})),this.$b(t,e,n)},e.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){r.W=r.getUid(),d(t)?t(sl(r)):d(t.next)&&t.next(sl(r))})),this.ac(t,e,n)},e.kc=function(t){var e=this;return cl(this,this.h.then((function(){return sl(e)?sl(e).I(t).then((function(t){return{accessToken:t}})):null})))},e.Rc=function(t){var e=this;return this.h.then((function(){return il(e,Qa(e.b,Wa,{token:t}))})).then((function(t){var n=t.user;return _h(n,"isAnonymous",!1),e.ca(n),t}))},e.Sc=function(t,e){var n=this;return this.h.then((function(){return il(n,Qa(n.b,Ka,{email:t,password:e}))}))},e.cc=function(t,e){var n=this;return this.h.then((function(){return il(n,Qa(n.b,Ia,{email:t,password:e}))}))},e.Ya=function(t){var e=this;return this.h.then((function(){return il(e,t.ia(e.b))}))},e.Qc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},e.vb=function(){var t=this;return this.h.then((function(){var e=sl(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return il(t,t.b.vb()).then((function(e){var n=e.user;return _h(n,"isAnonymous",!0),t.ca(n),e}))}))},e.getUid=function(){return sl(this)&&sl(this).uid||null},e.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&sl(this)&&mh(sl(this))},e.Nc=function(t){var e=this;G(this.m,(function(n){n==t&&e.s--})),0>this.s&&(this.s=0),0==this.s&&sl(this)&&gh(sl(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.m.push(t),cl(this,this.h.then((function(){e.l||K(e.m,t)&&t(al(e))})))},e.removeAuthTokenListener=function(t){Y(this.m,(function(e){return e==t}))},e.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Wh("local"),t.a,this.oa),this.a&&(Oc(this.a,this),Fc(this.a.b)),Promise.resolve()},e.fc=function(t){return cl(this,function(t,e){return Qa(t,Ea,{identifier:e,continueUri:Dr()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},e.zc=function(t){return!!Do(t)},e.sb=function(t,e){var n=this;return cl(this,ke().then((function(){var t=new ki(e);if(!t.c)throw new A("argument-error",Di+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},e.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},e.jb=function(t,e){return cl(this,this.b.jb(t,e).then((function(){})))},e.Pa=function(t){return cl(this,this.b.Pa(t).then((function(t){return new ii(t)})))},e.fb=function(t){return cl(this,this.b.fb(t).then((function(){})))},e.rb=function(t,e){var n=this;return cl(this,ke().then((function(){return void 0===e||pt(e)?{}:Ui(new ki(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},e.Uc=function(t,e){return cl(this,Wc(this,t,e,I(this.Ya,this)))},e.Tc=function(t,e){var n=this;return cl(this,ke().then((function(){var r=e||ur(),i=Oo(t,r);if(!(r=Do(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new A("tenant-id-mismatch");return n.Ya(i)})))},hl.prototype.render=function(){},hl.prototype.reset=function(){},hl.prototype.getResponse=function(){},hl.prototype.execute=function(){};var fl=null;function pl(t,e){return(e=dl(e))&&t.a[e]||null}function dl(t){return(t=void 0===t?1e12:t)?t.toString():null}function vl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function yl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function ml(){}function gl(){}ll.prototype.render=function(t,e){return this.a[this.b.toString()]=new vl(t,e),this.b++},ll.prototype.reset=function(t){var e=pl(this,t);t=dl(t),e&&t&&(e.delete(),delete this.a[t])},ll.prototype.getResponse=function(t){return(t=pl(this,t))?t.getResponse():null},ll.prototype.execute=function(t){(t=pl(this,t))&&t.execute()},vl.prototype.getResponse=function(){return yl(this),this.b},vl.prototype.execute=function(){yl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},vl.prototype.delete=function(){yl(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},Kr(ml,"FACTOR_ID","phone"),gl.prototype.g=function(){return fl||(fl=new ll),ke(fl)},gl.prototype.c=function(){};var wl=null;function bl(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Il=new gt(It,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),El=new Vr(3e4,6e4);bl.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),El.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete u[e.a]},ke(Fs(At(Il,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},bl.prototype.c=function(){this.b--};var Tl=null;function Nl(t,e,n,r,i,o,s){if(Kr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s?(wl||(wl=new gl),s=wl):(Tl||(Tl=new bl),s=Tl),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[kl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[_l],!u.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ks(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var c=this.a[Al];this.a[Al]=function(t){if(Ol(a,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=kr(c,u);"function"==typeof e&&e(t)}};var h=this.a[Sl];this.a[Sl]=function(){if(Ol(a,null),"function"==typeof h)h();else if("string"==typeof h){var t=kr(h,u);"function"==typeof t&&t()}}}var Al="callback",Sl="expired-callback",kl="sitekey",_l="size";function Ol(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Dl(t,e){return t.h.push(e),e.ma((function(){J(t.h,e)})),e}function Cl(t){if(t.D)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Rl(t,e,n){var i=!1;try{this.b=n||r.a.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ea()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}s=r.a.SDK_VERSION?Ar(r.a.SDK_VERSION,s):null,Nl.call(this,n,t,e,(function(){try{var t=o.b.auth().ja()}catch(e){t=null}return t}),s,C(k),i)}function xl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Pl.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Pl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(e=Nl.prototype).Ga=function(){var t=this;return this.f?this.f:this.f=Dl(this,ke().then((function(){if(Dr()&&!gr())return vr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,Qa(t.s,La,{})})).then((function(e){t.a[kl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},e.render=function(){Cl(this);var t=this;return Dl(this,this.Ga().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!oe&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Bt(s.name),'"'),s.type){o.push(' type="',Bt(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=fe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ae(o,s)),2<r.length&&le(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){Cl(this);var t=this;return Dl(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},e.reset=function(){Cl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Cl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},N(Rl,Nl);var Pl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ll(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Ml(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Ul(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function jl(t,e){return{name:t||"",J:"a function",optional:!!e,K:d}}function Vl(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Fl(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ia||!n)}}}function ql(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&d(t.Fa)}function Bl(t){return v(t)&&"string"==typeof t.uid}function Gl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!d(t.verify))}}}function Hl(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function zl(t,e){for(var n in e){var r=e[n].name;t[r]=Jl(r,t[n],e[n].j)}}function Wl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){xl(t,[n],[r],!0),this[e]=r}),r,n,e[n].gb),enumerable:!0})}}function Kl(t,e,n,r){t[e]=Jl(e,n,r)}function Jl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return xl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}zl($h.prototype,{fb:{name:"applyActionCode",j:[Ll("code")]},Pa:{name:"checkActionCode",j:[Ll("code")]},jb:{name:"confirmPasswordReset",j:[Ll("code"),Ll("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Ll("email"),Ll("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Ll("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Ll("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Hl(Ul(),jl(),"nextOrObserver"),jl("opt_error",!0),jl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Hl(Ul(),jl(),"nextOrObserver"),jl("opt_error",!0),jl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Ll("email"),Hl(Ul("opt_actionCodeSettings",!0),Vl(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Ll("email"),Ul("actionCodeSettings")]},tb:{name:"setPersistence",j:[Ll("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Fl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Fl()]},Rc:{name:"signInWithCustomToken",j:[Ll("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Ll("email"),Ll("password")]},Tc:{name:"signInWithEmailLink",j:[Ll("email"),Ll("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Hl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof fh)}},Vl(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ll(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Ll("code")]}}),Wl($h.prototype,{lc:{name:"languageCode",gb:Hl(Ll(),Vl(),"languageCode")},ti:{name:"tenantId",gb:Hl(Ll(),Vl(),"tenantId")}}),$h.Persistence=Ku,$h.Persistence.LOCAL="local",$h.Persistence.SESSION="session",$h.Persistence.NONE="none",zl(fh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Ml("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ml("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Fl()]},mb:{name:"linkWithCredential",j:[Fl()]},Bc:{name:"linkWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Fl()]},pb:{name:"reauthenticateWithCredential",j:[Fl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Hl(Ul("opt_actionCodeSettings",!0),Vl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ll(null,!0)]},ad:{name:"unlink",j:[Ll("provider")]},xb:{name:"updateEmail",j:[Ll("email")]},yb:{name:"updatePassword",j:[Ll("password")]},cd:{name:"updatePhoneNumber",j:[Fl("phone")]},zb:{name:"updateProfile",j:[Ul("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Ll("email"),Hl(Ul("opt_actionCodeSettings",!0),Vl(null,!0),"opt_actionCodeSettings",!0)]}}),zl(ll.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zl(hl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zl(be.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Wl(Hc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Ml("appVerificationDisabledForTesting")}}),zl(zc.prototype,{confirm:{name:"confirm",j:[Ll("verificationCode")]}}),Kl(so,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[po,ko,Ro,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Hl(Ll(),Ul(),"json")]),Kl(_o,"credential",(function(t,e){return new So(t,e)}),[Ll("email"),Ll("password")]),zl(So.prototype,{v:{name:"toJSON",j:[Ll(null,!0)]}}),zl(go.prototype,{Aa:{name:"addScope",j:[Ll("scope")]},Ia:{name:"setCustomParameters",j:[Ul("customOAuthParameters")]}}),Kl(go,"credential",wo,[Hl(Ll(),Ul(),"token")]),Kl(_o,"credentialWithLink",Oo,[Ll("email"),Ll("emailLink")]),zl(bo.prototype,{Aa:{name:"addScope",j:[Ll("scope")]},Ia:{name:"setCustomParameters",j:[Ul("customOAuthParameters")]}}),Kl(bo,"credential",Io,[Hl(Ll(),Ul(),"token")]),zl(Eo.prototype,{Aa:{name:"addScope",j:[Ll("scope")]},Ia:{name:"setCustomParameters",j:[Ul("customOAuthParameters")]}}),Kl(Eo,"credential",To,[Hl(Ll(),Hl(Ul(),Vl()),"idToken"),Hl(Ll(),Vl(),"accessToken",!0)]),zl(No.prototype,{Ia:{name:"setCustomParameters",j:[Ul("customOAuthParameters")]}}),Kl(No,"credential",Ao,[Hl(Ll(),Ul(),"token"),Ll("secret",!0)]),zl(mo.prototype,{Aa:{name:"addScope",j:[Ll("scope")]},credential:{name:"credential",j:[Hl(Ll(),Hl(Ul(),Vl()),"optionsOrIdToken"),Hl(Ll(),Vl(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Ul("customOAuthParameters")]}}),zl(lo.prototype,{v:{name:"toJSON",j:[Ll(null,!0)]}}),zl(uo.prototype,{v:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(Po,"credential",Lo,[Ll("verificationId"),Ll("verificationCode")]),zl(Po.prototype,{cb:{name:"verifyPhoneNumber",j:[Hl(Ll(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?ql(t.session,io)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?ql(t.session,oo)&&Bl(t.multiFactorHint):t.session&&t.multiFactorUid?ql(t.session,oo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Gl()]}}),zl(Co.prototype,{v:{name:"toJSON",j:[Ll(null,!0)]}}),zl(A.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),zl(Ho.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),zl(Go.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),zl($c.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),zl(Jc.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),zl(rh.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}},Ll("displayName",!0)]},$c:{name:"unenroll",j:[Hl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Bl},Ll(),"multiFactorInfoIdentifier")]}}),zl(Rl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Kl(gi,"parseLink",Si,[Ll("link")]),Kl(ml,"assertion",(function(t){return new eh(t)}),[Fl("phone")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:si,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:oi,VERIFY_AND_CHANGE_EMAIL:ai,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:$h,AuthCredential:so,Error:A};Kl(t,"EmailAuthProvider",_o,[]),Kl(t,"FacebookAuthProvider",go,[]),Kl(t,"GithubAuthProvider",bo,[]),Kl(t,"GoogleAuthProvider",Eo,[]),Kl(t,"TwitterAuthProvider",No,[]),Kl(t,"OAuthProvider",mo,[Ll("providerId")]),Kl(t,"SAMLAuthProvider",yo,[Ll("providerId")]),Kl(t,"PhoneAuthProvider",Po,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof $h)}}]),Kl(t,"RecaptchaVerifier",Rl,[Hl(Ll(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ul("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof r.a.app.App)}}]),Kl(t,"ActionCodeURL",gi,[]),Kl(t,"PhoneMultiFactorGenerator",ml,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new $h(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.kc,t),addAuthTokenListener:I(t.bc,t),removeAuthTokenListener:I(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.14.1"),r.a.INTERNAL.extendNamespace({User:fh})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(3))},function(t,e,n){(function(t,e){!function(n){"use strict";try{(function(){n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o,s,a,u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function c(t,e,n,r){return new(n=n||Promise)((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function p(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=v[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,f(["["+i+"]  "+t.name+":"],n))}}(a=s=s||{})[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT",s.DEBUG,s.VERBOSE,s.INFO,s.WARN,s.ERROR,s.SILENT;var d=s.INFO,v=((o={})[s.DEBUG]="log",o[s.VERBOSE]="log",o[s.INFO]="info",o[s.WARN]="warn",o[s.ERROR]="error",o),y=(Object.defineProperty(m.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),m.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,s.DEBUG],t)),this._logHandler.apply(this,f([this,s.DEBUG],t))},m.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,s.VERBOSE],t)),this._logHandler.apply(this,f([this,s.VERBOSE],t))},m.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,s.INFO],t)),this._logHandler.apply(this,f([this,s.INFO],t))},m.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,s.WARN],t)),this._logHandler.apply(this,f([this,s.WARN],t))},m.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,f([this,s.ERROR],t)),this._logHandler.apply(this,f([this,s.ERROR],t))},m);function m(t){this.name=t,this._logLevel=d,this._logHandler=p,this._userLogHandler=null}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w,b=(i(I,w=Error),I);function I(t,e){var n=w.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,I.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,E.prototype.create),n}var E=(T.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(N,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new b(i,a),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},T);function T(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var N=/\{\$([^}]+)}/g,A=(S.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},S.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},S.prototype.setServiceProps=function(t){return this.serviceProps=t,this},S);function S(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var k,_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},O=O||{},D=_;function C(t){return"string"==typeof t}function R(t){return"number"==typeof t}function x(t,e){t=t.split("."),e=e||D;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function P(){}function L(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function M(t){return"array"==L(t)}function U(t){var e=L(t);return"array"==e||"object"==e&&"number"==typeof t.length}function j(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var V="closure_uid_"+(1e9*Math.random()>>>0),F=0;function q(t,e,n){return t.call.apply(t.bind,arguments)}function B(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function G(t,e,n){return(G=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?q:B).apply(null,arguments)}function H(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var z=Date.now||function(){return+new Date};function W(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,(t.prototype.constructor=t).yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function K(){this.j=this.j,this.i=this.i}K.prototype.j=!1,K.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[V]||(this[V]=++F))},K.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var J=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(C(t))return C(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Y=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=C(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function X(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Q(t){return/^[\s\xa0]*$/.test(t)}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function et(t,e){return-1!=t.indexOf(e)}function nt(t,e){return t<e?-1:e<t?1:0}t:{var rt=D.navigator;if(rt){var it=rt.userAgent;if(it){Z=it;break t}}Z=""}function ot(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function st(t){var e,n={};for(e in t)n[e]=t[e];return n}var at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<at.length;o++)n=at[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ct(t){return ct[" "](t),t}ct[" "]=P;var ht,lt,ft=et(Z,"Opera"),pt=et(Z,"Trident")||et(Z,"MSIE"),dt=et(Z,"Edge"),vt=dt||pt,yt=et(Z,"Gecko")&&!(et(Z.toLowerCase(),"webkit")&&!et(Z,"Edge"))&&!(et(Z,"Trident")||et(Z,"MSIE"))&&!et(Z,"Edge"),mt=et(Z.toLowerCase(),"webkit")&&!et(Z,"Edge");function gt(){var t=D.document;return t?t.documentMode:void 0}t:{var wt="",bt=(lt=Z,yt?/rv:([^\);]+)(\)|;)/.exec(lt):dt?/Edge\/([\d\.]+)/.exec(lt):pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(lt):mt?/WebKit\/(\S+)/.exec(lt):ft?/(?:Version)[ \/]?(\S+)/.exec(lt):void 0);if(bt&&(wt=bt?bt[1]:""),pt){var It=gt();if(null!=It&&It>parseFloat(wt)){ht=String(It);break t}}ht=wt}var Et,Tt={};function Nt(t){return function(e,n){var r=Tt;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=function(){for(var e=0,n=tt(String(ht)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=nt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||nt(0==s[2].length,0==a[2].length)||nt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}()}(t)}var At=D.document;Et=At&&pt?gt()||("CSS1Compat"==At.compatMode?parseInt(ht,10):5):void 0;var St=!pt||9<=Number(Et),kt=pt&&!Nt("9"),_t=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{D.addEventListener("test",P,e),D.removeEventListener("test",P,e)}catch(t){}return t}();function Ot(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function Dt(t,e){if(Ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(yt){t:{try{ct(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=C(t.pointerType)?t.pointerType:Ct[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Ot.prototype.b=function(){this.Ia=!1},W(Dt,Ot);var Ct={2:"touch",3:"pen",4:"mouse"};Dt.prototype.b=function(){Dt.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,kt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Rt="closure_listenable_"+(1e6*Math.random()|0),xt=0;function Pt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++xt,this.X=this.Z=!1}function Lt(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Mt(t){this.src=t,this.a={},this.b=0}function Ut(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=J(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Lt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function jt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Mt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=jt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Pt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Vt="closure_lm_"+(1e6*Math.random()|0),Ft={};function qt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(M(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Yt(r),e&&e[Rt]?e.Aa(n,r,j(i)?!!i.capture:!!i,o):Bt(e,n,r,!0,i,o)}(t,e,n,r,i);if(M(e)){for(var o=0;o<e.length;o++)qt(t,e[o],n,r,i);return null}return n=Yt(n),t&&t[Rt]?t.za(e,n,j(r)?!!r.capture:!!r,i):Bt(t,e,n,!1,r,i)}function Bt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=j(i)?!!i.capture:!!i;if(s&&!St)return null;var a=Kt(t);if(a||(t[Vt]=a=new Mt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Wt,e=St?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)_t||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ht(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Gt(t){if(!R(t)&&t&&!t.X){var e=t.src;if(e&&e[Rt])Ut(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ht(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Kt(e))?(Ut(n,t),0==n.b&&(n.src=null,e[Vt]=null)):Lt(t)}}}function Ht(t){return t in Ft?Ft[t]:Ft[t]="on"+t}function zt(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Gt(t),n.call(r,e)}function Wt(t,e){return!!t.X||zt(t,St?new Dt(e,this):e=new Dt(e||x("window.event"),this))}function Kt(t){return(t=t[Vt])instanceof Mt?t:null}var Jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yt(t){return"function"==L(t)?t:(t[Jt]||(t[Jt]=function(e){return t.handleEvent(e)}),t[Jt])}function Xt(){K.call(this),this.c=new Mt(this),(this.J=this).B=null}function $t(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&Ut(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}W(Xt,K),Xt.prototype[Rt]=!0,(k=Xt.prototype).addEventListener=function(t,e,n,r){qt(this,t,e,n,r)},k.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(M(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=j(i)?!!i.capture:!!i,r=Yt(r),e&&e[Rt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=jt(s=e.a[n],r,i,o))&&(Lt(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Kt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=jt(n,r,i,o)),(r=-1<e?n[e]:null)&&Gt(r))}(this,t,e,n,r)},k.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(C(t))t=new Ot(t,n);else if(t instanceof Ot)t.target=t.target||n;else{var i=t;ut(t=new Ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=$t(s,r,!0,t)&&i}if(i=$t(s=t.a=n,r,!0,t)&&i,i=$t(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=$t(s=t.a=e[o],r,!1,t)&&i;return i},k.G=function(){if(Xt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Lt(n[r]);delete e.a[t],e.b--}}this.B=null},k.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},k.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Qt=D.JSON.stringify;function Zt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function te(){this.b=this.a=null}Zt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var ee,ne=new Zt((function(){return new re}),(function(t){t.reset()}));function re(){this.next=this.b=this.a=null}function ie(t){D.setTimeout((function(){throw t}),0)}function oe(t,e){ee||function(){var t=D.Promise.resolve(void 0);ee=function(){t.then(ue)}}(),se||(ee(),se=!0),ae.add(t,e)}te.prototype.add=function(t,e){var n=ne.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},re.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var se=!(re.prototype.reset=function(){this.next=this.b=this.a=null}),ae=new te;function ue(){for(var t;r=n=void 0,r=null,(n=ae).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){ie(t)}var e=ne;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;se=!1}function ce(t,e){Xt.call(this),this.b=t||1,this.a=e||D,this.f=G(this.gb,this),this.g=z()}function he(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function le(t,e,n){if("function"==L(t))n&&(t=G(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=G(t.handleEvent,t)}return 2147483647<Number(e)?-1:D.setTimeout(t,e||0)}function fe(t,e,n){K.call(this),this.f=null!=n?G(t,n):t,this.c=e,this.b=G(this.$a,this),this.a=[]}function pe(t){t.U=le(t.b,t.c),t.f.apply(null,t.a)}function de(t){K.call(this),this.b=t,this.a={}}W(ce,Xt),(k=ce.prototype).ba=!1,k.L=null,k.gb=function(){if(this.ba){var t=z()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(he(this),this.start()))}},k.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=z())},k.G=function(){ce.N.G.call(this),he(this),delete this.a},W(fe,K),(k=fe.prototype).ea=!1,k.U=null,k.Ta=function(t){this.a=arguments,this.U?this.ea=!0:pe(this)},k.G=function(){fe.N.G.call(this),this.U&&(D.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},k.$a=function(){this.U=null,this.ea&&(this.ea=!1,pe(this))},W(de,K);var ve=[];function ye(t,e,n,r){M(n)||(n&&(ve[0]=n.toString()),n=ve);for(var i=0;i<n.length;i++){var o=qt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function me(t){ot(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Gt(t)}),t),t.a={}}function ge(){}de.prototype.G=function(){de.N.G.call(this),me(this)},de.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=new Xt;function be(t){Ot.call(this,"serverreachability",t)}function Ie(t){we.dispatchEvent(new be(we,t))}function Ee(t){Ot.call(this,"statevent",t)}function Te(t){we.dispatchEvent(new Ee(we,t))}function Ne(t){Ot.call(this,"timingevent",t)}function Ae(t,e){if("function"!=L(t))throw Error("Fn must not be null and must be a function");return D.setTimeout((function(){t()}),e)}W(be,Ot),W(Ee,Ot),W(Ne,Ot);var Se={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},ke={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function _e(){}function Oe(t){var e;return(e=t.a)||(e=t.a={}),e}function De(){}_e.prototype.a=null;var Ce,Re={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function xe(){Ot.call(this,"d")}function Pe(){Ot.call(this,"c")}function Le(){}function Me(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new de(this),this.O=Ue,t=vt?125:void 0,this.P=new ce(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}W(xe,Ot),W(Pe,Ot),W(Le,_e),Ce=new Le;var Ue=45e3,je={},Ve={};function Fe(t,e,n){t.F=1,t.f=fn(on(e)),t.l=n,t.H=!0,Be(t,null)}function qe(t,e,n,r){t.F=1,t.f=fn(on(e)),t.l=null,t.H=n,Be(t,r)}function Be(t,e){t.v=z(),ze(t),t.D=on(t.f),ln(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new fe(G(t.Ja,t,t.a),t.J)),ye(t.I,t.a,"readystatechange",t.cb),e=t.h?st(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Ie(1)}function Ge(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=He(t,n);if(i==Ve){4==e&&(t.c=4,Te(14),r=!1);break}if(i==je){t.c=4,Te(15),r=!1;break}Xe(t,i)}4==e&&0==n.length&&(t.c=1,Te(16),r=!1),t.b=t.b&&r,r||(Ye(t),Je(t))}function He(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?Ve:(n=Number(e.substring(n,r)),isNaN(n)?je:(r+=1)+n>e.length?Ve:(e=e.substr(r,n),t.A=r+n,e))}function ze(t){t.R=z()+t.O,We(t,t.O)}function We(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=Ae(G(t.ab,t),e)}function Ke(t){t.i&&(D.clearTimeout(t.i),t.i=null)}function Je(t){t.g.Ca()||t.m||t.g.na(t)}function Ye(t){Ke(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,he(t.P),me(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Xe(t,e){try{t.g.Fa(t,e),Ie(4)}catch(t){}}function $e(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(U(t)||C(t))Y(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(U(t)||C(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(C(t))return t.split("");if(U(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Qe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qe)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ze(t,e){en(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&tn(t))}function tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];en(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)en(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function en(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(k=Me.prototype).setTimeout=function(t){this.O=t},k.cb=function(t){t=t.target;var e=this.B;e&&3==ir(t)?e.Ta():this.Ja(t)},k.Ja=function(t){try{if(t==this.a)t:{var e=ir(this.a),n=this.a.ya(),r=this.a.T();if(!(e<3||3==e&&!vt&&!this.a.aa())){this.m||4!=e||7==n||Ie(8==n||r<=0?3:2),Ke(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=or(this.a,"X-HTTP-Initial-Response");if(s&&!Q(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,Te(12),Ye(this),Je(this);break t}this.s=!0,Xe(this,a)}this.H?(Ge(this,e,o),vt&&this.b&&3==e&&(ye(this.I,this.P,"tick",this.bb),this.P.start())):Xe(this,o),4==e&&Ye(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,ze(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Te(12)):(this.c=0,Te(13)),Ye(this),Je(this)}}}catch(t){}},k.bb=function(){if(this.a){var t=ir(this.a),e=this.a.aa();this.A<e.length&&(Ke(this),Ge(this,t,e),this.b&&4!=t&&ze(this))}},k.cancel=function(){this.m=!0,Ye(this)},k.ab=function(){this.i=null;var t=z();0<=t-this.R?(2!=this.F&&(Ie(3),Te(17)),Ye(this),this.c=2,Je(this)):We(this,this.R-t)},(k=Qe.prototype).C=function(){tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},k.K=function(){return tn(this),this.a.concat()},k.get=function(t,e){return en(this.b,t)?this.b[t]:e},k.set=function(t,e){en(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},k.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rn(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof rn?(this.h=void 0!==e?e:t.h,sn(this,t.f),this.j=t.j,an(this,t.b),un(this,t.i),this.a=t.a,cn(this,Sn(t.c)),this.g=t.g):t&&(n=String(t).match(nn))?(this.h=!!e,sn(this,n[1]||"",!0),this.j=pn(n[2]||""),an(this,n[3]||"",!0),un(this,n[4]),this.a=pn(n[5]||"",!0),cn(this,n[6]||"",!0),this.g=pn(n[7]||"")):(this.h=!!e,this.c=new In(null,this.h))}function on(t){return new rn(t)}function sn(t,e,n){t.f=n?pn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function an(t,e,n){t.b=n?pn(e,!0):e}function un(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function cn(t,e,n){e instanceof In?(t.c=e,function(t,e){e&&!t.f&&(En(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Tn(this,e),An(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=dn(e,wn)),t.c=new In(e,t.h))}function hn(t,e,n){t.c.set(e,n)}function ln(t,e,n){M(n)||(n=[String(n)]),An(t.c,e,n)}function fn(t){return hn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^z()).toString(36)),t}function pn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function dn(t,e,n){return C(t)?(t=encodeURI(t).replace(e,vn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function vn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(dn(e,yn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(dn(e,yn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(dn(n,"/"==n.charAt(0)?gn:mn,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",dn(n,bn)),t.join("")},rn.prototype.resolve=function(t){var e=on(this),n=!!t.f;n?sn(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?an(e,t.b):n=null!=t.i;var r=t.a;if(n)un(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(et(i,"./")||et(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?cn(e,Sn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var yn=/[#\/\?@]/g,mn=/[#\?:]/g,gn=/[#\?]/g,wn=/[#\?@]/g,bn=/#/g;function In(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function En(t){t.a||(t.a=new Qe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Tn(t,e){En(t),e=kn(t,e),en(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ze(t.a,e))}function Nn(t,e){return En(t),e=kn(t,e),en(t.a.b,e)}function An(t,e,n){Tn(t,e),0<n.length&&(t.c=null,t.a.set(kn(t,e),$(n)),t.b+=n.length)}function Sn(t){var e=new In;return e.c=t.c,t.a&&(e.a=new Qe(t.a),e.b=t.b),e}function kn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function _n(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function On(t){var e=t.a.F.a;if(null!=e)Te(4),e?(Te(10),mr(t.a,t,!1)):(Te(11),mr(t.a,t,!0));else{t.b=new Me(t,void 0,void 0),t.b.h=t.h,e=Er(e=t.a,e.Y()?t.f:null,t.i),Te(4),ln(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&hn(e,n,r),qe(t.b,e,!1,t.f)}}function Dn(){this.a=this.b=null}function Cn(){this.a=new Qe}function Rn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[V]||(t[V]=++F)):e.charAt(0)+t}function xn(t,e){this.b=t,this.a=e}function Pn(t){this.g=t||Ln,t=D.PerformanceNavigationTiming?0<(t=D.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(D.ka&&D.ka.Da&&D.ka.Da()&&D.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Cn),this.b=null,this.c=[]}(k=In.prototype).add=function(t,e){En(this),this.c=null,t=kn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},k.forEach=function(t,e){En(this),this.a.forEach((function(n,r){Y(n,(function(n){t.call(e,n,r,this)}),this)}),this)},k.K=function(){En(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},k.C=function(t){En(this);var e=[];if(C(t))Nn(this,t)&&(e=X(e,this.a.get(kn(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},k.set=function(t,e){return En(this),this.c=null,Nn(this,t=kn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},k.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},k.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},W((function(){}),(function(){})),(k=_n.prototype).M=null,k.$=function(t){return this.a.$(t)},k.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},k.Ca=function(){return!1},k.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=or(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=or(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void br(e,2)}this.f=r[0]}else(e=this.a).m=this.c,br(e,2)}else 1==this.M&&(this.g?Te(6):"11111"==e?(Te(5),this.g=!0,(!pt||10<=Number(Et))&&(this.c=200,this.b.cancel(),Te(11),mr(this.a,this,!0))):(Te(7),this.g=!1))},k.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,On(this)):1==this.M&&(this.g?(Te(11),mr(this.a,this,!0)):(Te(10),mr(this.a,this,!1)));else{0==this.M?Te(8):1==this.M&&Te(9);var t=this.a;t.m=this.c,br(t,2)}},k.Y=function(){return this.a.Y()},k.ma=function(){return this.a.ma()},Cn.prototype.add=function(t){this.a.set(Rn(t),t)},Cn.prototype.C=function(){return this.a.C()};var Ln=10;function Mn(t,e){!t.a&&(et(e,"spdy")||et(e,"quic")||et(e,"h2"))&&(t.f=t.g,t.a=new Cn,t.b&&(Fn(t,t.b),t.b=null))}function Un(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function jn(t){return t.b?1:t.a?t.a.a.c:0}function Vn(t,e){return t.b?t.b==e:!!t.a&&(e=Rn(e),en(t.a.a.b,e))}function Fn(t,e){t.a?t.a.add(e):t.b=e}function qn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=Rn(e),n=en(t.a.a.b,n)),n&&Ze(t.a.a,Rn(e)))}function Bn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return $(t.c);var e=t.c;return Y(t.a.C(),(function(t){e=e.concat(t.j)})),e}function Gn(){}function Hn(){this.a=new Gn}function zn(t,e,n){var r=n||"";try{$e(t,(function(t,n){var i=t;j(t)&&(i=Qt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Wn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Pn.prototype.cancel=function(){this.c=Bn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(Y(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},Gn.prototype.stringify=function(t){return D.JSON.stringify(t,void 0)},Gn.prototype.parse=function(t){return D.JSON.parse(t,void 0)};var Kn=D.JSON.parse;function Jn(t){Xt.call(this),this.headers=new Qe,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Yn,this.D=this.F=!1}W(Jn,Xt);var Yn="",Xn=/^https?$/i,$n=["POST","PUT"];function Qn(t){return"content-type"==t.toLowerCase()}function Zn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,tr(t),nr(t)}function tr(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function er(t){if(t.b&&void 0!==O&&(!t.s[1]||4!=ir(t)||2!=t.T()))if(t.l&&4==ir(t))le(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==ir(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(nn)[1]||null;if(!o&&D.self&&D.self.location){var s=D.self.location.protocol;o=s.substr(0,s.length-1)}i=!Xn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<ir(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.T()+"]",tr(t)}}finally{nr(t)}}}function nr(t,e){if(t.a){rr(t);var n=t.a,r=t.s[0]?P:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function rr(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(D.clearTimeout(t.m),t.m=null)}function ir(t){return t.a?t.a.readyState:0}function or(t,e){return t.a?t.a.getResponseHeader(e):null}function sr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return ot(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),C(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return hn(t,e,n),t}function ar(t){this.f=[],this.F=new Dn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!x("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=x("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=x("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=x("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=x("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Pn(t&&t.concurrentRequestLimit),this.ja=new Hn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function ur(t){if(cr(t),3==t.u){var e=t.P++,n=on(t.B);hn(n,"SID",t.H),hn(n,"RID",e),hn(n,"TYPE","terminate"),pr(t,n),(e=new Me(t,e,void 0)).F=2,e.f=fn(on(n)),n=!1,D.navigator&&D.navigator.sendBeacon&&(n=D.navigator.sendBeacon(e.f.toString(),"")),!n&&D.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=z(),ze(e)}Ir(t)}function cr(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(D.clearTimeout(t.l),t.l=null),gr(t),t.b.cancel(),t.h&&(R(t.h)&&D.clearTimeout(t.h),t.h=null)}function hr(t,e){t.f.push(new xn(t.Qa++,e)),3==t.u&&lr(t)}function lr(t){Un(t.b)||t.h||(t.h=!0,oe(t.Ha,t),t.A=0)}function fr(t,e){var n;n=e?e.W:t.P++;var r=on(t.B);hn(r,"SID",t.H),hn(r,"RID",n),hn(r,"AID",t.O),pr(t,r),t.g&&t.i&&sr(r,t.g,t.i),n=new Me(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=dr(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),Fn(t.b,n),Fe(n,r,e)}function pr(t,e){t.c&&$e({},(function(t,n){hn(e,n,t)}))}function dr(t,e,n){n=Math.min(t.f.length,n);var r=t.c?G(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{zn(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function vr(t){t.a||t.l||(t.S=1,oe(t.Ga,t),t.v=0)}function yr(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=Ae(G(t.Ga,t),wr(t,t.v)),t.v++,0))}function mr(t,e,n){var r=e.l;r&&Mn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Er(t,null,t.ha),lr(t)}function gr(t){null!=t.s&&(D.clearTimeout(t.s),t.s=null)}function wr(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function br(t,e){if(2==e){var n=null;t.c&&(n=null);var r=G(t.eb,t);n||(n=new rn("//www.google.com/images/cleardot.gif"),D.location&&"http"==D.location.protocol||sn(n,"https"),fn(n)),function(t,e){var n=new ge;if(D.Image){var r=new Image;r.onload=H(Wn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=H(Wn,n,r,"TestLoadImage: error",!1,e),r.onabort=H(Wn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=H(Wn,n,r,"TestLoadImage: timeout",!1,e),D.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Te(2);t.u=0,t.c&&t.c.ta(e),Ir(t),cr(t)}function Ir(t){t.u=0,t.m=-1,t.c&&(0==Bn(t.b).length&&0==t.f.length||(t.b.c.length=0,$(t.f),t.f.length=0),t.c.sa())}function Er(t,e,n){var r=function(t){return t instanceof rn?on(t):new rn(t,void 0)}(n);if(""!=r.b)e&&an(r,e+"."+r.b),un(r,r.i);else{var i,o=D.location;i=e?e+"."+o.hostname:o.hostname,r=function(t,e,n,r){var i=new rn(null,void 0);return t&&sn(i,t),e&&an(i,e),n&&un(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return t.V&&ot(t.V,(function(t,e){hn(r,e,t)})),e=t.j,n=t.I,e&&n&&hn(r,e,n),hn(r,"VER",t.wa),pr(t,r),r}function Tr(){}function Nr(){if(pt&&!(10<=Number(Et)))throw Error("Environmental error: no available transport.")}function Ar(t,e){Xt.call(this),this.a=new ar(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!Q(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Q(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new _r(this)}function Sr(t){xe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function kr(){Pe.call(this),this.status=1}function _r(t){this.a=t}(k=Jn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Oe(this.H):Oe(Ce),this.a.onreadystatechange=G(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Zn(this,t)}t=n||"";var i=new Qe(this.headers);r&&$e(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Qn,n=t.length,r=C(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:C(t)?t.charAt(e):t[e]}(i.K()),n=D.FormData&&t instanceof D.FormData,0<=J($n,e)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{rr(this),0<this.o&&((this.D=function(t){return pt&&Nt(9)&&R(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=G(this.Ba,this)):this.m=le(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Zn(this,t)}},k.Ba=function(){void 0!==O&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},k.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),nr(this))},k.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),nr(this,!0)),Jn.N.G.call(this)},k.Ea=function(){this.j||(this.w||this.l||this.g?er(this):this.Za())},k.Za=function(){er(this)},k.T=function(){try{return 2<ir(this)?this.a.status:-1}catch(t){return-1}},k.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},k.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Kn(e)}},k.ya=function(){return this.h},k.Xa=function(){return C(this.f)?this.f:String(this.f)},(k=ar.prototype).wa=8,k.u=1,k.Ca=function(){return 0==this.u},k.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new Me(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?ut(r=st(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&C(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=dr(this,n,e),hn(i=on(this.B),"RID",t),hn(i,"CVER",22),this.o&&this.j&&hn(i,"X-HTTP-Session-Id",this.j),pr(this,i),this.g&&r&&sr(i,this.g,r),Fn(this.b,n),this.W?(hn(i,"$req",e),hn(i,"SID","null"),n.S=!0,Fe(n,i,null)):Fe(n,i,e),this.u=2}}else 3==this.u&&(t?fr(this,t):0==this.f.length||Un(this.b)||fr(this))},k.Ga=function(){this.l=null,this.a=new Me(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=on(this.pa);hn(t,"RID","rpc"),hn(t,"SID",this.H),hn(t,"CI",this.ia?"0":"1"),hn(t,"AID",this.O),pr(this,t),hn(t,"TYPE","xmlhttp"),this.g&&this.i&&sr(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),qe(this.a,t,!0,this.ga)},k.Fa=function(t,e){if(0!=this.u&&(this.a==t||Vn(this.b,t)))if(this.m=t.o,!t.s&&Vn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(M(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;gr(this),this.a.cancel(),this.a=null}yr(this),Te(18)}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=Ae(G(this.Ya,this),6e3));if(jn(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else br(this,11)}else if(!t.s&&this.a!=t||gr(this),!Q(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&R(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=or(r,"X-Client-Wire-Protocol"))&&Mn(this.b,i),this.j&&(r=or(r,"X-HTTP-Session-Id")))&&(this.I=r,hn(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Er(this,this.Y()?this.ga:null,this.ha),r.s?(qn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ke(r),ze(r)),this.a=r):vr(this),0<this.f.length&&lr(this)}else"stop"!=r[0]&&"close"!=r[0]||br(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?br(this,7):ur(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},k.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,yr(this),Te(19))},k.na=function(t){var e=null;if(this.a==t){gr(this),this.a=null;var n=2}else{if(!Vn(this.b,t))return;e=t.j,qn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=z()-t.v,we.dispatchEvent(new Ne(we,t.l?t.l.length:0,e,this.A)),lr(this)):vr(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(jn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=Ae(G(t.Ha,t,e),wr(t,t.A)),t.A++,0)))}(this,t)||2==n&&yr(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:br(this,5);break;case 4:br(this,10);break;case 3:br(this,6);break;default:br(this,2)}}},k.eb=function(t){Te(t?2:1)},k.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Jn(this.Ka)).F=this.R,t},k.ma=function(){return!!this.c&&!0},k.Y=function(){return this.R},(k=Tr.prototype).va=function(){},k.ua=function(){},k.ta=function(){},k.sa=function(){},k.Sa=function(){},Nr.prototype.a=function(t,e){return new Ar(t,e)},W(Ar,Xt),(k=Ar.prototype).addEventListener=function(t,e,n,r){Ar.N.addEventListener.call(this,t,e,n,r)},k.removeEventListener=function(t,e,n,r){Ar.N.removeEventListener.call(this,t,e,n,r)},k.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Te(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new _n(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=sr(e,t.g,t.i)),(t=t.w).i=n,e=Er(t.a,null,t.i),Te(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,On(t)):(ln(e,"MODE","init"),!t.a.o&&t.a.j&&ln(e,"X-HTTP-Session-Id",t.a.j),t.b=new Me(t,void 0,void 0),t.b.h=t.h,qe(t.b,e,!1,null),t.M=0)},k.close=function(){ur(this.a)},k.Wa=function(t){if(C(t)){var e={};e.__data__=t,hr(this.a,e)}else this.h?((e={}).__data__=Qt(t),hr(this.a,e)):hr(this.a,t)},k.G=function(){this.a.c=null,delete this.f,ur(this.a),delete this.a,Ar.N.G.call(this)},W(Sr,xe),W(kr,Pe),W(_r,Tr),_r.prototype.va=function(){this.a.dispatchEvent("a")},_r.prototype.ua=function(t){this.a.dispatchEvent(new Sr(t))},_r.prototype.ta=function(t){this.a.dispatchEvent(new kr(t))},_r.prototype.sa=function(){this.a.dispatchEvent("b")};var Or=H((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),Nr);function Dr(t,e){this.user=e,this.type="OAuth",this.o={},this.o.Authorization="Bearer "+t}Nr.prototype.createWebChannel=Nr.prototype.a,Ar.prototype.send=Ar.prototype.Wa,Ar.prototype.open=Ar.prototype.Va,Ar.prototype.close=Ar.prototype.close,Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,ke.COMPLETE="complete",(De.EventType=Re).OPEN="a",Re.CLOSE="b",Re.ERROR="c",Re.MESSAGE="d",Xt.prototype.listen=Xt.prototype.za,Jn.prototype.listenOnce=Jn.prototype.Aa,Jn.prototype.getLastError=Jn.prototype.Xa,Jn.prototype.getLastErrorCode=Jn.prototype.ya,Jn.prototype.getStatus=Jn.prototype.T,Jn.prototype.getResponseJson=Jn.prototype.Ua,Jn.prototype.getResponseText=Jn.prototype.aa,Jn.prototype.send=Jn.prototype.ca;var Cr,Rr={createWebChannelTransport:Or,ErrorCode:Se,EventType:ke,WebChannel:De,XhrIo:Jn},xr=Rr.createWebChannelTransport,Pr=Rr.ErrorCode,Lr=Rr.EventType,Mr=Rr.WebChannel,Ur=Rr.XhrIo,jr=n.SDK_VERSION,Vr=($r.prototype.t=function(){return null!=this.uid},$r.prototype.i=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},$r.prototype.isEqual=function(t){return t.uid===this.uid},$r.UNAUTHENTICATED=new $r(null),$r.u=new $r("google-credentials-uid"),$r.s=new $r("first-party-uid"),$r),Fr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qr=(i(Xr,Cr=Error),Xr),Br=(Yr.prototype.getToken=function(){return Promise.resolve(null)},Yr.prototype.l=function(){},Yr.prototype.v=function(t){Su(!this.h,"Can only call setChangeListener() once."),(this.h=t)(Vr.UNAUTHENTICATED)},Yr.prototype.m=function(){Su(null!==this.h,"removeChangeListener() when no listener registered"),this.h=null},Yr),Gr=(Jr.prototype.getToken=function(){var t=this;Su(null!=this.g,"getToken cannot be called after listener removed.");var e=this._,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t._!==e)throw new qr(Fr.ABORTED,"getToken aborted due to token change.");return n?(Su("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Dr(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},Jr.prototype.l=function(){this.forceRefresh=!0},Jr.prototype.v=function(t){Su(!this.h,"Can only call setChangeListener() once."),this.h=t,this.p&&t(this.currentUser)},Jr.prototype.m=function(){Su(null!=this.g,"removeChangeListener() called twice"),Su(null!==this.h,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.g),this.g=null,this.h=null},Jr.prototype.I=function(){var t=this.auth&&this.auth.getUid();return Su(null===t||"string"==typeof t,"Received invalid UID: "+t),new Vr(t)},Jr),Hr=(Object.defineProperty(Kr.prototype,"o",{get:function(){var t={"X-Goog-AuthUser":this.D},e=this.T.auth.R([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),Kr),zr=(Wr.prototype.getToken=function(){return Promise.resolve(new Hr(this.T,this.D))},Wr.prototype.v=function(t){t(Vr.s)},Wr.prototype.m=function(){},Wr.prototype.l=function(){},Wr);function Wr(t,e){this.T=t,this.D=e}function Kr(t,e){this.T=t,this.D=e,this.type="FirstParty",this.user=Vr.s}function Jr(t){var e=this;this.g=null,this.currentUser=Vr.UNAUTHENTICATED,this.p=!1,this._=0,this.h=null,this.forceRefresh=!1,this.g=function(){e._++,e.currentUser=e.I(),e.p=!0,e.h&&e.h(e.currentUser)},this._=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.g):(this.g(null),t.get().then((function(t){e.auth=t,e.g&&e.auth.addAuthTokenListener(e.g)}),(function(){})))}function Yr(){this.h=null}function Xr(t,e){var n=Cr.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function $r(t){this.uid=t}function Qr(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new qr(Fr.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function Zr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ti(t,e){return void 0!==t?t:e}function ei(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function ni(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ri(t){for(var e in Su(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ii(t,e){if(0!==e.length)throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Ii(e.length,"argument")+".")}function oi(t,e,n){if(e.length!==n)throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() requires "+Ii(n,"argument")+", but was called with "+Ii(e.length,"argument")+".")}function si(t,e,n){if(e.length<n)throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Ii(n,"argument")+", but was called with "+Ii(e.length,"argument")+".")}function ai(t,e,n,r){if(e.length<n||e.length>r)throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Ii(e.length,"argument")+".")}function ui(t,e,n,r){pi(t,e,bi(n)+" argument",r)}function ci(t,e,n,r){void 0!==r&&ui(t,e,n,r)}function hi(t,e,n,r){pi(t,e,n+" option",r)}function li(t,e,n,r){void 0!==r&&hi(t,e,n,r)}function fi(t,e,n,r,i){void 0!==r&&function(t,e,n,r){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(vi(u))}var c=vi(r);throw new qr(Fr.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r)}function pi(t,e,n,r){if(!("object"===e?di(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=vi(r);throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function di(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function vi(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Au("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}function yi(t,e,n){if(void 0===n)throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+bi(e)+" argument, but it was undefined.")}function mi(t,e,n){ni(e,(function(e,r){if(n.indexOf(e)<0)throw new qr(Fr.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function gi(t,e,n,r){var i=vi(r);return new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() requires its "+bi(n)+" argument to be a "+e+", but it was: "+i)}function wi(t,e,n){if(n<=0)throw new qr(Fr.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+bi(e)+" argument to be a positive number, but it was: "+n+".")}function bi(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Ii(t,e){return t+" "+e+(1===t?"":"s")}var Ei=(Ti.fromBase64String=function(t){return new Ti(yu.C().atob(t))},Ti.fromUint8Array=function(t){return new Ti(Ni(t))},Ti.prototype.toBase64=function(){return yu.C().btoa(this.A)},Ti.prototype.toUint8Array=function(){return Ai(this.A)},Ti.prototype.P=function(){return 2*this.A.length},Ti.prototype.isEqual=function(t){return this.A===t.A},Ti.k=new Ti(""),Ti);function Ti(t){this.A=t}function Ni(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function Ai(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function Si(){if("undefined"==typeof Uint8Array)throw new qr(Fr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ki(){if(!yu.C().N)throw new qr(Fr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var _i,Oi,Di=(eo.fromBase64String=function(t){oi("Blob.fromBase64String",arguments,1),ui("Blob.fromBase64String","string",1,t),ki();try{return new eo(yu.C().atob(t))}catch(t){throw new qr(Fr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},eo.fromUint8Array=function(t){if(oi("Blob.fromUint8Array",arguments,1),Si(),!(t instanceof Uint8Array))throw gi("Blob.fromUint8Array","Uint8Array",1,t);return new eo(Ni(t))},eo.prototype.toBase64=function(){return oi("Blob.toBase64",arguments,0),ki(),yu.C().btoa(this.A)},eo.prototype.toUint8Array=function(){return oi("Blob.toUint8Array",arguments,0),Si(),Ai(this.A)},eo.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},eo.prototype.isEqual=function(t){return this.A===t.A},eo.prototype.O=function(){return 2*this.A.length},eo.prototype.F=function(t){return Ou(this.A,t.A)},eo),Ci=Qr(Di,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Ri=(Object.defineProperty(to.prototype,"latitude",{get:function(){return this.V},enumerable:!0,configurable:!0}),Object.defineProperty(to.prototype,"longitude",{get:function(){return this.U},enumerable:!0,configurable:!0}),to.prototype.isEqual=function(t){return this.V===t.V&&this.U===t.U},to.prototype.F=function(t){return Ou(this.V,t.V)||Ou(this.U,t.U)},to),xi=(Zi.now=function(){return Zi.fromMillis(Date.now())},Zi.fromDate=function(t){return Zi.fromMillis(t.getTime())},Zi.fromMillis=function(t){var e=Math.floor(t/1e3);return new Zi(e,1e6*(t-1e3*e))},Zi.prototype.toDate=function(){return new Date(this.toMillis())},Zi.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Zi.prototype.F=function(t){return this.seconds===t.seconds?Ou(this.nanoseconds,t.nanoseconds):Ou(this.seconds,t.seconds)},Zi.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Zi.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Zi.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Zi),Pi=(Qi.j=function(t){var e=Math.floor(t/1e6);return new Qi(new xi(e,t%1e6*1e3))},Qi.L=function(t){return new Qi(t)},Qi.q=function(){return Qi.MIN},Qi.prototype.B=function(t){return this.timestamp.F(t.timestamp)},Qi.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Qi.prototype.M=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Qi.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Qi.prototype.G=function(){return this.timestamp},Qi.MIN=new Qi(new xi(0,0)),Qi),Li=(Object.defineProperty($i.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),$i.prototype.isEqual=function(t){return 0===$i.W(this,t)},$i.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof $i?t.forEach((function(t){e.push(t)})):e.push(t),this.K(e)},$i.prototype.limit=function(){return this.offset+this.length},$i.prototype.H=function(t){return t=void 0===t?1:t,Su(this.length>=t,"Can't call popFirst() with less segments"),this.K(this.segments,this.offset+t,this.length-t)},$i.prototype.J=function(){return Su(!this.Y(),"Can't call popLast() on empty path"),this.K(this.segments,this.offset,this.length-1)},$i.prototype.X=function(){return Su(!this.Y(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},$i.prototype.$=function(){return this.get(this.length-1)},$i.prototype.get=function(t){return Su(t<this.length,"Index out of range"),this.segments[this.offset+t]},$i.prototype.Y=function(){return 0===this.length},$i.prototype.Z=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},$i.prototype.tt=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},$i.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},$i.prototype.nt=function(){return this.segments.slice(this.offset,this.limit())},$i.W=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},$i),Mi=(i(Xi,Oi=Li),Xi.prototype.K=function(t,e,n){return new Xi(t,e,n)},Xi.prototype.it=function(){return this.nt().join("/")},Xi.prototype.toString=function(){return this.it()},Xi.et=function(t){if(0<=t.indexOf("//"))throw new qr(Fr.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Xi(t.split("/").filter((function(t){return 0<t.length})))},Xi.rt=new Xi([]),Xi),Ui=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ji=(i(Yi,_i=Li),Yi.prototype.K=function(t,e,n){return new Yi(t,e,n)},Yi.ut=function(t){return Ui.test(t)},Yi.prototype.it=function(){return this.nt().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Yi.ut(t)||(t="`"+t+"`"),t})).join(".")},Yi.prototype.toString=function(){return this.it()},Yi.prototype.st=function(){return 1===this.length&&"__name__"===this.get(0)},Yi.ot=function(){return new Yi(["__name__"])},Yi.ht=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new qr(Fr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new qr(Fr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new qr(Fr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new qr(Fr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yi(e)},Yi.rt=new Yi([]),Yi),Vi=(Ji.prototype.at=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ji.prototype.isEqual=function(t){return null!==t&&0===Mi.W(this.path,t.path)},Ji.prototype.toString=function(){return this.path.toString()},Ji.W=function(t,e){return Mi.W(t.path,e.path)},Ji.ct=function(t){return t.length%2==0},Ji.ft=function(t){return new Ji(new Mi(t.slice()))},Ji.lt=function(t){return new Ji(Mi.et(t))},Ji.EMPTY=new Ji(new Mi([])),Ji),Fi=(Ki.prototype.dt=function(t,e){return new Ki(this.W,this.root.dt(t,e,this.W).copy(null,null,Bi.vt,null,null))},Ki.prototype.remove=function(t){return new Ki(this.W,this.root.remove(t,this.W).copy(null,null,Bi.vt,null,null))},Ki.prototype.get=function(t){for(var e=this.root;!e.Y();){var n=this.W(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Ki.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.Y();){var r=this.W(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Ki.prototype.Y=function(){return this.root.Y()},Object.defineProperty(Ki.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Ki.prototype.wt=function(){return this.root.wt()},Ki.prototype.gt=function(){return this.root.gt()},Ki.prototype.bt=function(t){return this.root.bt(t)},Ki.prototype.forEach=function(t){this.bt((function(e,n){return t(e,n),!1}))},Ki.prototype.toString=function(){var t=[];return this.bt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},Ki.prototype.pt=function(t){return this.root.pt(t)},Ki.prototype.yt=function(){return new qi(this.root,null,this.W,!1)},Ki.prototype._t=function(t){return new qi(this.root,t,this.W,!1)},Ki.prototype.It=function(){return new qi(this.root,null,this.W,!0)},Ki.prototype.Tt=function(t){return new qi(this.root,t,this.W,!0)},Ki),qi=(Wi.prototype.Rt=function(){Su(0<this.Dt.length,"getNext() called on iterator when hasNext() is false.");var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.Y();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.Y();)this.Dt.push(t),t=t.left;return e},Wi.prototype.St=function(){return 0<this.Dt.length},Wi.prototype.At=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},Wi),Bi=(zi.prototype.copy=function(t,e,n,r,i){return new zi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},zi.prototype.Y=function(){return!1},zi.prototype.bt=function(t){return this.left.bt(t)||t(this.key,this.value)||this.right.bt(t)},zi.prototype.pt=function(t){return this.right.pt(t)||t(this.key,this.value)||this.left.pt(t)},zi.prototype.min=function(){return this.left.Y()?this:this.left.min()},zi.prototype.wt=function(){return this.min().key},zi.prototype.gt=function(){return this.right.Y()?this.key:this.right.gt()},zi.prototype.dt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.dt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.dt(t,e,n))).Ct()},zi.prototype.Pt=function(){if(this.left.Y())return zi.EMPTY;var t=this;return t.left.kt()||t.left.left.kt()||(t=t.Nt()),(t=t.copy(null,null,null,t.left.Pt(),null)).Ct()},zi.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.Y()||r.left.kt()||r.left.left.kt()||(r=r.Nt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.kt()&&(r=r.Ot()),r.right.Y()||r.right.kt()||r.right.left.kt()||(r=r.Ft()),0===e(t,r.key)){if(r.right.Y())return zi.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Pt())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Ct()},zi.prototype.kt=function(){return this.color},zi.prototype.Ct=function(){var t=this;return t.right.kt()&&!t.left.kt()&&(t=t.Vt()),t.left.kt()&&t.left.left.kt()&&(t=t.Ot()),t.left.kt()&&t.right.kt()&&(t=t.Ut()),t},zi.prototype.Nt=function(){var t=this.Ut();return t.right.left.kt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Ot())).Vt()).Ut()),t},zi.prototype.Ft=function(){var t=this.Ut();return t.left.left.kt()&&(t=(t=t.Ot()).Ut()),t},zi.prototype.Vt=function(){var t=this.copy(null,null,zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},zi.prototype.Ot=function(){var t=this.copy(null,null,zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},zi.prototype.Ut=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},zi.prototype.xt=function(){var t=this.jt();return Math.pow(2,t)<=this.size+1},zi.prototype.jt=function(){if(this.kt()&&this.left.kt())throw Au("Red node has red child("+this.key+","+this.value+")");if(this.right.kt())throw Au("Right child of ("+this.key+","+this.value+") is red");var t=this.left.jt();if(t!==this.right.jt())throw Au("Black depths differ");return t+(this.kt()?0:1)},zi.EMPTY=null,zi.RED=!0,zi.vt=!1,zi),Gi=(Object.defineProperty(Hi.prototype,"key",{get:function(){throw Au("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Hi.prototype,"value",{get:function(){throw Au("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Hi.prototype,"color",{get:function(){throw Au("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Hi.prototype,"left",{get:function(){throw Au("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Hi.prototype,"right",{get:function(){throw Au("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Hi.prototype.copy=function(t,e,n,r,i){return this},Hi.prototype.dt=function(t,e,n){return new Bi(t,e)},Hi.prototype.remove=function(t,e){return this},Hi.prototype.Y=function(){return!0},Hi.prototype.bt=function(t){return!1},Hi.prototype.pt=function(t){return!1},Hi.prototype.wt=function(){return null},Hi.prototype.gt=function(){return null},Hi.prototype.kt=function(){return!1},Hi.prototype.xt=function(){return!0},Hi.prototype.jt=function(){return 0},Hi);function Hi(){this.size=0}function zi(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:zi.RED,this.left=null!=r?r:zi.EMPTY,this.right=null!=i?i:zi.EMPTY,this.size=this.left.size+1+this.right.size}function Wi(t,e,n,r){this.Et=r,this.Dt=[];for(var i=1;!t.Y();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.Et?t.right:t.left}}function Ki(t,e){this.W=t,this.root=e||Bi.EMPTY}function Ji(t){this.path=t,Su(Ji.ct(t),"Invalid DocumentKey with an odd number of segments: "+t.nt().join("/"))}function Yi(){return null!==_i&&_i.apply(this,arguments)||this}function Xi(){return null!==Oi&&Oi.apply(this,arguments)||this}function $i(t,e,n){void 0===e?e=0:e>t.length&&Au("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&Au("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}function Qi(t){this.timestamp=t}function Zi(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new qr(Fr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new qr(Fr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new qr(Fr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new qr(Fr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function to(t,e){if(oi("GeoPoint",arguments,2),ui("GeoPoint","number",1,t),ui("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new qr(Fr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new qr(Fr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.V=t,this.U=e}function eo(t){ki(),this.A=t}Bi.EMPTY=new Gi;var no=(po.Lt=function(t){var e=new po(t.W);return t.forEach((function(t){e=e.add(t)})),e},po.prototype.has=function(t){return null!==this.data.get(t)},po.prototype.first=function(){return this.data.wt()},po.prototype.last=function(){return this.data.gt()},Object.defineProperty(po.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),po.prototype.indexOf=function(t){return this.data.indexOf(t)},po.prototype.forEach=function(t){this.data.bt((function(e,n){return t(e),!1}))},po.prototype.qt=function(t,e){for(var n=this.data._t(t[0]);n.St();){var r=n.Rt();if(0<=this.W(r.key,t[1]))return;e(r.key)}},po.prototype.Bt=function(t,e){var n;for(n=void 0!==e?this.data._t(e):this.data.yt();n.St();)if(!t(n.Rt().key))return},po.prototype.Mt=function(t){var e=this.data._t(t);return e.St()?e.Rt().key:null},po.prototype.yt=function(){return new ro(this.data.yt())},po.prototype._t=function(t){return new ro(this.data._t(t))},po.prototype.add=function(t){return this.copy(this.data.remove(t).dt(t,!0))},po.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},po.prototype.Y=function(){return this.data.Y()},po.prototype.Qt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},po.prototype.isEqual=function(t){if(!(t instanceof po))return!1;if(this.size!==t.size)return!1;for(var e=this.data.yt(),n=t.data.yt();e.St();){var r=e.Rt().key,i=n.Rt().key;if(0!==this.W(r,i))return!1}return!0},po.prototype.nt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},po.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},po.prototype.copy=function(t){var e=new po(this.W);return e.data=t,e},po),ro=(fo.prototype.Rt=function(){return this.Gt.Rt().key},fo.prototype.St=function(){return this.Gt.St()},fo),io=(lo.prototype.Wt=function(t,e){return new ms(e,t)},lo.prototype.zt=function(t,e){return e},lo.prototype.Kt=function(t){return null},lo.prototype.isEqual=function(t){return t instanceof lo},lo.instance=new lo,lo),oo=(ho.prototype.Wt=function(t,e){return this.apply(t)},ho.prototype.zt=function(t,e){return this.apply(t)},ho.prototype.apply=function(t){for(var e=vo(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ts(e)},ho.prototype.Kt=function(t){return null},ho.prototype.isEqual=function(t){return t instanceof ho&&Du(t.elements,this.elements)},ho),so=(co.prototype.Wt=function(t,e){return this.apply(t)},co.prototype.zt=function(t,e){return this.apply(t)},co.prototype.apply=function(t){for(var e=vo(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ts(e)},co.prototype.Kt=function(t){return null},co.prototype.isEqual=function(t){return t instanceof co&&Du(t.elements,this.elements)},co),ao=(uo.prototype.Wt=function(t,e){var n=this.Kt(t);if(n instanceof ps&&this.Ht instanceof ps){var r=n.Jt+this.Ht.Jt;return new ps(r)}return r=n.Jt+this.Ht.Jt,new ds(r)},uo.prototype.zt=function(t,e){return Su(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},uo.prototype.Kt=function(t){return t instanceof jo?t:new ps(0)},uo.prototype.isEqual=function(t){return t instanceof uo&&this.Ht.isEqual(t.Ht)},uo);function uo(t){this.Ht=t}function co(t){this.elements=t}function ho(t){this.elements=t}function lo(){}function fo(t){this.Gt=t}function po(t){this.W=t,this.data=new Fi(this.W)}function vo(t){return t instanceof Ts?t.Jt.slice():[]}function yo(t,e){this.version=t,this.transformResults=e}var mo,go,wo,bo,Io,Eo,To,No,Ao=(Qo.Yt=function(t){return new Qo(t)},Qo.Xt=function(t){var e=new no(ji.W);return t.forEach((function(t){return e=e.add(t)})),new Qo(e)},Qo.prototype.$t=function(t){var e=!1;return this.fields.forEach((function(n){n.Z(t)&&(e=!0)})),e},Qo.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},Qo),So=($o.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},$o),ko=(Xo.exists=function(t){return new Xo(void 0,t)},Xo.updateTime=function(t){return new Xo(t)},Object.defineProperty(Xo.prototype,"Zt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Xo.prototype.tn=function(t){return void 0!==this.updateTime?t instanceof As&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof As:(Su(this.Zt,"Precondition should be empty"),!0)},Xo.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,!((null!=e?!n||!e.isEqual(n):e!==n)||this.exists!==t.exists);var e,n},Xo.NONE=new Xo,Xo),_o=(Yo.prototype.nn=function(t){null!=t&&Su(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Yo.in=function(t){return t instanceof As?t.version:Pi.MIN},Yo),Oo=(i(Jo,No=_o),Jo.prototype.zt=function(t,e){this.nn(t),Su(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new As(this.key,n,{hasCommittedMutations:!0},this.value)},Jo.prototype.Wt=function(t,e,n){if(this.nn(t),!this.en.tn(t))return t;var r=_o.in(t);return new As(this.key,r,{rn:!0},this.value)},Jo.prototype.un=function(t){return null},Jo.prototype.isEqual=function(t){return t instanceof Jo&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.en.isEqual(t.en)},Jo),Do=(i(Ko,To=_o),Ko.prototype.zt=function(t,e){if(this.nn(t),Su(null==e.transformResults,"Transform results received by PatchMutation."),!this.en.tn(t))return new ks(this.key,e.version);var n=this.on(t);return new As(this.key,e.version,{hasCommittedMutations:!0},n)},Ko.prototype.Wt=function(t,e,n){if(this.nn(t),!this.en.tn(t))return t;var r=_o.in(t),i=this.on(t);return new As(this.key,r,{rn:!0},i)},Ko.prototype.un=function(t){return null},Ko.prototype.isEqual=function(t){return t instanceof Ko&&this.key.isEqual(t.key)&&this.sn.isEqual(t.sn)&&this.en.isEqual(t.en)},Ko.prototype.on=function(t){var e;return e=t instanceof As?t.data():Is.EMPTY,this.hn(e)},Ko.prototype.hn=function(t){var e=this,n=t.cn();return this.sn.fields.forEach((function(t){if(!t.Y()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.an()},Ko),Co=(i(Wo,Eo=_o),Wo.prototype.zt=function(t,e){if(this.nn(t),Su(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.en.tn(t))return new ks(this.key,e.version);var n=this.fn(t),r=this.ln(t,e.transformResults),i=e.version,o=this.dn(n.data(),r);return new As(this.key,i,{hasCommittedMutations:!0},o)},Wo.prototype.Wt=function(t,e,n){if(this.nn(t),!this.en.tn(t))return t;var r=this.fn(t),i=this.vn(n,t,e),o=this.dn(r.data(),i);return new As(this.key,r.version,{rn:!0},o)},Wo.prototype.un=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof As?t.field(i.field):void 0,s=i.transform.Kt(o||null);null!=s&&(e=null==e?Is.wn().set(i.field,s):e.set(i.field,s))}return e?e.an():null},Wo.prototype.isEqual=function(t){return t instanceof Wo&&this.key.isEqual(t.key)&&Du(this.fieldTransforms,t.fieldTransforms)&&this.en.isEqual(t.en)},Wo.prototype.fn=function(t){return Su(t instanceof As,"Unknown MaybeDocument type "+t),Su(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},Wo.prototype.ln=function(t,e){var n=[];Su(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof As&&(s=t.field(i.field)),n.push(o.zt(s,e[r]))}return n},Wo.prototype.vn=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof As&&(u=e.field(s.field)),null===u&&n instanceof As&&(u=n.field(s.field)),r.push(a.Wt(u,t))}return r},Wo.prototype.dn=function(t,e){Su(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=t.cn(),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.an()},Wo),Ro=(i(zo,Io=_o),zo.prototype.zt=function(t,e){return this.nn(t),Su(null==e.transformResults,"Transform results received by DeleteMutation."),new Ss(this.key,e.version,{hasCommittedMutations:!0})},zo.prototype.Wt=function(t,e,n){return this.nn(t),this.en.tn(t)?(t&&Su(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Ss(this.key,Pi.q())):t},zo.prototype.un=function(t){return null},zo.prototype.isEqual=function(t){return t instanceof zo&&this.key.isEqual(t.key)&&this.en.isEqual(t.en)},zo),xo=(i(Ho,bo=_o),Ho.prototype.zt=function(t,e){Au("VerifyMutation should only be used in Transactions.")},Ho.prototype.Wt=function(t,e,n){Au("VerifyMutation should only be used in Transactions.")},Ho.prototype.un=function(t){Au("VerifyMutation should only be used in Transactions.")},Ho.prototype.isEqual=function(t){return t instanceof Ho&&this.key.isEqual(t.key)&&this.en.isEqual(t.en)},Ho),Po=(Go.gn=function(t,e){switch(t.serverTimestamps){case"estimate":return new Go(1,e);case"previous":return new Go(2,e);case"none":case void 0:return new Go(0,e);default:return Au("fromSnapshotOptions() called with invalid options.")}},Go),Lo=(Bo.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},Bo.prototype.bn=function(t){return Su(this.pn!==t.pn,"Default compareTo should not be used for values of same type."),Ou(this.pn,t.pn)},Bo),Mo=(i(qo,wo=Lo),qo.prototype.value=function(t){return null},qo.prototype.isEqual=function(t){return t instanceof qo},qo.prototype.B=function(t){return t instanceof qo?0:this.bn(t)},qo.prototype.P=function(){return 4},qo.yn=new qo,qo),Uo=(i(Fo,go=Lo),Fo.prototype.value=function(t){return this.Jt},Fo.prototype.isEqual=function(t){return t instanceof Fo&&this.Jt===t.Jt},Fo.prototype.B=function(t){return t instanceof Fo?Ou(this.Jt,t.Jt):this.bn(t)},Fo.prototype.P=function(){return 4},Fo.of=function(t){return t?Fo._n:Fo.In},Fo._n=new Fo(!0),Fo.In=new Fo(!1),Fo),jo=(i(Vo,mo=Lo),Vo.prototype.value=function(t){return this.Jt},Vo.prototype.B=function(t){return t instanceof Vo?(e=this.Jt)<(n=t.Jt)?-1:n<e?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1:this.bn(t);var e,n},Vo.prototype.P=function(){return 8},Vo);function Vo(t){var e=mo.call(this)||this;return e.Jt=t,e.pn=2,e}function Fo(t){var e=go.call(this)||this;return e.Jt=t,e.pn=1,e}function qo(){var t=wo.call(this)||this;return t.pn=0,t.Jt=null,t}function Bo(){}function Go(t,e){this.mn=t,this.timestampsInSnapshots=e}function Ho(t,e){var n=bo.call(this)||this;return n.key=t,n.en=e,n.type=4,n}function zo(t,e){var n=Io.call(this)||this;return n.key=t,n.en=e,n.type=3,n}function Wo(t,e){var n=Eo.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=2,n.en=ko.exists(!0),n}function Ko(t,e,n,r){var i=To.call(this)||this;return i.key=t,i.data=e,i.sn=n,i.en=r,i.type=1,i}function Jo(t,e,n){var r=No.call(this)||this;return r.key=t,r.value=e,r.en=n,r.type=0,r}function Yo(){}function Xo(t,e){this.updateTime=t,this.exists=e,Su(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}function $o(t,e){this.field=t,this.transform=e}function Qo(t){this.fields=t}function Zo(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var ts,es,ns,rs,is,os,ss,as,us,cs,hs,ls,fs,ps=(i(Bs,fs=jo),Bs.prototype.isEqual=function(t){return t instanceof Bs&&Zo(this.Jt,t.Jt)},Bs),ds=(i(qs,ls=jo),qs.prototype.isEqual=function(t){return t instanceof qs&&Zo(this.Jt,t.Jt)},qs.Tn=new qs(NaN),qs.POSITIVE_INFINITY=new qs(1/0),qs.NEGATIVE_INFINITY=new qs(-1/0),qs),vs=(i(Fs,hs=Lo),Fs.prototype.value=function(t){return this.Jt},Fs.prototype.isEqual=function(t){return t instanceof Fs&&this.Jt===t.Jt},Fs.prototype.B=function(t){return t instanceof Fs?Ou(this.Jt,t.Jt):this.bn(t)},Fs.prototype.P=function(){return 2*this.Jt.length},Fs),ys=(i(Vs,cs=Lo),Vs.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Jt:this.Jt.toDate()},Vs.prototype.isEqual=function(t){return t instanceof Vs&&this.Jt.isEqual(t.Jt)},Vs.prototype.B=function(t){return t instanceof Vs?this.Jt.F(t.Jt):t instanceof ms?-1:this.bn(t)},Vs.prototype.P=function(){return 16},Vs),ms=(i(js,us=Lo),js.prototype.value=function(t){return t&&1===t.mn?new ys(this.En).value(t):t&&2===t.mn&&this.previousValue?this.previousValue.value(t):null},js.prototype.isEqual=function(t){return t instanceof js&&this.En.isEqual(t.En)},js.prototype.B=function(t){return t instanceof js?this.En.F(t.En):t instanceof ys?1:this.bn(t)},js.prototype.toString=function(){return"<ServerTimestamp localTime="+this.En.toString()+">"},js.prototype.P=function(){return 16+(this.previousValue?this.previousValue.P():0)},js),gs=(i(Us,as=Lo),Us.prototype.value=function(t){return this.Jt},Us.prototype.isEqual=function(t){return t instanceof Us&&this.Jt.isEqual(t.Jt)},Us.prototype.B=function(t){return t instanceof Us?this.Jt.F(t.Jt):this.bn(t)},Us.prototype.P=function(){return this.Jt.O()},Us),ws=(i(Ms,ss=Lo),Ms.prototype.value=function(t){return this.key},Ms.prototype.isEqual=function(t){return t instanceof Ms&&this.key.isEqual(t.key)&&this.Dn.isEqual(t.Dn)},Ms.prototype.B=function(t){if(t instanceof Ms){var e=this.Dn.B(t.Dn);return 0!==e?e:Vi.W(this.key,t.key)}return this.bn(t)},Ms.prototype.P=function(){return this.Dn.projectId.length+this.Dn.database.length+this.key.toString().length},Ms),bs=(i(Ls,os=Lo),Ls.prototype.value=function(t){return this.Jt},Ls.prototype.isEqual=function(t){return t instanceof Ls&&this.Jt.isEqual(t.Jt)},Ls.prototype.B=function(t){return t instanceof Ls?this.Jt.F(t.Jt):this.bn(t)},Ls.prototype.P=function(){return 16},Ls),Is=(i(Ps,is=Lo),Ps.wn=function(){return new Es(Ps.EMPTY.Jt)},Ps.prototype.value=function(t){var e={};return this.Jt.bt((function(n,r){e[n]=r.value(t)})),e},Ps.prototype.forEach=function(t){this.Jt.bt(t)},Ps.prototype.isEqual=function(t){if(t instanceof Ps){for(var e=this.Jt.yt(),n=t.Jt.yt();e.St()&&n.St();){var r=e.Rt(),i=n.Rt();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.St()&&!n.St()}return!1},Ps.prototype.B=function(t){if(t instanceof Ps){for(var e=this.Jt.yt(),n=t.Jt.yt();e.St()&&n.St();){var r=e.Rt(),i=n.Rt(),o=Ou(r.key,i.key)||r.value.B(i.value);if(o)return o}return Ou(e.St(),n.St())}return this.bn(t)},Ps.prototype.contains=function(t){return null!==this.field(t)},Ps.prototype.field=function(t){Su(!t.Y(),"Can't get field of empty path");var e=this;return t.forEach((function(t){e=e instanceof Ps?e.Jt.get(t):null})),e},Ps.prototype.sn=function(){var t=new no(ji.W);return this.Jt.forEach((function(e,n){var r=new ji([e]);if(n instanceof Ps){var i=n.sn().fields;i.Y()?t=t.add(r):i.forEach((function(e){t=t.add(r.child(e))}))}else t=t.add(r)})),Ao.Yt(t)},Ps.prototype.P=function(){var t=0;return this.Jt.bt((function(e,n){t+=e.length+n.P()})),t},Ps.prototype.toString=function(){return this.Jt.toString()},Ps.prototype.cn=function(){return new Es(this.Jt)},Ps.EMPTY=new Ps(new Fi(Ou)),Ps),Es=(xs.prototype.set=function(t,e){Su(!t.Y(),"Cannot set field for empty path on ObjectValue");var n=t.X();if(1===t.length)this.Jt=this.Jt.dt(n,e);else{var r=this.Jt.get(n),i=(r instanceof Is?r:Is.EMPTY).cn().set(t.H(),e).an();this.Jt=this.Jt.dt(n,i)}return this},xs.prototype.delete=function(t){Su(!t.Y(),"Cannot delete field for empty path on ObjectValue");var e=t.X();if(1===t.length)this.Jt=this.Jt.remove(e);else{var n=this.Jt.get(e);if(n instanceof Is){var r=n.cn().delete(t.H()).an();this.Jt=this.Jt.dt(t.X(),r)}}return this},xs.prototype.an=function(){return new Is(this.Jt)},xs),Ts=(i(Rs,rs=Lo),Rs.prototype.value=function(t){return this.Jt.map((function(e){return e.value(t)}))},Rs.prototype.contains=function(t){for(var e=0,n=this.Jt;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},Rs.prototype.forEach=function(t){this.Jt.forEach(t)},Rs.prototype.isEqual=function(t){if(t instanceof Rs){if(this.Jt.length!==t.Jt.length)return!1;for(var e=0;e<this.Jt.length;e++)if(!this.Jt[e].isEqual(t.Jt[e]))return!1;return!0}return!1},Rs.prototype.B=function(t){if(t instanceof Rs){for(var e=Math.min(this.Jt.length,t.Jt.length),n=0;n<e;n++){var r=this.Jt[n].B(t.Jt[n]);if(r)return r}return Ou(this.Jt.length,t.Jt.length)}return this.bn(t)},Rs.prototype.P=function(){return this.Jt.reduce((function(t,e){return t+e.P()}),0)},Rs.prototype.toString=function(){return"["+this.Jt.map((function(t){return t.toString()})).join(",")+"]"},Rs),Ns=(Cs.Rn=function(t,e){return Vi.W(t.key,e.key)},Cs),As=(i(Ds,ns=Ns),Ds.prototype.field=function(t){if(this.Sn)return this.Sn.field(t);this.An||(this.An=new Map);var e=t.it(),n=this.An.get(e);if(void 0===n){var r=this.Cn(t);n=void 0===r?null:this.converter(r),this.An.set(e,n)}return n},Ds.prototype.data=function(){var t=this;if(!this.Sn){var e=Is.wn();ni(this.proto.fields||{},(function(n,r){e.set(new ji([n]),t.converter(r))})),this.Sn=e.an(),this.An=void 0}return this.Sn},Ds.prototype.value=function(){return this.data().value()},Ds.prototype.isEqual=function(t){return t instanceof Ds&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.rn===t.rn&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},Ds.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.rn+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Ds.prototype,"hasPendingWrites",{get:function(){return this.rn||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ds.prototype.Cn=function(t){Su(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.X()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},Ds.Pn=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.B(i):Au("Trying to compare documents on fields that don't exist")},Ds),Ss=(i(Os,es=Ns),Os.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Os.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Os.prototype.isEqual=function(t){return t instanceof Os&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Os),ks=(i(_s,ts=Ns),_s.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(_s.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),_s.prototype.isEqual=function(t){return t instanceof _s&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},_s);function _s(){return null!==ts&&ts.apply(this,arguments)||this}function Os(t,e,n){var r=es.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Ds(t,e,n,r,i,o){var s=ns.call(this,t,e)||this;return s.Sn=r,s.proto=i,s.converter=o,Su(void 0!==s.Sn||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.rn=!!n.rn,s.hasCommittedMutations=!!n.hasCommittedMutations,s}function Cs(t,e){this.key=t,this.version=e}function Rs(t){var e=rs.call(this)||this;return e.Jt=t,e.pn=8,e}function xs(t){this.Jt=t}function Ps(t){var e=is.call(this)||this;return e.Jt=t,e.pn=9,e}function Ls(t){var e=os.call(this)||this;return e.Jt=t,e.pn=7,e}function Ms(t,e){var n=ss.call(this)||this;return n.Dn=t,n.key=e,n.pn=6,n}function Us(t){var e=as.call(this)||this;return e.Jt=t,e.pn=5,e}function js(t,e){var n=us.call(this)||this;return n.En=t,n.previousValue=e,n.pn=3,n}function Vs(t){var e=cs.call(this)||this;return e.Jt=t,e.pn=3,e}function Fs(t){var e=hs.call(this)||this;return e.Jt=t,e.pn=4,e}function qs(){return null!==ls&&ls.apply(this,arguments)||this}function Bs(){return null!==fs&&fs.apply(this,arguments)||this}function Gs(t){return null==t}function Hs(t){return-0===t&&1/t==-1/0}function zs(t){return"number"==typeof t&&Number.isInteger(t)&&!Hs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ws,Ks,Js,Ys,Xs,$s,Qs,Zs,ta=(Oa.prototype.canonicalId=function(){if(null===this.kn){var t=this.path.it();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";Gs(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.kn=t}return this.kn},Oa.prototype.toString=function(){var t=this.path.it();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),Gs(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},Oa.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},Oa.prototype.Nn=function(){return Vi.ct(this.path)&&null===this.collectionGroup&&0===this.filters.length},Oa),ea=(_a.jn=function(t){return new _a(t)},Object.defineProperty(_a.prototype,"orderBy",{get:function(){if(null===this.Vn){var t=this.Ln(),e=this.qn();if(null!==t&&null===e)t.st()?this.Vn=[fa]:this.Vn=[new la(t),fa];else{Su(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.Vn=[]),r=0,i=this.On;r<i.length;r++){var o=i[r];this.Vn.push(o),o.field.st()&&(n=!0)}if(!n){var s=0<this.On.length?this.On[this.On.length-1].dir:ca.ASCENDING;this.Vn.push(s===ca.ASCENDING?fa:pa)}}}return this.Vn},enumerable:!0,configurable:!0}),_a.prototype.Bn=function(t){Su(null==this.Ln()||!(t instanceof ra)||!t.Mn()||t.field.isEqual(this.Ln()),"Query must only have one inequality field."),Su(!this.Nn(),"No filtering allowed for document query");var e=this.filters.concat([t]);return new _a(this.path,this.collectionGroup,this.On.slice(),e,this.limit,this.Fn,this.startAt,this.endAt)},_a.prototype.Qn=function(t){Su(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.On.concat([t]);return new _a(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},_a.prototype.Gn=function(t){return new _a(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},_a.prototype.Wn=function(t){return new _a(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},_a.prototype.zn=function(t){return new _a(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,t,this.endAt)},_a.prototype.Kn=function(t){return new _a(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,t)},_a.prototype.Hn=function(t){return new _a(t,null,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},_a.prototype.Jn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.On.length||1===this.On.length&&this.On[0].field.st())},_a.prototype.canonicalId=function(){return this.Yn().canonicalId()+"|lt:"+this.Fn},_a.prototype.toString=function(){return"Query(target="+this.Yn().toString()+"; limitType="+this.Fn+")"},_a.prototype.isEqual=function(t){return this.Yn().isEqual(t.Yn())&&this.Fn===t.Fn},_a.prototype.Xn=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.st()}return Su(n,"orderBy used that doesn't compare on key field"),0},_a.prototype.matches=function(t){return this.$n(t)&&this.Zn(t)&&this.ti(t)&&this.ni(t)},_a.prototype.ii=function(){return!Gs(this.limit)&&"F"===this.Fn},_a.prototype.ei=function(){return!Gs(this.limit)&&"L"===this.Fn},_a.prototype.qn=function(){return 0<this.On.length?this.On[0].field:null},_a.prototype.Ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof ra&&n.Mn())return n.field}return null},_a.prototype.ri=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof ra&&0<=t.indexOf(r.op))return r.op}return null},_a.prototype.Nn=function(){return this.Yn().Nn()},_a.prototype.ui=function(){return null!==this.collectionGroup},_a.prototype.Yn=function(){if(!this.Un)if("F"===this.Fn)this.Un=new ta(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===ca.DESCENDING?ca.ASCENDING:ca.DESCENDING;t.push(new la(r.field,i))}var o=this.endAt?new ha(this.endAt.position,!this.endAt.before):null,s=this.startAt?new ha(this.startAt.position,!this.startAt.before):null;this.Un=new ta(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Un},_a.prototype.$n=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.at(this.collectionGroup)&&this.path.Z(e):Vi.ct(this.path)?this.path.isEqual(e):this.path.tt(e)},_a.prototype.Zn=function(t){for(var e=0,n=this.On;e<n.length;e++){var r=n[e];if(!r.field.st()&&null===t.field(r.field))return!1}return!0},_a.prototype.ti=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},_a.prototype.ni=function(t){return!(this.startAt&&!this.startAt.si(this.orderBy,t)||this.endAt&&this.endAt.si(this.orderBy,t))},_a.prototype.xn=function(t){Su(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},_a),na=(ka.et=function(t){switch(t){case"<":return ka.LESS_THAN;case"<=":return ka.LESS_THAN_OR_EQUAL;case"==":return ka.EQUAL;case">=":return ka.GREATER_THAN_OR_EQUAL;case">":return ka.GREATER_THAN;case"array-contains":return ka.ARRAY_CONTAINS;case"in":return ka.IN;case"array-contains-any":return ka.ARRAY_CONTAINS_ANY;default:return Au("Unknown FieldFilter operator: "+t)}},ka.prototype.toString=function(){return this.name},ka.prototype.isEqual=function(t){return this.name===t.name},ka.LESS_THAN=new ka("<"),ka.LESS_THAN_OR_EQUAL=new ka("<="),ka.EQUAL=new ka("=="),ka.GREATER_THAN=new ka(">"),ka.GREATER_THAN_OR_EQUAL=new ka(">="),ka.ARRAY_CONTAINS=new ka("array-contains"),ka.IN=new ka("in"),ka.ARRAY_CONTAINS_ANY=new ka("array-contains-any"),ka),ra=(i(Sa,Zs=function(){}),Sa.create=function(t,e,n){if(t.st())return e===na.IN?(Su(n instanceof Ts,"Comparing on key with IN, but filter value not an ArrayValue"),Su(n.Jt.every((function(t){return t instanceof ws})),"Comparing on key with IN, but an array value was not a RefValue"),new oa(t,n)):(Su(n instanceof ws,"Comparing on key, but filter value not a RefValue"),Su(e!==na.ARRAY_CONTAINS&&e!==na.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new ia(t,e,n));if(n.isEqual(Mo.yn)){if(e!==na.EQUAL)throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Sa(t,e,n)}if(n.isEqual(ds.Tn)){if(e!==na.EQUAL)throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Sa(t,e,n)}return e===na.ARRAY_CONTAINS?new sa(t,n):e===na.IN?(Su(n instanceof Ts,"IN filter has invalid value: "+n.toString()),new aa(t,n)):e===na.ARRAY_CONTAINS_ANY?(Su(n instanceof Ts,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new ua(t,n)):new Sa(t,e,n)},Sa.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.pn===e.pn&&this.oi(e.B(this.value))},Sa.prototype.oi=function(t){switch(this.op){case na.LESS_THAN:return t<0;case na.LESS_THAN_OR_EQUAL:return t<=0;case na.EQUAL:return 0===t;case na.GREATER_THAN:return 0<t;case na.GREATER_THAN_OR_EQUAL:return 0<=t;default:return Au("Unknown FieldFilter operator: "+this.op)}},Sa.prototype.Mn=function(){return 0<=[na.LESS_THAN,na.LESS_THAN_OR_EQUAL,na.GREATER_THAN,na.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Sa.prototype.canonicalId=function(){return this.field.it()+this.op.toString()+this.value.toString()},Sa.prototype.isEqual=function(t){return t instanceof Sa&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},Sa.prototype.toString=function(){return this.field.it()+" "+this.op+" "+this.value.value()},Sa),ia=(i(Aa,Qs=ra),Aa.prototype.matches=function(t){var e=this.value,n=Vi.W(t.key,e.key);return this.oi(n)},Aa),oa=(i(Na,$s=ra),Na.prototype.matches=function(t){return this.value.Jt.some((function(e){return t.key.isEqual(e.key)}))},Na),sa=(i(Ta,Xs=ra),Ta.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ts&&e.contains(this.value)},Ta),aa=(i(Ea,Ys=ra),Ea.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},Ea),ua=(i(Ia,Js=ra),Ia.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ts&&n.Jt.some((function(t){return e.value.contains(t)}))},Ia),ca=(ba.prototype.toString=function(){return this.name},ba.ASCENDING=new ba("asc"),ba.DESCENDING=new ba("desc"),ba),ha=(wa.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},wa.prototype.si=function(t,e){Su(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.st())Su(o instanceof ws,"Bound has a non-key value where the key path is being used."),n=Vi.W(o.key,e.key);else{var s=e.field(i.field);Su(null!==s,"Field should exist since document matched the orderBy already."),n=o.B(s)}if(i.dir===ca.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},wa.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},wa),la=(ga.prototype.compare=function(t,e){var n=this.hi?As.Rn(t,e):As.Pn(this.field,t,e);switch(this.dir){case ca.ASCENDING:return n;case ca.DESCENDING:return-1*n;default:return Au("Unknown direction: "+this.dir)}},ga.prototype.canonicalId=function(){return this.field.it()+this.dir.toString()},ga.prototype.toString=function(){return this.field.it()+" ("+this.dir+")"},ga.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},ga),fa=new la(ji.ot(),ca.ASCENDING),pa=new la(ji.ot(),ca.DESCENDING),da=(ma.prototype.fi=function(t){return new ma(this.target,this.targetId,this.ci,t,this.ai,this.lastLimboFreeSnapshotVersion,this.resumeToken)},ma.prototype.li=function(t,e){return new ma(this.target,this.targetId,this.ci,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},ma.prototype.di=function(t){return new ma(this.target,this.targetId,this.ci,this.sequenceNumber,this.ai,t,this.resumeToken)},ma.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.ci===t.ci&&this.sequenceNumber===t.sequenceNumber&&this.ai.isEqual(t.ai)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},ma),va=(ya.prototype.isEqual=function(t){return t&&t.count===this.count},ya);function ya(t){this.count=t}function ma(t,e,n,r,i,o,s){void 0===i&&(i=Pi.MIN),void 0===o&&(o=Pi.MIN),void 0===s&&(s=Ei.k),this.target=t,this.targetId=e,this.ci=n,this.sequenceNumber=r,this.ai=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function ga(t,e){this.field=t,void 0===e&&(e=ca.ASCENDING),this.dir=e,this.hi=t.st()}function wa(t,e){this.position=t,this.before=e}function ba(t){this.name=t}function Ia(t,e){var n=Js.call(this,t,na.ARRAY_CONTAINS_ANY,e)||this;return n.value=e,n}function Ea(t,e){var n=Ys.call(this,t,na.IN,e)||this;return n.value=e,n}function Ta(t,e){return Xs.call(this,t,na.ARRAY_CONTAINS,e)||this}function Na(t,e){var n=$s.call(this,t,na.IN,e)||this;return n.value=e,n}function Aa(){return null!==Qs&&Qs.apply(this,arguments)||this}function Sa(t,e,n){var r=Zs.call(this)||this;return r.field=t,r.op=e,r.value=n,r}function ka(t){this.name=t}function _a(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.On=n,this.filters=r,this.limit=i,this.Fn=o,this.startAt=s,this.endAt=a,this.Vn=null,this.Un=null,this.startAt&&this.xn(this.startAt),this.endAt&&this.xn(this.endAt)}function Oa(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.kn=null}function Da(t){switch(t){case Fr.OK:return Au("Treated status OK as error");case Fr.CANCELLED:case Fr.UNKNOWN:case Fr.DEADLINE_EXCEEDED:case Fr.RESOURCE_EXHAUSTED:case Fr.INTERNAL:case Fr.UNAVAILABLE:case Fr.UNAUTHENTICATED:return!1;case Fr.INVALID_ARGUMENT:case Fr.NOT_FOUND:case Fr.ALREADY_EXISTS:case Fr.PERMISSION_DENIED:case Fr.FAILED_PRECONDITION:case Fr.ABORTED:case Fr.OUT_OF_RANGE:case Fr.UNIMPLEMENTED:case Fr.DATA_LOSS:return!0;default:return Au("Unknown status code: "+t)}}function Ca(t){if(void 0===t)return Tu("GRPC error has no .code"),Fr.UNKNOWN;switch(t){case Ws.OK:return Fr.OK;case Ws.CANCELLED:return Fr.CANCELLED;case Ws.UNKNOWN:return Fr.UNKNOWN;case Ws.DEADLINE_EXCEEDED:return Fr.DEADLINE_EXCEEDED;case Ws.RESOURCE_EXHAUSTED:return Fr.RESOURCE_EXHAUSTED;case Ws.INTERNAL:return Fr.INTERNAL;case Ws.UNAVAILABLE:return Fr.UNAVAILABLE;case Ws.UNAUTHENTICATED:return Fr.UNAUTHENTICATED;case Ws.INVALID_ARGUMENT:return Fr.INVALID_ARGUMENT;case Ws.NOT_FOUND:return Fr.NOT_FOUND;case Ws.ALREADY_EXISTS:return Fr.ALREADY_EXISTS;case Ws.PERMISSION_DENIED:return Fr.PERMISSION_DENIED;case Ws.FAILED_PRECONDITION:return Fr.FAILED_PRECONDITION;case Ws.ABORTED:return Fr.ABORTED;case Ws.OUT_OF_RANGE:return Fr.OUT_OF_RANGE;case Ws.UNIMPLEMENTED:return Fr.UNIMPLEMENTED;case Ws.DATA_LOSS:return Fr.DATA_LOSS;default:return Au("Unknown status code: "+t)}}(Ks=Ws=Ws||{})[Ks.OK=0]="OK",Ks[Ks.CANCELLED=1]="CANCELLED",Ks[Ks.UNKNOWN=2]="UNKNOWN",Ks[Ks.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ks[Ks.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ks[Ks.NOT_FOUND=5]="NOT_FOUND",Ks[Ks.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ks[Ks.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ks[Ks.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ks[Ks.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ks[Ks.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ks[Ks.ABORTED=10]="ABORTED",Ks[Ks.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ks[Ks.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ks[Ks.INTERNAL=13]="INTERNAL",Ks[Ks.UNAVAILABLE=14]="UNAVAILABLE",Ks[Ks.DATA_LOSS=15]="DATA_LOSS";var Ra=new Fi(Vi.W);function xa(){return Ra}function Pa(){return xa()}var La=new Fi(Vi.W);function Ma(){return La}var Ua=new Fi(Vi.W);function ja(){return Ua}var Va=new no(Vi.W);function Fa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Va,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var qa=new no(Ou);function Ba(){return qa}function Ga(t,e,n,r){this.Fi=t,this.removedTargetIds=e,this.key=n,this.Vi=r}function Ha(t,e){this.targetId=t,this.Ui=e}function za(t,e,n,r){void 0===n&&(n=Ei.k),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var Wa=(ou.mi=function(t){return new ou(t.W)},ou.prototype.has=function(t){return null!=this.vi.get(t)},ou.prototype.get=function(t){return this.vi.get(t)},ou.prototype.first=function(){return this.wi.wt()},ou.prototype.last=function(){return this.wi.gt()},ou.prototype.Y=function(){return this.wi.Y()},ou.prototype.indexOf=function(t){var e=this.vi.get(t);return e?this.wi.indexOf(e):-1},Object.defineProperty(ou.prototype,"size",{get:function(){return this.wi.size},enumerable:!0,configurable:!0}),ou.prototype.forEach=function(t){this.wi.bt((function(e,n){return t(e),!1}))},ou.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.vi.dt(t.key,t),e.wi.dt(t,null))},ou.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.vi.remove(t),this.wi.remove(e)):this},ou.prototype.isEqual=function(t){if(!(t instanceof ou))return!1;if(this.size!==t.size)return!1;for(var e=this.wi.yt(),n=t.wi.yt();e.St();){var r=e.Rt().key,i=n.Rt().key;if(!r.isEqual(i))return!1}return!0},ou.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},ou.prototype.copy=function(t,e){var n=new ou;return n.W=this.W,n.vi=t,n.wi=e,n},ou),Ka=(iu.prototype.track=function(t){var e=t.doc.key,n=this.gi.get(e);n?0!==t.type&&3===n.type?this.gi=this.gi.dt(e,t):3===t.type&&1!==n.type?this.gi=this.gi.dt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.gi=this.gi.dt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.gi=this.gi.dt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.gi=this.gi.remove(e):1===t.type&&2===n.type?this.gi=this.gi.dt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.gi=this.gi.dt(e,{type:2,doc:t.doc}):Au("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.gi=this.gi.dt(e,t)},iu.prototype.bi=function(){var t=[];return this.gi.bt((function(e,n){t.push(n)})),t},iu),Ja=(ru.Ti=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:0,doc:t})})),new ru(t,e,Wa.mi(e),i,n,r,!0,!1)},Object.defineProperty(ru.prototype,"hasPendingWrites",{get:function(){return!this.yi.Y()},enumerable:!0,configurable:!0}),ru.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this._i===t._i&&this.yi.isEqual(t.yi)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.pi.isEqual(t.pi)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},ru),Ya=(nu.Ai=function(t,e){var n,r=((n={})[t]=Xa.Ci(t,e),n);return new nu(Pi.MIN,r,Ba(),xa(),Fa())},nu),Xa=(eu.Ci=function(t,e){return new eu(Ei.k,e,Fa(),Fa(),Fa())},eu),$a=(Object.defineProperty(tu.prototype,"Pi",{get:function(){return this.qi},enumerable:!0,configurable:!0}),Object.defineProperty(tu.prototype,"resumeToken",{get:function(){return this.Li},enumerable:!0,configurable:!0}),Object.defineProperty(tu.prototype,"Mi",{get:function(){return 0!==this.xi},enumerable:!0,configurable:!0}),Object.defineProperty(tu.prototype,"Qi",{get:function(){return this.Bi},enumerable:!0,configurable:!0}),tu.prototype.Gi=function(t){0<t.P()&&(this.Bi=!0,this.Li=t)},tu.prototype.Wi=function(){var t=Fa(),e=Fa(),n=Fa();return this.ji.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Au("Encountered invalid change type: "+i)}})),new Xa(this.Li,this.qi,t,e,n)},tu.prototype.zi=function(){this.Bi=!1,this.ji=au()},tu.prototype.Ki=function(t,e){this.Bi=!0,this.ji=this.ji.dt(t,e)},tu.prototype.Hi=function(t){this.Bi=!0,this.ji=this.ji.remove(t)},tu.prototype.Ji=function(){this.xi+=1},tu.prototype.Yi=function(){this.xi-=1},tu.prototype.Xi=function(){this.Bi=!0,this.qi=!0},tu),Qa=(Za.prototype.ee=function(t){for(var e=0,n=t.Fi;e<n.length;e++){var r=n[e];t.Vi instanceof As?this.re(r,t.Vi):t.Vi instanceof Ss&&this.ue(r,t.key,t.Vi)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.ue(r,t.key,t.Vi)},Za.prototype.se=function(t){var e=this;this.oe(t,(function(n){var r=e.he(n);switch(t.state){case 0:e.ce(n)&&r.Gi(t.resumeToken);break;case 1:r.Yi(),r.Mi||r.zi(),r.Gi(t.resumeToken);break;case 2:r.Yi(),r.Mi||e.removeTarget(n),Su(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:e.ce(n)&&(r.Xi(),r.Gi(t.resumeToken));break;case 4:e.ce(n)&&(e.ae(n),r.Gi(t.resumeToken));break;default:Au("Unknown target watch change state: "+t.state)}}))},Za.prototype.oe=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):ei(this.Zi,e)},Za.prototype.fe=function(t){var e=t.targetId,n=t.Ui.count,r=this.le(e);if(r){var i=r.target;if(i.Nn())if(0===n){var o=new Vi(i.path);this.ue(e,o,new Ss(o,Pi.q()))}else Su(1===n,"Single document existence filter with count: "+n);else this.de(e)!==n&&(this.ae(e),this.ie=this.ie.add(e))}},Za.prototype.ve=function(t){var e=this,n={};ei(this.Zi,(function(r,i){var o=e.le(r);if(o){if(i.Pi&&o.target.Nn()){var s=new Vi(o.target.path);null!==e.te.get(s)||e.we(r,s)||e.ue(r,s,new Ss(s,t))}i.Qi&&(n[r]=i.Wi(),i.zi())}}));var r=Fa();this.ne.forEach((function(t,n){var i=!0;n.Bt((function(t){var n=e.le(t);return!n||2===n.ci||(i=!1)})),i&&(r=r.add(t))}));var i=new Ya(t,n,this.ie,this.te,r);return this.te=xa(),this.ne=su(),this.ie=new no(Ou),i},Za.prototype.re=function(t,e){if(this.ce(t)){var n=this.we(t,e.key)?2:0;this.he(t).Ki(e.key,n),this.te=this.te.dt(e.key,e),this.ne=this.ne.dt(e.key,this.me(e.key).add(t))}},Za.prototype.ue=function(t,e,n){if(this.ce(t)){var r=this.he(t);this.we(t,e)?r.Ki(e,1):r.Hi(e),this.ne=this.ne.dt(e,this.me(e).delete(t)),n&&(this.te=this.te.dt(e,n))}},Za.prototype.removeTarget=function(t){delete this.Zi[t]},Za.prototype.de=function(t){var e=this.he(t).Wi();return this.$i.ge(t).size+e.ki.size-e.Oi.size},Za.prototype.Ji=function(t){this.he(t).Ji()},Za.prototype.he=function(t){return this.Zi[t]||(this.Zi[t]=new $a),this.Zi[t]},Za.prototype.me=function(t){var e=this.ne.get(t);return e||(e=new no(Ou),this.ne=this.ne.dt(t,e)),e},Za.prototype.ce=function(t){var e=null!==this.le(t);return e||Eu("WatchChangeAggregator","Detected inactive target",t),e},Za.prototype.le=function(t){var e=this.Zi[t];return e&&e.Mi?null:this.$i.be(t)},Za.prototype.ae=function(t){var e=this;Su(!this.Zi[t].Mi,"Should only reset active targets"),this.Zi[t]=new $a,this.$i.ge(t).forEach((function(n){e.ue(t,n,null)}))},Za.prototype.we=function(t,e){return this.$i.ge(t).has(e)},Za);function Za(t){this.$i=t,this.Zi={},this.te=xa(),this.ne=su(),this.ie=new no(Ou)}function tu(){this.xi=0,this.ji=au(),this.Li=Ei.k,this.qi=!1,this.Bi=!0}function eu(t,e,n,r,i){this.resumeToken=t,this.Pi=e,this.ki=n,this.Ni=r,this.Oi=i}function nu(t,e,n,r,i){this.ai=t,this.Ei=e,this.Di=n,this.Ri=r,this.Si=i}function ru(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.pi=n,this.docChanges=r,this.yi=i,this.fromCache=o,this._i=s,this.Ii=a}function iu(){this.gi=new Fi(Vi.W)}function ou(t){this.W=t?function(e,n){return t(e,n)||Vi.W(e.key,n.key)}:function(t,e){return Vi.W(t.key,e.key)},this.vi=Ma(),this.wi=new Fi(this.W)}function su(){return new Fi(Vi.W)}function au(){return new Fi(Vi.W)}var uu,cu,hu=((uu={})[ca.ASCENDING.name]="ASCENDING",uu[ca.DESCENDING.name]="DESCENDING",uu),lu=((cu={})[na.LESS_THAN.name]="LESS_THAN",cu[na.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",cu[na.GREATER_THAN.name]="GREATER_THAN",cu[na.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",cu[na.EQUAL.name]="EQUAL",cu[na.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",cu[na.IN.name]="IN",cu[na.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",cu),fu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pu(t,e){Su(!Gs(t),e+" is missing")}function du(t){return"number"==typeof t?t:"string"==typeof t?Number(t):Au("can't parse "+t)}var vu=(wu.prototype.pe=function(t){var e=void 0===t.code?Fr.UNKNOWN:Ca(t.code);return new qr(e,t.message||"")},wu.prototype.ye=function(t){return this.options._e||Gs(t)?t:{value:t}},wu.prototype.Ie=function(t){var e;return Gs(e="object"==typeof t?t.value:t)?null:e},wu.prototype.G=function(t){return this.options._e?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},wu.prototype.L=function(t){if("string"==typeof t)return this.Te(t);Su(!!t,"Cannot deserialize null or undefined timestamp.");var e=du(t.seconds||"0"),n=t.nanos||0;return new xi(e,n)},wu.prototype.Te=function(t){var e=0,n=fu.exec(t);if(Su(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new xi(o,e)},wu.prototype.Ee=function(t){return this.options._e?t.toBase64():t.toUint8Array()},wu.prototype.De=function(t){return this.options._e?(Su(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),Ei.fromBase64String(t||"")):(Su(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),Ei.fromUint8Array(t||new Uint8Array))},wu.prototype.Re=function(t){return"string"==typeof t?(Su(this.options._e,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Di.fromBase64String(t)):(Su(!this.options._e,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Di.fromUint8Array(t))},wu.prototype.toVersion=function(t){return this.G(t.G())},wu.prototype.fromVersion=function(t){return Su(!!t,"Trying to deserialize version that isn't set"),Pi.L(this.L(t))},wu.prototype.Se=function(t,e){return this.Ae(t).child("documents").child(e).it()},wu.prototype.Ce=function(t){var e=Mi.et(t);return Su(this.Pe(e),"Tried to deserialize invalid key "+e.toString()),e},wu.prototype.ke=function(t){return this.Se(this.Dn,t.path)},wu.prototype.Ne=function(t){var e=this.Ce(t);return Su(e.get(1)===this.Dn.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.Dn.projectId),Su(!e.get(3)&&!this.Dn.database||e.get(3)===this.Dn.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.Dn.database),new Vi(this.Oe(e))},wu.prototype.Fe=function(t){return this.Se(this.Dn,t)},wu.prototype.Ve=function(t){var e=this.Ce(t);return 4===e.length?Mi.rt:this.Oe(e)},Object.defineProperty(wu.prototype,"Ue",{get:function(){return new Mi(["projects",this.Dn.projectId,"databases",this.Dn.database]).it()},enumerable:!0,configurable:!0}),wu.prototype.Ae=function(t){return new Mi(["projects",t.projectId,"databases",t.database])},wu.prototype.Oe=function(t){return Su(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.H(5)},wu.prototype.Pe=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},wu.prototype.xe=function(t){if(t instanceof Mo)return{nullValue:"NULL_VALUE"};if(t instanceof Uo)return{booleanValue:t.value()};if(t instanceof ps)return{integerValue:""+t.value()};if(t instanceof ds){var e=t.value();if(this.options._e){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"};if(Hs(e))return{doubleValue:"-0"}}return{doubleValue:t.value()}}return t instanceof vs?{stringValue:t.value()}:t instanceof Is?{mapValue:this.je(t)}:t instanceof Ts?{arrayValue:this.Le(t)}:t instanceof ys?{timestampValue:this.G(t.Jt)}:t instanceof bs?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof gs?{bytesValue:this.Ee(t.value())}:t instanceof ws?{referenceValue:this.Se(t.Dn,t.key.path)}:Au("Unknown FieldValue "+JSON.stringify(t))},wu.prototype.qe=function(t){var e=this;if("nullValue"in t)return Mo.yn;if("booleanValue"in t)return Uo.of(t.booleanValue);if("integerValue"in t)return new ps(du(t.integerValue));if("doubleValue"in t){if(this.options._e){if("NaN"===t.doubleValue)return ds.Tn;if("Infinity"===t.doubleValue)return ds.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return ds.NEGATIVE_INFINITY;if("-0"===t.doubleValue)return new ds(-0)}return new ds(t.doubleValue)}if("stringValue"in t)return new vs(t.stringValue);if("mapValue"in t)return this.Be(t.mapValue.fields||{});if("arrayValue"in t){pu(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Ts(n.map((function(t){return e.qe(t)})))}if("timestampValue"in t)return pu(t.timestampValue,"timestampValue"),new ys(this.L(t.timestampValue));if("geoPointValue"in t){pu(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new bs(new Ri(r,i))}if("bytesValue"in t){pu(t.bytesValue,"bytesValue");var o=this.Re(t.bytesValue);return new gs(o)}if("referenceValue"in t){pu(t.referenceValue,"referenceValue");var s=this.Ce(t.referenceValue),a=new Pu(s.get(1),s.get(3)),u=new Vi(this.Oe(s));return new ws(a,u)}return Au("Unknown Value proto "+JSON.stringify(t))},wu.prototype.Me=function(t,e){return{name:this.ke(t),fields:this.Qe(e)}},wu.prototype.Ge=function(t){return Su(!t.rn,"Can't serialize documents with mutations."),{name:this.ke(t.key),fields:this.Qe(t.data()),updateTime:this.G(t.version.G())}},wu.prototype.We=function(t,e){var n=this,r=this.Ne(t.name),i=this.fromVersion(t.updateTime);return new As(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.qe(t)}))},wu.prototype.Qe=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.xe(r)})),n},wu.prototype.Be=function(t){var e=this,n=t,r=Is.wn();return ni(n,(function(t,n){r.set(new ji([t]),e.qe(n))})),r.an()},wu.prototype.je=function(t){return{fields:this.Qe(t)}},wu.prototype.Le=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.xe(t))})),{values:n}},wu.prototype.ze=function(t){var e=this;Su(!!t.found,"Tried to deserialize a found document from a missing document."),pu(t.found.name,"doc.found.name"),pu(t.found.updateTime,"doc.found.updateTime");var n=this.Ne(t.found.name),r=this.fromVersion(t.found.updateTime);return new As(n,r,{},void 0,t.found,(function(t){return e.qe(t)}))},wu.prototype.Ke=function(t){Su(!!t.missing,"Tried to deserialize a missing document from a found document."),Su(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.Ne(t.missing),n=this.fromVersion(t.readTime);return new Ss(e,n)},wu.prototype.He=function(t){return"found"in t?this.ze(t):"missing"in t?this.Ke(t):Au("invalid batch get response: "+JSON.stringify(t))},wu.prototype.Je=function(t){switch(t){case 1:return"ADD";case 3:return"CURRENT";case 0:return"NO_CHANGE";case 2:return"REMOVE";case 4:return"RESET";default:return Au("Unknown WatchTargetChangeState: "+t)}},wu.prototype.Ye=function(t){if(t instanceof Ha)return{filter:{count:t.Ui.count,targetId:t.targetId}};if(t instanceof Ga){if(t.Vi instanceof As){var e=t.Vi;return{documentChange:{document:{name:this.ke(e.key),fields:this.Qe(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.Fi,removedTargetIds:t.removedTargetIds}}}if(t.Vi instanceof Ss)return e=t.Vi,{documentDelete:{document:this.ke(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.Vi)return{documentRemove:{document:this.ke(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof za){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return Ws.OK;switch(t){case Fr.OK:return Ws.OK;case Fr.CANCELLED:return Ws.CANCELLED;case Fr.UNKNOWN:return Ws.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return Ws.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return Ws.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return Ws.INTERNAL;case Fr.UNAVAILABLE:return Ws.UNAVAILABLE;case Fr.UNAUTHENTICATED:return Ws.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return Ws.INVALID_ARGUMENT;case Fr.NOT_FOUND:return Ws.NOT_FOUND;case Fr.ALREADY_EXISTS:return Ws.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return Ws.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return Ws.FAILED_PRECONDITION;case Fr.ABORTED:return Ws.ABORTED;case Fr.OUT_OF_RANGE:return Ws.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return Ws.UNIMPLEMENTED;case Fr.DATA_LOSS:return Ws.DATA_LOSS;default:return Au("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Je(t.state),targetIds:t.targetIds,resumeToken:this.Ee(t.resumeToken),cause:n}}}return Au("Unrecognized watch change: "+JSON.stringify(t))},wu.prototype.Xe=function(t){var e,n=this;if("targetChange"in t){pu(t.targetChange,"targetChange");var r=this.$e(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=this.De(t.targetChange.resumeToken),s=t.targetChange.cause;e=new za(r,i,o,s&&this.pe(s)||null)}else if("documentChange"in t){pu(t.documentChange,"documentChange");var a=t.documentChange;pu(a.document,"documentChange.name"),pu(a.document.name,"documentChange.document.name"),pu(a.document.updateTime,"documentChange.document.updateTime");var u=this.Ne(a.document.name),c=this.fromVersion(a.document.updateTime),h=new As(u,c,{},void 0,a.document,(function(t){return n.qe(t)})),l=a.targetIds||[],f=a.removedTargetIds||[];e=new Ga(l,f,h.key,h)}else if("documentDelete"in t){pu(t.documentDelete,"documentDelete");var p=t.documentDelete;pu(p.document,"documentDelete.document"),u=this.Ne(p.document),c=p.readTime?this.fromVersion(p.readTime):Pi.q(),h=new Ss(u,c),e=new Ga([],f=p.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){pu(t.documentRemove,"documentRemove");var d=t.documentRemove;pu(d.document,"documentRemove"),u=this.Ne(d.document),e=new Ga([],f=d.removedTargetIds||[],u,null)}else{if(!("filter"in t))return Au("Unknown change type "+JSON.stringify(t));pu(t.filter,"filter");var v=t.filter;pu(v.targetId,"filter.targetId");var y=v.count||0,m=new va(y);e=new Ha(v.targetId,m)}return e},wu.prototype.$e=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Au("Got unexpected TargetChange.state: "+t)},wu.prototype.Ze=function(t){if(!("targetChange"in t))return Pi.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Pi.MIN:e.readTime?this.fromVersion(e.readTime):Pi.MIN},wu.prototype.tr=function(t){var e,n=this;if(t instanceof Oo)e={update:this.Me(t.key,t.value)};else if(t instanceof Ro)e={delete:this.ke(t.key)};else if(t instanceof Do)e={update:this.Me(t.key,t.data),updateMask:this.nr(t.sn)};else if(t instanceof Co)e={transform:{document:this.ke(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.ir(t)}))}};else{if(!(t instanceof xo))return Au("Unknown mutation type "+t.type);e={verify:this.ke(t.key)}}return t.en.Zt||(e.currentDocument=this.er(t.en)),e},wu.prototype.rr=function(t){var e=this,n=t.currentDocument?this.ur(t.currentDocument):ko.NONE;if(t.update){pu(t.update.name,"name");var r=this.Ne(t.update.name),i=this.Be(t.update.fields||{});if(t.updateMask){var o=this.sr(t.updateMask);return new Do(r,i,o,n)}return new Oo(r,i,n)}if(t.delete)return r=this.Ne(t.delete),new Ro(r,n);if(t.transform){r=this.Ne(t.transform.document);var s=t.transform.fieldTransforms.map((function(t){return e.or(t)}));return Su(!0===n.exists,'Transforms only support precondition "exists == true"'),new Co(r,s)}return t.verify?(r=this.Ne(t.verify),new xo(r,n)):Au("unknown mutation proto: "+JSON.stringify(t))},wu.prototype.er=function(t){return Su(!t.Zt,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Au("Unknown precondition")},wu.prototype.ur=function(t){return void 0!==t.updateTime?ko.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ko.exists(t.exists):ko.NONE},wu.prototype.hr=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(Pi.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map((function(t){return n.qe(t)}))),new yo(r,i)},wu.prototype.cr=function(t,e){var n=this;return t&&0<t.length?(Su(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.hr(t,e)}))):[]},wu.prototype.ir=function(t){var e=this,n=t.transform;if(n instanceof io)return{fieldPath:t.field.it(),setToServerValue:"REQUEST_TIME"};if(n instanceof oo)return{fieldPath:t.field.it(),appendMissingElements:{values:n.elements.map((function(t){return e.xe(t)}))}};if(n instanceof so)return{fieldPath:t.field.it(),removeAllFromArray:{values:n.elements.map((function(t){return e.xe(t)}))}};if(n instanceof ao)return{fieldPath:t.field.it(),increment:this.xe(n.Ht)};throw Au("Unknown transform: "+t.transform)},wu.prototype.or=function(t){var e=this,n=null;if("setToServerValue"in t)Su("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=io.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new oo(r.map((function(t){return e.qe(t)})))}else if("removeAllFromArray"in t)r=t.removeAllFromArray.values||[],n=new so(r.map((function(t){return e.qe(t)})));else if("increment"in t){var i=this.qe(t.increment);Su(i instanceof jo,"NUMERIC_ADD transform requires a NumberValue"),n=new ao(i)}else Au("Unknown transform proto: "+JSON.stringify(t));var o=ji.ht(t.fieldPath);return new So(o,n)},wu.prototype.ar=function(t){return{documents:[this.Fe(t.path)]}},wu.prototype.lr=function(t){var e=t.documents.length;Su(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return ea.jn(this.Ve(n)).Yn()},wu.prototype.dr=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(Su(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.Fe(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(Su(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.Fe(n.J()),e.structuredQuery.from=[{collectionId:n.$()}]);var r=this.vr(t.filters);r&&(e.structuredQuery.where=r);var i=this.wr(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.ye(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.mr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.mr(t.endAt)),e},wu.prototype.gr=function(t){var e=this.Ve(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){Su(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.br(n.where));var a=[];n.orderBy&&(a=this.pr(n.orderBy));var u=null;n.limit&&(u=this.Ie(n.limit));var c=null;n.startAt&&(c=this.yr(n.startAt));var h=null;return n.endAt&&(h=this.yr(n.endAt)),new ea(e,i,a,s,u,"F",c,h).Yn()},wu.prototype._r=function(t){var e=this.Ir(t.ci);return null==e?null:{"goog-listen-tags":e}},wu.prototype.Ir=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Au("Unrecognized query purpose: "+t)}},wu.prototype.Yn=function(t){var e,n=t.target;return(e=n.Nn()?{documents:this.ar(n)}:{query:this.dr(n)}).targetId=t.targetId,0<t.resumeToken.P()&&(e.resumeToken=this.Ee(t.resumeToken)),e},wu.prototype.vr=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof ra?e.Tr(t):Au("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},wu.prototype.br=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Er(t)]:void 0!==t.fieldFilter?[this.Dr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.br(t)})).reduce((function(t,e){return t.concat(e)})):Au("Unknown filter: "+JSON.stringify(t)):[]},wu.prototype.wr=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.Rr(t)}))},wu.prototype.pr=function(t){var e=this;return t.map((function(t){return e.Sr(t)}))},wu.prototype.mr=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.xe(t)}))}},wu.prototype.yr=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.qe(t)}));return new ha(r,n)},wu.prototype.Ar=function(t){return hu[t.name]},wu.prototype.Cr=function(t){switch(t){case"ASCENDING":return ca.ASCENDING;case"DESCENDING":return ca.DESCENDING;default:return}},wu.prototype.Pr=function(t){return lu[t.name]},wu.prototype.kr=function(t){switch(t){case"EQUAL":return na.EQUAL;case"GREATER_THAN":return na.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return na.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return na.LESS_THAN;case"LESS_THAN_OR_EQUAL":return na.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return na.ARRAY_CONTAINS;case"IN":return na.IN;case"ARRAY_CONTAINS_ANY":return na.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return Au("Unspecified operator");default:return Au("Unknown operator")}},wu.prototype.Nr=function(t){return{fieldPath:t.it()}},wu.prototype.Or=function(t){return ji.ht(t.fieldPath)},wu.prototype.Rr=function(t){return{field:this.Nr(t.field),direction:this.Ar(t.dir)}},wu.prototype.Sr=function(t){return new la(this.Or(t.field),this.Cr(t.direction))},wu.prototype.Dr=function(t){return ra.create(this.Or(t.fieldFilter.field),this.kr(t.fieldFilter.op),this.qe(t.fieldFilter.value))},wu.prototype.Tr=function(t){if(t.op===na.EQUAL){if(t.value.isEqual(ds.Tn))return{unaryFilter:{field:this.Nr(t.field),op:"IS_NAN"}};if(t.value.isEqual(Mo.yn))return{unaryFilter:{field:this.Nr(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.Nr(t.field),op:this.Pr(t.op),value:this.xe(t.value)}}},wu.prototype.Er=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.Or(t.unaryFilter.field);return ra.create(e,na.EQUAL,ds.Tn);case"IS_NULL":var n=this.Or(t.unaryFilter.field);return ra.create(n,na.EQUAL,Mo.yn);case"OPERATOR_UNSPECIFIED":return Au("Unspecified filter");default:return Au("Unknown filter")}},wu.prototype.nr=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.it())})),{fieldPaths:e}},wu.prototype.sr=function(t){var e=(t.fieldPaths||[]).map((function(t){return ji.ht(t)}));return Ao.Xt(e)},wu),yu=(gu.Fr=function(t){gu.platform&&Au("Platform already defined"),gu.platform=t},gu.C=function(){return gu.platform||Au("Platform not set"),gu.platform},gu),mu=new y("@firebase/firestore");function gu(){}function wu(t,e){this.Dn=t,this.options=e}function bu(){return mu.logLevel===s.DEBUG?0:mu.logLevel===s.SILENT?2:1}function Iu(t){switch(t){case 0:mu.logLevel=s.DEBUG;break;case 1:mu.logLevel=s.ERROR;break;case 2:mu.logLevel=s.SILENT;break;default:mu.error("Firestore ("+jr+"): Invalid value passed to `setLogLevel`")}}function Eu(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(mu.logLevel<=s.DEBUG){var i=n.map(Nu);mu.debug.apply(mu,l(["Firestore ("+jr+") ["+t+"]: "+e],i))}}function Tu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(mu.logLevel<=s.ERROR){var r=e.map(Nu);mu.error.apply(mu,l(["Firestore ("+jr+"): "+t],r))}}function Nu(t){if("string"==typeof t)return t;var e=yu.C();try{return e.Vr(t)}catch(e){return t}}function Au(t){var e="FIRESTORE ("+jr+") INTERNAL ASSERTION FAILED: "+t;throw Tu(e),new Error(e)}function Su(t,e){t||Au(e)}var ku=(_u.Ur=function(){for(var t="";t.length<20;)yu.C().randomBytes(40).forEach((function(e){t.length<20&&e<=247&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(e%62))}));return Su(20===t.length,"Invalid auto ID: "+t),t},_u);function _u(){}function Ou(t,e){return t<e?-1:e<t?1:0}function Du(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Cu(t){return t+"\0"}function Ru(t,e,n,r,i){this.Dn=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}function xu(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}var Pu=(Object.defineProperty($u.prototype,"xr",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),$u.prototype.isEqual=function(t){return t instanceof $u&&t.projectId===this.projectId&&t.database===this.database},$u.prototype.B=function(t){return Ou(this.projectId,t.projectId)||Ou(this.database,t.database)},$u),Lu=(Xu.prototype.zt=function(t,e,n){e&&Su(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.jr;Su(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.zt(e,s)}}return e},Xu.prototype.Wt=function(t,e){e&&Su(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.Wt(e,e,this.En));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.Wt(e,i,this.En))}return e},Xu.prototype.Lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Wt(r.key,t.get(r.key));i&&(n=n.dt(r.key,i))})),n},Xu.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Fa())},Xu.prototype.isEqual=function(t){return this.batchId===t.batchId&&Du(this.mutations,t.mutations)&&Du(this.baseMutations,t.baseMutations)},Xu),Mu=(Yu.from=function(t,e,n,r){Su(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=ja(),o=t.mutations,s=0;s<o.length;s++)i=i.dt(o[s].key,n[s].version);return new Yu(t,e,n,r,i)},Yu),Uu=(Ju.prototype.get=function(t){var e=this.Mr(t),n=this.Qr[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},Ju.prototype.has=function(t){return void 0!==this.get(t)},Ju.prototype.set=function(t,e){var n=this.Mr(t),r=this.Qr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Qr[n]=[[t,e]]},Ju.prototype.delete=function(t){var e=this.Mr(t),n=this.Qr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Qr[e]:n.splice(r,1),!0;return!1},Ju.prototype.forEach=function(t){ni(this.Qr,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},Ju.prototype.Y=function(){return ri(this.Qr)},Ju),ju=(Ku.zr=function(t,e){for(var n=Fa(),r=Fa(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new Ku(t,e.fromCache,n,r)},Ku),Vu=(Wu.prototype.Hr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Wu.prototype.next=function(){var t=++this.previousValue;return this.Jr&&this.Jr(t),t},Wu.Xr=-1,Wu),Fu=(zu.eu=function(t,e,n,r,i){var o=new zu(t,e,Date.now()+n,r,i);return o.start(n),o},zu.prototype.start=function(t){var e=this;this.ru=setTimeout((function(){return e.uu()}),t)},zu.prototype.su=function(){return this.uu()},zu.prototype.cancel=function(t){null!==this.ru&&(this.clearTimeout(),this.iu.reject(new qr(Fr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},zu.prototype.uu=function(){var t=this;this.$r.ou((function(){return null!==t.ru?(t.clearTimeout(),t.op().then((function(e){return t.iu.resolve(e)}))):Promise.resolve()}))},zu.prototype.clearTimeout=function(){null!==this.ru&&(this.nu(this),clearTimeout(this.ru),this.ru=null)},zu),qu=(Object.defineProperty(Hu.prototype,"vu",{get:function(){return this.cu},enumerable:!0,configurable:!0}),Hu.prototype.ou=function(t){this.enqueue(t)},Hu.prototype.wu=function(t){this.mu(),this.gu(t)},Hu.prototype.bu=function(t){return this.mu(),this.gu(t)},Hu.prototype.pu=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.mu(),this.cu?[3,2]:(this.cu=!0,[4,this.bu(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Hu.prototype.enqueue=function(t){return this.mu(),this.cu?new Promise((function(t){})):this.gu(t)},Hu.prototype.gu=function(t){var e=this,n=this.hu.then((function(){return e.lu=!0,t().catch((function(t){e.fu=t,e.lu=!1;var n=t.stack||t.message||"";throw Tu("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.lu=!1,t}))}));return this.hu=n},Hu.prototype.yu=function(t,e,n){var r=this;this.mu(),Su(0<=e,"Attempted to schedule an operation with a negative delay of "+e),-1<this.du.indexOf(t)&&(e=0);var i=Fu.eu(this,t,e,n,(function(t){return r._u(t)}));return this.au.push(i),i},Hu.prototype.mu=function(){this.fu&&Au("AsyncQueue is already failed: "+(this.fu.stack||this.fu.message))},Hu.prototype.Iu=function(){Su(this.lu,"verifyOpInProgress() called when no op in progress on this queue.")},Hu.prototype.Tu=function(){return c(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return[4,t=this.hu];case 1:e.sent(),e.label=2;case 2:if(t!==this.hu)return[3,0];e.label=3;case 3:return[2]}}))}))},Hu.prototype.Eu=function(t){for(var e=0,n=this.au;e<n.length;e++)if(n[e].Zr===t)return!0;return!1},Hu.prototype.Du=function(t){var e=this;return this.Tu().then((function(){Su("all"===t||e.Eu(t),"Attempted to drain to missing operation "+t),e.au.sort((function(t,e){return t.tu-e.tu}));for(var n=0,r=e.au;n<r.length;n++){var i=r[n];if(i.su(),"all"!==t&&i.Zr===t)break}return e.Tu()}))},Hu.prototype.Ru=function(t){this.du.push(t)},Hu.prototype._u=function(t){var e=this.au.indexOf(t);Su(0<=e,"Delayed operation not found."),this.au.splice(e,1)},Hu),Bu=(Gu.prototype.catch=function(t){return this.next(void 0,t)},Gu.prototype.next=function(t,e){var n=this;return this.Pu&&Au("Called next() or catch() twice for PersistencePromise"),this.Pu=!0,this.Cu?this.error?this.ku(e,this.error):this.Nu(t,this.result):new Gu((function(r,i){n.Su=function(e){n.Nu(t,e).next(r,i)},n.Au=function(t){n.ku(e,t).next(r,i)}}))},Gu.prototype.Ou=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},Gu.prototype.Fu=function(t){try{var e=t();return e instanceof Gu?e:Gu.resolve(e)}catch(t){return Gu.reject(t)}},Gu.prototype.Nu=function(t,e){return t?this.Fu((function(){return t(e)})):Gu.resolve(e)},Gu.prototype.ku=function(t,e){return t?this.Fu((function(){return t(e)})):Gu.reject(e)},Gu.resolve=function(t){return new Gu((function(e,n){e(t)}))},Gu.reject=function(t){return new Gu((function(e,n){n(t)}))},Gu.Vu=function(t){return new Gu((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},Gu.Uu=function(t){for(var e=Gu.resolve(!1),n=function(t){e=e.next((function(e){return e?Gu.resolve(e):t()}))},r=0,i=t;r<i.length;r++)n(i[r]);return e},Gu.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Vu(r)},Gu);function Gu(t){var e=this;this.Su=null,this.Au=null,this.result=void 0,this.error=void 0,this.Cu=!1,this.Pu=!1,t((function(t){e.Cu=!0,e.result=t,e.Su&&e.Su(t)}),(function(t){e.Cu=!0,e.error=t,e.Au&&e.Au(t)}))}function Hu(){this.hu=Promise.resolve(),this.cu=!1,this.au=[],this.fu=null,this.lu=!1,this.du=[]}function zu(t,e,n,r,i){this.$r=t,this.Zr=e,this.tu=n,this.op=r,this.nu=i,this.iu=new xu,this.then=this.iu.promise.then.bind(this.iu.promise),this.catch=this.iu.promise.catch.bind(this.iu.promise),this.iu.promise.catch((function(t){}))}function Wu(t,e){var n=this;this.previousValue=t,e&&(e.Kr=function(t){return n.Hr(t)},this.Jr=function(t){return e.Yr(t)})}function Ku(t,e,n,r){this.targetId=t,this.fromCache=e,this.Gr=n,this.Wr=r}function Ju(t){this.Mr=t,this.Qr={}}function Yu(t,e,n,r,i){this.batch=t,this.qr=e,this.jr=n,this.streamToken=r,this.Br=i}function Xu(t,e,n,r){this.batchId=t,this.En=e,this.baseMutations=n,Su(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}function $u(t,e){this.projectId=t,this.database=e||"(default)"}function Qu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Ou(n,i);return 0===s?Ou(r,o):s}var Zu=(vc.prototype.Lu=function(){return++this.ju},vc.prototype.qu=function(t){var e=[t,this.Lu()];if(this.buffer.size<this.xu)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Qu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(vc.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),vc),tc={Bu:!1,Mu:0,Qu:0,Gu:0},ec=(dc.Hu=function(t){return new dc(t,dc.Ju,dc.Yu)},dc.Xu=-1,dc.$u=1048576,dc.ts=new dc(dc.Zu=41943040,dc.Ju=10,dc.Yu=1e3),dc.DISABLED=new dc(dc.Xu,0,0),dc),nc=(pc.prototype.start=function(t){Su(null===this.rs,"Cannot start an already started LruScheduler"),this.ns.params.Wu!==ec.Xu&&this.us(t)},pc.prototype.stop=function(){this.rs&&(this.rs.cancel(),this.rs=null)},Object.defineProperty(pc.prototype,"ss",{get:function(){return null!==this.rs},enumerable:!0,configurable:!0}),pc.prototype.us=function(t){var e=this;Su(null===this.rs,"Cannot schedule GC while a task is pending");var n=this.es?3e5:6e4;Eu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.rs=this.$r.yu("lru_garbage_collection",n,(function(){return e.rs=null,e.es=!0,t.os(e.ns).then((function(){return e.us(t)})).catch(yc)}))},pc),rc=(fc.prototype.cs=function(t,e){return this.hs.as(t).next((function(t){return Math.floor(e/100*t)}))},fc.prototype.fs=function(t,e){var n=this;if(0===e)return Bu.resolve(Vu.Xr);var r=new Zu(e);return this.hs.oe(t,(function(t){return r.qu(t.sequenceNumber)})).next((function(){return n.hs.ls(t,(function(t){return r.qu(t)}))})).next((function(){return r.maxValue}))},fc.prototype.ds=function(t,e,n){return this.hs.ds(t,e,n)},fc.prototype.vs=function(t,e){return this.hs.vs(t,e)},fc.prototype.ws=function(t,e){var n=this;return this.params.Wu===ec.Xu?(Eu("LruGarbageCollector","Garbage collection skipped; disabled"),Bu.resolve(tc)):this.ms(t).next((function(r){return r<n.params.Wu?(Eu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Wu),tc):n.gs(t,e)}))},fc.prototype.ms=function(t){return this.hs.ms(t)},fc.prototype.gs=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.cs(t,this.params.zu).next((function(e){return r=e>c.params.Ku?(Eu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Ku+" from "+e),c.params.Ku):e,o=Date.now(),c.fs(t,r)})).next((function(r){return n=r,s=Date.now(),c.ds(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.vs(t,n)})).next((function(t){return u=Date.now(),bu()<=0&&Eu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Bu.resolve({Bu:!0,Mu:r,Qu:i,Gu:t})}))},fc),ic=(lc.prototype.Y=function(){return this.bs.Y()},lc.prototype._s=function(t,e){var n=new oc(t,e);this.bs=this.bs.add(n),this.ps=this.ps.add(n)},lc.prototype.Is=function(t,e){var n=this;t.forEach((function(t){return n._s(t,e)}))},lc.prototype.Ts=function(t,e){this.Es(new oc(t,e))},lc.prototype.Ds=function(t,e){var n=this;t.forEach((function(t){return n.Ts(t,e)}))},lc.prototype.Rs=function(t){var e=this,n=Vi.EMPTY,r=new oc(n,t),i=new oc(n,t+1),o=[];return this.ps.qt([r,i],(function(t){e.Es(t),o.push(t.key)})),o},lc.prototype.Ss=function(){var t=this;this.bs.forEach((function(e){return t.Es(e)}))},lc.prototype.Es=function(t){this.bs=this.bs.delete(t),this.ps=this.ps.delete(t)},lc.prototype.As=function(t){var e=Vi.EMPTY,n=new oc(e,t),r=new oc(e,t+1),i=Fa();return this.ps.qt([n,r],(function(t){i=i.add(t.key)})),i},lc.prototype.Cs=function(t){var e=new oc(t,0),n=this.bs.Mt(e);return null!==n&&t.isEqual(n.key)},lc),oc=(hc.Rn=function(t,e){return Vi.W(t.key,e.key)||Ou(t.Ps,e.Ps)},hc.ys=function(t,e){return Ou(t.Ps,e.Ps)||Vi.W(t.key,e.key)},hc),sc=(Object.defineProperty(cc.prototype,"readTime",{get:function(){return Su(void 0!==this.Os,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.Os},set:function(t){Su(void 0===this.Os||this.Os.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.Os=t},enumerable:!0,configurable:!0}),cc.prototype.Fs=function(t,e){this.Vs(),this.readTime=e,this.ks.set(t.key,t)},cc.prototype.Us=function(t,e){this.Vs(),e&&(this.readTime=e),this.ks.set(t,null)},cc.prototype.xs=function(t,e){this.Vs();var n=this.ks.get(e);return void 0!==n?Bu.resolve(n):this.js(t,e)},cc.prototype.getEntries=function(t,e){return this.Ls(t,e)},cc.prototype.apply=function(t){return this.Vs(),this.Ns=!0,this.qs(t)},cc.prototype.Vs=function(){Su(!this.Ns,"Changes have already been applied.")},cc),ac=(uc.prototype.start=function(){return this.eo()},uc.prototype.ro=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i=this;return h(this,(function(o){switch(o.label){case 0:return e=this.Hs,n=this.to,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.Hs.uo(r).next((function(s){return o=s,e=i.persistence.Js(t),n=new Lc(i.Ys,e,i.persistence.no()),e.uo(r)})).next((function(t){for(var e=[],i=[],s=Fa(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=t;p<d.length;p++){c=d[p],i.push(c.batchId);for(var v=0,y=c.mutations;v<y.length;v++)f=y[v],s=s.add(f.key)}return n.so(r,s).next((function(t){return{oo:t,ho:e,co:i}}))}))}))];case 1:return r=o.sent(),this.Hs=e,this.to=n,this.Bs.io(this.to),[2,r]}}))}))},uc.prototype.ao=function(t){var e,n=this,r=xi.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Fa());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.to.so(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],h=c.un(e.get(c.key));null!=h&&s.push(new Do(c.key,h,h.sn(),ko.exists(!0)))}return n.Hs.fo(o,r,s,t)}))})).then((function(t){var n=t.Lr(e);return{batchId:t.batchId,ks:n}}))},uc.prototype.lo=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.Hs.do(n,t).next((function(t){return t?e.to.so(n,t):Bu.resolve(null)}))}))},uc.prototype.vo=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Ys.wo({mo:!0});return e.Hs.vo(n,t.batch,t.streamToken).next((function(){return e.bo(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.Hs.po(n)})).next((function(){return e.to.so(n,r)}))}))},uc.prototype.yo=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.Hs._o(n,t).next((function(t){return Su(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.Hs.Io(n,t)})).next((function(){return e.Hs.po(n)})).next((function(){return e.to.so(n,r)}))}))},uc.prototype.To=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Hs.To(e)}))},uc.prototype.Eo=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly",(function(e){return t.Hs.Eo(e)}))},uc.prototype.Do=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",(function(n){return e.Hs.Do(n,t)}))},uc.prototype.Ro=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.$s.Ro(e)}))},uc.prototype.So=function(t){var e=this,n=t.ai,r=this.Qs;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(i){var o=e.Ys.wo({mo:!0});r=e.Qs;var s=[];ei(t.Ei,(function(t,o){var a=r.get(t);if(a){s.push(e.$s.Ao(i,o.Oi,t).next((function(){return e.$s.Co(i,o.ki,t)})));var u=o.resumeToken;if(0<u.P()){var c=a.li(u,n).fi(i.Po);r=r.dt(t,c),uc.ko(a,c,o)&&s.push(e.$s.No(i,c))}}}));var a=xa(),u=Fa();if(t.Ri.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(i,u).next((function(r){t.Ri.forEach((function(u,c){var h=r.get(u);c instanceof Ss&&c.version.isEqual(Pi.MIN)?(o.Us(u,n),a=a.dt(u,c)):null==h||0<c.version.B(h.version)||0===c.version.B(h.version)&&h.hasPendingWrites?(Su(!Pi.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),o.Fs(c,n),a=a.dt(u,c)):Eu("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version),t.Si.has(u)&&s.push(e.persistence.Ks.Oo(i,u))}))}))),!n.isEqual(Pi.MIN)){var c=e.$s.Ro(i).next((function(t){return Su(0<=n.B(t),"Watch stream reverted to previous snapshot?? "+n+" < "+t),e.$s.Fo(i,i.Po,n)}));s.push(c)}return Bu.Vu(s).next((function(){return o.apply(i)})).next((function(){return e.to.Vo(i,a)}))})).then((function(t){return e.Qs=r,t}))},uc.ko=function(t,e,n){return Su(0<e.resumeToken.P(),"Attempted to persist target data with no resume token"),0===t.resumeToken.P()||e.ai.M()-t.ai.M()>=this.Uo||0<n.ki.size+n.Ni.size+n.Oi.size},uc.prototype.xo=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.Ms.Is(i.Gr,o),this.Ms.Ds(i.Wr,o),!i.fromCache){var s=this.Qs.get(o);Su(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.ai,u=s.di(a);this.Qs=this.Qs.dt(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(n){return Bu.forEach(t,(function(t){return Bu.forEach(t.Wr,(function(t){return e.persistence.Ks.Ts(n,t)}))}))}))},uc.prototype.jo=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.Hs.Lo(n,t)}))},uc.prototype.qo=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.to.Bo(n,t)}))},uc.prototype.Mo=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.$s.Qo(n,t).next((function(i){return i?(r=i,Bu.resolve(r)):e.$s.Go(n).next((function(i){return r=new da(t,i,0,n.Po),e.$s.Wo(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.Qs.get(n.targetId)&&(e.Qs=e.Qs.dt(n.targetId,n),e.Gs.set(t,n.targetId)),n}))},uc.prototype.Qo=function(t,e){var n=this.Gs.get(e);return void 0!==n?Bu.resolve(this.Qs.get(n)):this.$s.Qo(t,e)},uc.prototype.zo=function(t,e){var n=this,r=this.Qs.get(t);Su(null!==r,"Tried to release nonexistent target: "+t);var i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.Ms.Rs(t);return e?Bu.resolve():Bu.forEach(o,(function(t){return n.persistence.Ks.Ts(i,t)})).next((function(){n.persistence.Ks.removeTarget(i,r)}))})).then((function(){n.Qs=n.Qs.remove(t),n.Gs.delete(r.target)}))},uc.prototype.Ko=function(t,e){var n=this,r=Pi.MIN,i=Fa();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Qo(o,t.Yn()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.$s.Ho(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.Bs.Jo(o,t,e?r:Pi.MIN,e?i:Fa())})).next((function(t){return{documents:t,Yo:i}}))}))},uc.prototype.Xo=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly",(function(n){return e.$s.Ho(n,t)}))},uc.prototype.$o=function(){return this.persistence.$o()},uc.prototype.Zo=function(t){this.Hs.th(t)},uc.prototype.nh=function(t){this.persistence.nh(t)},uc.prototype.bo=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Bu.resolve();return o.forEach((function(r){s=s.next((function(){return n.xs(t,r)})).next((function(t){var o=t,s=e.Br.get(r);Su(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.B(s)<0)&&((o=i.zt(r,o,e))?n.Fs(o,e.qr):Su(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),s.next((function(){return r.Hs.Io(t,i)}))},uc.prototype.os=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.ws(n,e.Qs)}))},uc.prototype.ih=function(t){var e=this,n=this.Qs.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.$s.be(n,t).next((function(t){return t?t.target:null}))}))},uc.prototype.eh=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Ys.eh(e,t.Ws)})).then((function(e){var n=e.rh,r=e.readTime;return t.Ws=r,n}))},uc.prototype.eo=function(){return c(this,void 0,void 0,(function(){var t,e=this;return h(this,(function(n){switch(n.label){case 0:return[4,(t=this).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Ys.uh(t)}))];case 1:return t.Ws=n.sent(),[2]}}))}))},uc.Uo=3e8,uc);function uc(t,e,n){this.persistence=t,this.Bs=e,this.Ms=new ic,this.Qs=new Fi(Ou),this.Gs=new Uu((function(t){return t.canonicalId()})),this.Ws=Pi.MIN,Su(t.ss,"LocalStore was passed an unstarted persistence implementation"),this.persistence.Ks.zs(this.Ms),this.Hs=t.Js(n),this.Ys=t.Xs(),this.$s=t.Zs(),this.to=new Lc(this.Ys,this.Hs,this.persistence.no()),this.Bs.io(this.to)}function cc(){this.ks=new Uu((function(t){return t.toString()})),this.Ns=!1}function hc(t,e){this.key=t,this.Ps=e}function lc(){this.bs=new no(oc.Rn),this.ps=new no(oc.ys)}function fc(t,e){this.hs=t,this.params=e}function pc(t,e){this.ns=t,this.$r=e,this.es=!1,this.rs=null}function dc(t,e,n){this.Wu=t,this.zu=e,this.Ku=n}function vc(t){this.xu=t,this.buffer=new no(Qu),this.ju=0}function yc(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){if(t.code!==Fr.FAILED_PRECONDITION||t.message!==xc)throw t;return Eu("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function mc(t,e){return Su(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function gc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function wc(t,e){return"firestore_targets_"+t+"_"+e}var bc=(Cc.sh=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new qr(r.error.code,r.error.message)),i?new Cc(t,e,r.state,o):(Tu("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},Cc.prototype.oh=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Cc),Ic=(Dc.sh=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new qr(n.error.code,n.error.message)),r?new Dc(t,n.state,i):(Tu("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},Dc.prototype.oh=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Dc),Ec=(Oc.sh=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ba(),o=0;r&&o<n.activeTargetIds.length;++o)r=zs(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Oc(t,i):(Tu("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},Oc),Tc=(_c.sh=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new _c(e.clientId,e.onlineState):(Tu("SharedClientState","Failed to parse online state: "+t),null)},_c),Nc=(kc.prototype.hh=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},kc.prototype.ah=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},kc.prototype.oh=function(){var t={activeTargetIds:this.activeTargetIds.nt(),updateTimeMs:Date.now()};return JSON.stringify(t)},kc),Ac=(Sc.ph=function(t){return!(!t.window||null==t.window.localStorage)},Sc.prototype.start=function(){return c(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,f=this;return h(this,(function(h){switch(h.label){case 0:return Su(!this.ss,"WebStorageSharedClientState already started"),Su(null!==this.dh,"syncEngine property must be set before calling start()"),Su(null!==this.vh,"onlineStateHandler property must be set before calling start()"),[4,this.dh.$o()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.lh&&(i=this.getItem(mc(this.persistenceKey,r)))&&(o=Ec.sh(r,i))&&(this.wh[o.clientId]=o);for(this.Rh(),(s=this.storage.getItem(this.Dh))&&(a=this.Sh(s))&&this.Ah(a),u=0,c=this.bh;u<c.length;u++)l=c[u],this.gh(l);return this.bh=[],this.platform.window.addEventListener("unload",(function(){return f.shutdown()})),this.ss=!0,[2]}}))}))},Sc.prototype.Yr=function(t){this.setItem(this._h,JSON.stringify(t))},Sc.prototype.Ch=function(){var t=Ba();return ni(this.wh,(function(e,n){t=t.Qt(n.activeTargetIds)})),t},Sc.prototype.Ph=function(t){for(var e in this.wh)if(this.wh.hasOwnProperty(e)&&this.wh[e].activeTargetIds.has(t))return!0;return!1},Sc.prototype.kh=function(t){this.Nh(t,"pending")},Sc.prototype.Oh=function(t,e,n){this.Nh(t,e,n),this.Fh(t)},Sc.prototype.Vh=function(t){var e="not-current";if(this.Ph(t)){var n=this.storage.getItem(wc(this.persistenceKey,t));if(n){var r=Ic.sh(t,n);r&&(e=r.state)}}return this.Uh.hh(t),this.Rh(),e},Sc.prototype.xh=function(t){this.Uh.ah(t),this.Rh()},Sc.prototype.jh=function(t){return this.Uh.activeTargetIds.has(t)},Sc.prototype.Lh=function(t){this.removeItem(wc(this.persistenceKey,t))},Sc.prototype.qh=function(t,e,n){this.Bh(t,e,n)},Sc.prototype.ro=function(t,e,n){var r=this;e.forEach((function(t){r.Fh(t)})),this.currentUser=t,n.forEach((function(t){r.kh(t)}))},Sc.prototype.Mh=function(t){this.Qh(t)},Sc.prototype.shutdown=function(){this.ss&&(this.platform.window.removeEventListener("storage",this.mh),this.removeItem(this.yh),this.ss=!1)},Sc.prototype.getItem=function(t){var e=this.storage.getItem(t);return Eu("SharedClientState","READ",t,e),e},Sc.prototype.setItem=function(t,e){Eu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},Sc.prototype.removeItem=function(t){Eu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},Sc.prototype.gh=function(t){var e=this;if(t.storageArea===this.storage){if(Eu("SharedClientState","EVENT",t.key,t.newValue),t.key===this.yh)return void Tu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fh.ou((function(){return c(e,void 0,void 0,(function(){var e,n,r,i,o,s;return h(this,(function(a){if(!this.ss)return this.bh.push(t),[2];if(null===t.key)return[2];if(this.Ih.test(t.key)){if(null==t.newValue)return n=this.Gh(t.key),[2,this.Wh(n,null)];if(e=this.zh(t.key,t.newValue))return[2,this.Wh(e.clientId,e)]}else if(this.Th.test(t.key)){if(null!==t.newValue&&(r=this.Kh(t.key,t.newValue)))return[2,this.Hh(r)]}else if(this.Eh.test(t.key)){if(null!==t.newValue&&(i=this.Jh(t.key,t.newValue)))return[2,this.Yh(i)]}else if(t.key===this.Dh){if(null!==t.newValue&&(o=this.Sh(t.newValue)))return[2,this.Ah(o)]}else t.key===this._h&&(Su(!!this.Kr,"Missing sequenceNumberHandler"),(s=function(t){var e=Vu.Xr;if(null!=t)try{var n=JSON.parse(t);Su("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){Tu("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==Vu.Xr&&this.Kr(s));return[2]}))}))}))}},Object.defineProperty(Sc.prototype,"Uh",{get:function(){return this.wh[this.lh]},enumerable:!0,configurable:!0}),Sc.prototype.Rh=function(){this.setItem(this.yh,this.Uh.oh())},Sc.prototype.Nh=function(t,e,n){var r=new bc(this.currentUser,t,e,n),i=gc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.oh())},Sc.prototype.Fh=function(t){var e=gc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},Sc.prototype.Qh=function(t){var e={clientId:this.lh,onlineState:t};this.storage.setItem(this.Dh,JSON.stringify(e))},Sc.prototype.Bh=function(t,e,n){var r=wc(this.persistenceKey,t),i=new Ic(t,e,n);this.setItem(r,i.oh())},Sc.prototype.Gh=function(t){var e=this.Ih.exec(t);return e?e[1]:null},Sc.prototype.zh=function(t,e){var n=this.Gh(t);return Su(null!==n,"Cannot parse client state key '"+t+"'"),Ec.sh(n,e)},Sc.prototype.Kh=function(t,e){var n=this.Th.exec(t);Su(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return bc.sh(new Vr(i),r,e)},Sc.prototype.Jh=function(t,e){var n=this.Eh.exec(t);Su(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ic.sh(r,e)},Sc.prototype.Sh=function(t){return Tc.sh(t)},Sc.prototype.Hh=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return t.user.uid!==this.currentUser.uid?(Eu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.dh.Xh(t.batchId,t.state,t.error)]}))}))},Sc.prototype.Yh=function(t){return this.dh.$h(t.targetId,t.state,t.error)},Sc.prototype.Wh=function(t,e){var n=this,r=this.Ch();e?this.wh[t]=e:delete this.wh[t];var i=this.Ch(),o=[],s=[];return i.forEach((function(t){return c(n,void 0,void 0,(function(){return h(this,(function(e){return r.has(t)||o.push(t),[2]}))}))})),r.forEach((function(t){return c(n,void 0,void 0,(function(){return h(this,(function(e){return i.has(t)||s.push(t),[2]}))}))})),this.dh.Zh(o,s)},Sc.prototype.Ah=function(t){this.wh[t.clientId]&&this.vh(t.onlineState)},Sc);function Sc(t,e,n,r,i){if(this.fh=t,this.platform=e,this.persistenceKey=n,this.lh=r,this.dh=null,this.vh=null,this.Kr=null,this.wh={},this.mh=this.gh.bind(this),this.ss=!1,this.bh=[],!Sc.ph(this.platform))throw new qr(Fr.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.yh=mc(this.persistenceKey,this.lh),this._h="firestore_sequence_number_"+this.persistenceKey,this.wh[this.lh]=new Nc,this.Ih=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Th=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Eh=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Dh="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.mh)}function kc(){this.activeTargetIds=Ba()}function _c(t,e){this.clientId=t,this.onlineState=e}function Oc(t,e){this.clientId=t,this.activeTargetIds=e}function Dc(t,e,n){this.targetId=t,this.state=e,Su(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}function Cc(t,e,n,r){this.user=t,this.batchId=e,this.state=n,Su(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var Rc=(Fc.prototype.kh=function(t){},Fc.prototype.Oh=function(t,e,n){},Fc.prototype.Vh=function(t){return this.tc.hh(t),this.nc[t]||"not-current"},Fc.prototype.qh=function(t,e,n){this.nc[t]=e},Fc.prototype.xh=function(t){this.tc.ah(t)},Fc.prototype.jh=function(t){return this.tc.activeTargetIds.has(t)},Fc.prototype.Lh=function(t){delete this.nc[t]},Fc.prototype.Ch=function(){return this.tc.activeTargetIds},Fc.prototype.Ph=function(t){return this.tc.activeTargetIds.has(t)},Fc.prototype.start=function(){return this.tc=new Nc,Promise.resolve()},Fc.prototype.ro=function(t,e,n){},Fc.prototype.Mh=function(t){},Fc.prototype.shutdown=function(){},Fc.prototype.Yr=function(t){},Fc),xc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pc=(Vc.prototype.ec=function(t){this.ic.push(t)},Vc.prototype.rc=function(){this.ic.forEach((function(t){return t()}))},Vc),Lc=(jc.prototype.Bo=function(t,e){var n=this;return this.Hs.oc(t,e).next((function(r){return n.hc(t,e,r)}))},jc.prototype.hc=function(t,e,n){return this.uc.xs(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Wt(e,t);return t}))},jc.prototype.cc=function(t,e,n){var r=Pa();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Wt(t,e);r=r.dt(t,e)})),r},jc.prototype.so=function(t,e){var n=this;return this.uc.getEntries(t,e).next((function(e){return n.Vo(t,e)}))},jc.prototype.Vo=function(t,e){var n=this;return this.Hs.ac(t,e).next((function(r){var i=n.cc(t,e,r),o=xa();return i.forEach((function(t,e){e=e||new Ss(t,Pi.q()),o=o.dt(t,e)})),o}))},jc.prototype.Jo=function(t,e,n){return e.Nn()?this.fc(t,e.path):e.ui()?this.lc(t,e,n):this.dc(t,e,n)},jc.prototype.fc=function(t,e){return this.Bo(t,new Vi(e)).next((function(t){var e=Ma();return t instanceof As&&(e=e.dt(t.key,t)),e}))},jc.prototype.lc=function(t,e,n){var r=this;Su(e.path.Y(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=Ma();return this.sc.vc(t,i).next((function(s){return Bu.forEach(s,(function(s){var a=e.Hn(s.child(i));return r.dc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.dt(t,e)}))}))})).next((function(){return o}))}))},jc.prototype.dc=function(t,e,n){var r,i,o=this;return this.uc.Jo(t,e,n).next((function(n){return r=n,o.Hs.wc(t,e)})).next((function(e){return i=e,o.mc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),l=u.Wt(h,h,o.En);r=l instanceof As?r.dt(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},jc.prototype.mc=function(t,e,n){for(var r=Fa(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Do&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.uc.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof As&&(c=c.dt(t,e))})),c}))},jc),Mc=(Uc.prototype.io=function(t){this.gc=t},Uc.prototype.Jo=function(t,e,n,r){var i=this;return Su(void 0!==this.gc,"setLocalDocumentsView() not called"),e.Jn()||n.isEqual(Pi.MIN)?this.bc(t,e):this.gc.so(t,r).next((function(o){var s=i.pc(e,o);return(e.ii()||e.ei())&&i.yc(e.Fn,s,r,n)?i.bc(t,e):(bu()<=0&&Eu("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.gc.Jo(t,e,n).next((function(t){return s.forEach((function(e){t=t.dt(e.key,e)})),t})))}))},Uc.prototype.pc=function(t,e){var n=new no((function(e,n){return t.Xn(e,n)}));return e.forEach((function(e,r){r instanceof As&&t.matches(r)&&(n=n.add(r))})),n},Uc.prototype.yc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.B(r))},Uc.prototype.bc=function(t,e){return bu()<=0&&Eu("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.gc.Jo(t,e,Pi.MIN)},Uc);function Uc(){}function jc(t,e,n){this.uc=t,this.Hs=e,this.sc=n}function Vc(){this.ic=[]}function Fc(){this.tc=new Nc,this.nc={},this.dh=null,this.vh=null,this.Kr=null}function qc(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=Gc(e)),e=Bc(t.get(n),e);return Gc(e)}function Bc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Gc(t){return t+""}function Hc(t){var e=t.length;if(Su(2<=e,"Invalid path "+t),2===e)return Su(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),Mi.rt;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Au('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Au('Invalid encoded resource path: "'+t+'"')}o=s+2}return new Mi(r)}var zc=(Xc.prototype.Ic=function(t,e){return this._c.add(e),Bu.resolve()},Xc.prototype.vc=function(t,e){return Bu.resolve(this._c.getEntries(e))},Xc),Wc=(Yc.prototype.add=function(t){Su(t.length%2==1,"Expected a collection path.");var e=t.$(),n=t.J(),r=this.index[e]||new no(Mi.W),i=!r.has(n);return this.index[e]=r.add(n),i},Yc.prototype.has=function(t){var e=t.$(),n=t.J(),r=this.index[e];return r&&r.has(n)},Yc.prototype.getEntries=function(t){return(this.index[t]||new no(Mi.W)).nt()},Yc),Kc=(Jc.prototype.Dc=function(t){return Bu.resolve(0===this.Hs.length)},Jc.prototype.vo=function(t,e,n){var r=e.batchId,i=this.Rc(r,"acknowledged");Su(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.Hs[i];return Su(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Bu.resolve()},Jc.prototype.Eo=function(t){return Bu.resolve(this.lastStreamToken)},Jc.prototype.Do=function(t,e){return this.lastStreamToken=e,Bu.resolve()},Jc.prototype.fo=function(t,e,n,r){Su(0!==r.length,"Mutation batches should not be empty");var i=this.Tc;this.Tc++,0<this.Hs.length&&Su(this.Hs[this.Hs.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Lu(i,e,n,r);this.Hs.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Ec=this.Ec.add(new oc(u.key,i)),this.sc.Ic(t,u.key.path.J())}return Bu.resolve(o)},Jc.prototype._o=function(t,e){return Bu.resolve(this.Sc(e))},Jc.prototype.do=function(t,e){var n=this.Sc(e);return Su(null!=n,"Failed to find local mutation batch."),Bu.resolve(n.keys())},Jc.prototype.Lo=function(t,e){var n=e+1,r=this.Ac(n),i=r<0?0:r;return Bu.resolve(this.Hs.length>i?this.Hs[i]:null)},Jc.prototype.To=function(){return Bu.resolve(0===this.Hs.length?-1:this.Tc-1)},Jc.prototype.uo=function(t){return Bu.resolve(this.Hs.slice())},Jc.prototype.oc=function(t,e){var n=this,r=new oc(e,0),i=new oc(e,Number.POSITIVE_INFINITY),o=[];return this.Ec.qt([r,i],(function(t){Su(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.Sc(t.Ps);Su(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Bu.resolve(o)},Jc.prototype.ac=function(t,e){var n=this,r=new no(Ou);return e.forEach((function(t){var e=new oc(t,0),i=new oc(t,Number.POSITIVE_INFINITY);n.Ec.qt([e,i],(function(e){Su(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.Ps)}))})),Bu.resolve(this.Cc(r))},Jc.prototype.wc=function(t,e){Su(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;Vi.ct(i)||(i=i.child(""));var o=new oc(new Vi(i),0),s=new no(Ou);return this.Ec.Bt((function(t){var e=t.key.path;return!!n.Z(e)&&(e.length===r&&(s=s.add(t.Ps)),!0)}),o),Bu.resolve(this.Cc(s))},Jc.prototype.Cc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Sc(t);null!==r&&n.push(r)})),n},Jc.prototype.Io=function(t,e){var n=this;Su(0===this.Rc(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.Hs.shift();var r=this.Ec;return Bu.forEach(e.mutations,(function(i){var o=new oc(i.key,e.batchId);return r=r.delete(o),n.Ks.Pc(t,i.key)})).next((function(){n.Ec=r}))},Jc.prototype.th=function(t){},Jc.prototype.Cs=function(t,e){var n=new oc(e,0),r=this.Ec.Mt(n);return Bu.resolve(e.isEqual(r&&r.key))},Jc.prototype.po=function(t){return 0===this.Hs.length&&Su(this.Ec.Y(),"Document leak -- detected dangling mutation references when queue is empty."),Bu.resolve()},Jc.prototype.Rc=function(t,e){var n=this.Ac(t);return Su(0<=n&&n<this.Hs.length,"Batches must exist to be "+e),n},Jc.prototype.Ac=function(t){return 0===this.Hs.length?0:t-this.Hs[0].batchId},Jc.prototype.Sc=function(t){var e=this.Ac(t);if(e<0||e>=this.Hs.length)return null;var n=this.Hs[e];return Su(n.batchId===t,"If found batch must match"),n},Jc);function Jc(t,e){this.sc=t,this.Ks=e,this.Hs=[],this.Tc=1,this.lastStreamToken=Ei.k,this.Ec=new no(oc.Rn)}function Yc(){this.index={}}function Xc(){this._c=new Wc}var $c,Qc,Zc,th,eh=(_h.prototype.Fs=function(t,e,n){Su(!n.isEqual(Pi.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.kc(e);return this.docs=this.docs.dt(r,{Nc:e,size:s,readTime:n}),this.size+=s-o,this.sc.Ic(t,r.path.J())},_h.prototype.Us=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},_h.prototype.xs=function(t,e){var n=this.docs.get(e);return Bu.resolve(n?n.Nc:null)},_h.prototype.getEntries=function(t,e){var n=this,r=Pa();return e.forEach((function(t){var e=n.docs.get(t);r=r.dt(t,e?e.Nc:null)})),Bu.resolve(r)},_h.prototype.Jo=function(t,e,n){Su(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Ma(),i=new Vi(e.path.child("")),o=this.docs._t(i);o.St();){var s=o.Rt(),a=s.key,u=s.value,c=u.Nc,h=u.readTime;if(!e.path.Z(a.path))break;h.B(n)<=0||c instanceof As&&e.matches(c)&&(r=r.dt(c.key,c))}return Bu.resolve(r)},_h.prototype.Oc=function(t,e){return Bu.forEach(this.docs,(function(t){return e(t)}))},_h.prototype.eh=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},_h.prototype.uh=function(t){return Bu.resolve(Pi.MIN)},_h.prototype.wo=function(t){return new _h.Fc(this)},_h.prototype.Vc=function(t){return Bu.resolve(this.size)},_h.Fc=(i(Oh,th=sc),Oh.prototype.qs=function(t){var e=this,n=[];return this.ks.forEach((function(r,i){i?n.push(e.Uc.Fs(t,i,e.readTime)):e.Uc.Us(r)})),Bu.Vu(n)},Oh.prototype.js=function(t,e){return this.Uc.xs(t,e)},Oh.prototype.Ls=function(t,e){return this.Uc.getEntries(t,e)},Oh),_h),nh=(kh.prototype.next=function(){var t=this.Lc;return this.Lc+=2,t},kh.prototype.after=function(t){return this.jc(t+2),this.next()},kh.prototype.jc=function(t){Su((1&t)===this.xc,"Cannot supply target ID from different generator ID"),this.Lc=t},kh.qc=function(){return new kh(0,2)},kh.Bc=function(){return new kh(1)},kh),rh=(Sh.prototype.oe=function(t,e){return this.Mc.forEach((function(t,n){return e(n)})),Bu.resolve()},Sh.prototype.Ro=function(t){return Bu.resolve(this.lastRemoteSnapshotVersion)},Sh.prototype.zc=function(t){return Bu.resolve(this.Qc)},Sh.prototype.Go=function(t){var e=this.Wc.after(this.highestTargetId);return this.highestTargetId=e,Bu.resolve(e)},Sh.prototype.Fo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Qc&&(this.Qc=e),Bu.resolve()},Sh.prototype.Kc=function(t){this.Mc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.Qc&&(this.Qc=t.sequenceNumber)},Sh.prototype.Wo=function(t,e){return Su(!this.Mc.has(e.target),"Adding a target that already exists"),this.Kc(e),this.targetCount+=1,Bu.resolve()},Sh.prototype.No=function(t,e){return Su(this.Mc.has(e.target),"Updating a non-existent target"),this.Kc(e),Bu.resolve()},Sh.prototype.Hc=function(t,e){return Su(0<this.targetCount,"Removing a target from an empty cache"),Su(this.Mc.has(e.target),"Removing a non-existent target from the cache"),this.Mc.delete(e.target),this.Gc.Rs(e.targetId),this.targetCount-=1,Bu.resolve()},Sh.prototype.ds=function(t,e,n){var r=this,i=0,o=[];return this.Mc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Mc.delete(s),o.push(r.Jc(t,a.targetId)),i++)})),Bu.Vu(o).next((function(){return i}))},Sh.prototype.Yc=function(t){return Bu.resolve(this.targetCount)},Sh.prototype.Qo=function(t,e){var n=this.Mc.get(e)||null;return Bu.resolve(n)},Sh.prototype.be=function(t,e){return Au("Not yet implemented.")},Sh.prototype.Co=function(t,e,n){this.Gc.Is(e,n);var r=this.persistence.Ks,i=[];return r&&e.forEach((function(e){i.push(r._s(t,e))})),Bu.Vu(i)},Sh.prototype.Ao=function(t,e,n){this.Gc.Ds(e,n);var r=this.persistence.Ks,i=[];return r&&e.forEach((function(e){i.push(r.Ts(t,e))})),Bu.Vu(i)},Sh.prototype.Jc=function(t,e){return this.Gc.Rs(e),Bu.resolve()},Sh.prototype.Ho=function(t,e){var n=this.Gc.As(e);return Bu.resolve(n)},Sh.prototype.Cs=function(t,e){return Bu.resolve(this.Gc.Cs(e))},Sh),ih="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",oh=(Ah.prototype.shutdown=function(){return this.Zc=!1,Promise.resolve()},Object.defineProperty(Ah.prototype,"ss",{get:function(){return this.Zc},enumerable:!0,configurable:!0}),Ah.prototype.$o=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){return[2,[this.clientId]]}))}))},Ah.prototype.na=function(t){return t(!0)},Ah.prototype.ia=function(){},Ah.prototype.nh=function(t){},Ah.prototype.no=function(){return this.sc},Ah.prototype.Js=function(t){var e=this.Xc[t.i()];return e||(e=new Kc(this.sc,this.Ks),this.Xc[t.i()]=e),e},Ah.prototype.Zs=function(){return this.$s},Ah.prototype.Xs=function(){return this.uc},Ah.prototype.runTransaction=function(t,e,n){var r=this;Eu("MemoryPersistence","Starting transaction:",t);var i=new sh(this.$c.next());return this.Ks.ea(),n(i).next((function(t){return r.Ks.ra(i).next((function(){return t}))})).Ou().then((function(t){return i.rc(),t}))},Ah.prototype.ua=function(t,e){return Bu.Uu((n=this.Xc,r=[],ni(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.Cs(t,e)}})));var n,r},Ah),sh=(i(Nh,Zc=Pc),Nh),ah=(Object.defineProperty(Th.prototype,"ha",{get:function(){if(this.oa)return this.oa;throw Au("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),Th.prototype.zs=function(t){this.sa=t},Th.prototype._s=function(t,e){return this.ha.delete(e),Bu.resolve()},Th.prototype.Ts=function(t,e){return this.ha.add(e),Bu.resolve()},Th.prototype.Pc=function(t,e){return this.ha.add(e),Bu.resolve()},Th.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.Zs();return r.Ho(t,e.targetId).next((function(t){t.forEach((function(t){return n.ha.add(t)}))})).next((function(){return r.Hc(t,e)}))},Th.prototype.ea=function(){this.oa=new Set},Th.prototype.ra=function(t){var e=this,n=this.persistence.Xs().wo();return Bu.forEach(this.ha,(function(r){return e.ca(t,r).next((function(t){t||n.Us(r)}))})).next((function(){return e.oa=null,n.apply(t)}))},Th.prototype.Oo=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.ha.delete(e):n.ha.add(e)}))},Th.prototype.ta=function(t){return 0},Th.prototype.ca=function(t,e){var n=this;return Bu.Uu([function(){return n.persistence.Zs().Cs(t,e)},function(){return n.persistence.ua(t,e)},function(){return Bu.resolve(n.sa.Cs(e))}])},Th),uh=(Eh.prototype.initialize=function(t,e,n,r,i,o){if(o.aa)throw new qr(Fr.FAILED_PRECONDITION,ih);return this.clientId=r,Promise.resolve()},Eh.prototype.fa=function(){var t=!1;return{ss:t,start:function(){return t=!0},stop:function(){return t=!1}}},Eh.prototype.la=function(){return Su(!!this.clientId,"initialize() not called"),new oh(this.clientId,(function(t){return new ah(t)}))},Eh.prototype.da=function(){return new Rc},Eh.prototype.clearPersistence=function(){throw new qr(Fr.FAILED_PRECONDITION,ih)},Eh),ch=(Ih.prototype.reset=function(){this.ga=0},Ih.prototype.ya=function(){this.ga=this.ma},Ih.prototype._a=function(t){var e=this;this.cancel();var n=Math.floor(this.ga+this.Ia()),r=Math.max(0,Date.now()-this.pa),i=Math.max(0,n-r);0<this.ga&&Eu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ga+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ba=this.fh.yu(this.Zr,i,(function(){return e.pa=Date.now(),t()})),this.ga*=this.wa,this.ga<this.va&&(this.ga=this.va),this.ga>this.ma&&(this.ga=this.ma)},Ih.prototype.cancel=function(){null!==this.ba&&(this.ba.cancel(),this.ba=null)},Ih.prototype.Ia=function(){return(Math.random()-.5)*this.ga},Ih),hh=(bh.prototype.Aa=function(){return 1===this.state||2===this.state||4===this.state},bh.prototype.Ca=function(){return 2===this.state},bh.prototype.start=function(){3!==this.state?(Su(0===this.state,"Already started"),this.auth()):this.Pa()},bh.prototype.stop=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.Aa()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},bh.prototype.ka=function(){Su(!this.Aa(),"Can only inhibit backoff in a stopped state"),this.state=0,this.Sa.reset()},bh.prototype.Na=function(){var t=this;this.Ca()&&null===this.Ra&&(this.Ra=this.fh.yu(this.Ta,6e4,(function(){return t.Oa()})))},bh.prototype.Fa=function(t){this.Va(),this.stream.send(t)},bh.prototype.Oa=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){return this.Ca()?[2,this.close(0)]:[2]}))}))},bh.prototype.Va=function(){this.Ra&&(this.Ra.cancel(),this.Ra=null)},bh.prototype.close=function(t,e){return c(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return Su(this.Aa(),"Only started streams should be closed."),Su(3===t||Gs(e),"Can't provide an error when not in an error state."),this.Va(),this.Sa.cancel(),this.Da++,3!==t?this.Sa.reset():e&&e.code===Fr.RESOURCE_EXHAUSTED?(Tu(e.toString()),Tu("Using maximum backoff delay to prevent overloading the backend."),this.Sa.ya()):e&&e.code===Fr.UNAUTHENTICATED&&this.Ea.l(),null!==this.stream&&(this.Ua(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.xa(e)];case 1:return n.sent(),[2]}}))}))},bh.prototype.Ua=function(){},bh.prototype.auth=function(){var t=this;Su(0===this.state,"Must be in initial state to auth"),this.state=1;var e=this.ja(this.Da),n=this.Da;this.Ea.getToken().then((function(e){t.Da===n&&t.La(e)}),(function(n){e((function(){var e=new qr(Fr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.qa(e)}))}))},bh.prototype.La=function(t){var e=this;Su(1===this.state,"Trying to start stream in a non-starting state");var n=this.ja(this.Da);this.stream=this.Ba(t),this.stream.Ma((function(){n((function(){return Su(1===e.state,"Expected stream to be in state Starting, but was "+e.state),e.state=2,e.listener.Ma()}))})),this.stream.xa((function(t){n((function(){return e.qa(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},bh.prototype.Pa=function(){var t=this;Su(3===this.state,"Should only perform backoff when in Error state"),this.state=4,this.Sa._a((function(){return c(t,void 0,void 0,(function(){return h(this,(function(t){return Su(4===this.state,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),Su(this.Aa(),"PersistentStream should have started"),[2]}))}))}))},bh.prototype.qa=function(t){return Su(this.Aa(),"Can't handle server close on non-started stream"),Eu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},bh.prototype.ja=function(t){var e=this;return function(n){e.fh.ou((function(){return e.Da===t?n():(Eu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},bh),lh=(i(wh,Qc=hh),wh.prototype.Ba=function(t){return this.connection.Qa("Listen",t)},wh.prototype.onMessage=function(t){this.Sa.reset();var e=this.serializer.Xe(t),n=this.serializer.Ze(t);return this.listener.Ga(e,n)},wh.prototype.watch=function(t){var e={};e.database=this.serializer.Ue,e.addTarget=this.serializer.Yn(t);var n=this.serializer._r(t);n&&(e.labels=n),this.Fa(e)},wh.prototype.Wa=function(t){var e={};e.database=this.serializer.Ue,e.removeTarget=t,this.Fa(e)},wh),fh=(i(gh,$c=hh),Object.defineProperty(gh.prototype,"Ka",{get:function(){return this.za},enumerable:!0,configurable:!0}),gh.prototype.start=function(){this.za=!1,$c.prototype.start.call(this)},gh.prototype.Ua=function(){this.za&&this.Ha([])},gh.prototype.Ba=function(t){return this.connection.Qa("Write",t)},gh.prototype.onMessage=function(t){if(Su(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.De(t.streamToken),this.za){this.Sa.reset();var e=this.serializer.cr(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Ja(n,e)}return Su(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.za=!0,this.listener.Ya()},gh.prototype.Xa=function(){Su(this.Ca(),"Writing handshake requires an opened stream"),Su(!this.za,"Handshake already completed");var t={};t.database=this.serializer.Ue,this.Fa(t)},gh.prototype.Ha=function(t){var e=this;Su(this.Ca(),"Writing mutations requires an opened stream"),Su(this.za,"Handshake must be complete before writing mutations"),Su(0<this.lastStreamToken.P(),"Trying to write mutation without a token");var n={streamToken:this.serializer.Ee(this.lastStreamToken),writes:t.map((function(t){return e.serializer.tr(t)}))};this.Fa(n)},gh),ph=(mh.prototype.$a=function(t){return new fh(this.fh,this.connection,this.credentials,this.serializer,t)},mh.prototype.Za=function(t){return new lh(this.fh,this.connection,this.credentials,this.serializer,t)},mh.prototype.commit=function(t){var e=this,n={database:this.serializer.Ue,writes:t.map((function(t){return e.serializer.tr(t)}))};return this.tf("Commit",n).then((function(t){return e.serializer.cr(t.writeResults,t.commitTime)}))},mh.prototype.lookup=function(t){var e=this,n={database:this.serializer.Ue,documents:t.map((function(t){return e.serializer.ke(t)}))};return this.nf("BatchGetDocuments",n).then((function(n){var r=xa();n.forEach((function(t){var n=e.serializer.He(t);r=r.dt(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);Su(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},mh.prototype.tf=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.tf(t,e,r)})).catch((function(t){throw t.code===Fr.UNAUTHENTICATED&&n.credentials.l(),t}))},mh.prototype.nf=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.nf(t,e,r)})).catch((function(t){throw t.code===Fr.UNAUTHENTICATED&&n.credentials.l(),t}))},mh),dh=(yh.documentId=function(){return yh.ef},yh.prototype.isEqual=function(t){if(!(t instanceof yh))throw gi("isEqual","FieldPath",1,t);return this.if.isEqual(t.if)},yh.ef=new yh(ji.ot().it()),yh),vh=new RegExp("[~\\*/\\[\\]]");function yh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new qr(Fr.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Ii(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(ui("FieldPath","string",n,t[n]),0===t[n].length)throw new qr(Fr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.if=new ji(t)}function mh(t,e,n,r){this.fh=t,this.connection=e,this.credentials=n,this.serializer=r}function gh(t,e,n,r,i){var o=$c.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this;return o.serializer=r,o.za=!1,o.lastStreamToken=Ei.k,o}function wh(t,e,n,r,i){var o=Qc.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this;return o.serializer=r,o}function bh(t,e,n,r,i,o){this.fh=t,this.Ta=n,this.connection=r,this.Ea=i,this.listener=o,this.state=0,this.Da=0,this.Ra=null,this.stream=null,this.Sa=new ch(t,e)}function Ih(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fh=t,this.Zr=e,this.va=n,this.wa=r,this.ma=i,this.ga=0,this.ba=null,this.pa=Date.now(),this.reset()}function Eh(){}function Th(t){this.persistence=t,this.sa=null,this.oa=null}function Nh(t){var e=Zc.call(this)||this;return e.Po=t,e}function Ah(t,e){var n=this;this.clientId=t,this.Xc={},this.$c=new Vu(0),this.Zc=!1,this.Zc=!0,this.Ks=e(this),this.$s=new rh(this),this.sc=new zc,this.uc=new eh(this.sc,(function(t){return n.Ks.ta(t)}))}function Sh(t){this.persistence=t,this.Mc=new Uu((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=Pi.MIN,this.highestTargetId=0,this.Qc=0,this.Gc=new ic,this.targetCount=0,this.Wc=nh.qc()}function kh(t,e){Su((1&(this.xc=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.jc(void 0!==e?e:this.xc)}function _h(t,e){this.sc=t,this.kc=e,this.docs=new Fi(Vi.W),this.size=0}function Oh(t){var e=th.call(this)||this;return e.Uc=t,e}var Dh,Ch,Rh,xh,Ph,Lh=(Qh.delete=function(){return ii("FieldValue.delete",arguments),Mh.instance},Qh.serverTimestamp=function(){return ii("FieldValue.serverTimestamp",arguments),Uh.instance},Qh.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return si("FieldValue.arrayUnion",arguments,1),new jh(t)},Qh.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return si("FieldValue.arrayRemove",arguments,1),new Vh(t)},Qh.increment=function(t){return ui("FieldValue.increment","number",1,t),oi("FieldValue.increment",arguments,1),new Fh(t)},Qh.prototype.isEqual=function(t){return this===t},Qh),Mh=(i($h,Ph=Lh),$h.instance=new $h,$h),Uh=(i(Xh,xh=Lh),Xh.instance=new Xh,Xh),jh=(i(Yh,Rh=Lh),Yh),Vh=(i(Jh,Ch=Lh),Jh),Fh=(i(Kh,Dh=Lh),Kh),qh=Qr(Lh,"Use FieldValue.<field>() instead."),Bh=/^__.*__$/,Gh=(Wh.prototype.hf=function(t,e){var n=[];return null!==this.sn?n.push(new Do(t,this.data,this.sn,e)):n.push(new Oo(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Co(t,this.fieldTransforms)),n},Wh),Hh=(zh.prototype.hf=function(t,e){var n=[new Do(t,this.data,this.sn,e)];return 0<this.fieldTransforms.length&&n.push(new Co(t,this.fieldTransforms)),n},zh);function zh(t,e,n){this.data=t,this.sn=e,this.fieldTransforms=n}function Wh(t,e,n){this.data=t,this.sn=e,this.fieldTransforms=n}function Kh(t){var e=Dh.call(this,"FieldValue.increment")||this;return e.sf=t,e}function Jh(t){var e=Ch.call(this,"FieldValue.arrayRemove")||this;return e.uf=t,e}function Yh(t){var e=Rh.call(this,"FieldValue.arrayUnion")||this;return e.uf=t,e}function Xh(){return xh.call(this,"FieldValue.serverTimestamp")||this}function $h(){return Ph.call(this,"FieldValue.delete")||this}function Qh(t){this.rf=t}function Zh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Au("Unexpected case for UserDataSource: "+t)}}var tl=(il.prototype.lf=function(t){var e=null==this.path?null:this.path.child(t),n=new il(this.cf,this.methodName,e,!1,this.fieldTransforms,this.sn);return n.df(t),n},il.prototype.vf=function(t){var e=null==this.path?null:this.path.child(t),n=new il(this.cf,this.methodName,e,!1,this.fieldTransforms,this.sn);return n.ff(),n},il.prototype.wf=function(t){return new il(this.cf,this.methodName,null,!0,this.fieldTransforms,this.sn)},il.prototype.mf=function(t){var e=null===this.path||this.path.Y()?"":" (found in field "+this.path.toString()+")";return new qr(Fr.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},il.prototype.contains=function(t){return void 0!==this.sn.find((function(e){return t.Z(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.Z(e.field)}))},il.prototype.ff=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.df(this.path.get(t))},il.prototype.df=function(t){if(0===t.length)throw this.mf("Document fields must not be empty");if(Zh(this.cf)&&Bh.test(t))throw this.mf('Document fields cannot begin and end with "__"')},il),el=function(t,e){this.Dn=t,this.key=e},nl=(rl.prototype.bf=function(t,e){var n=new tl(0,t,ji.rt);sl("Data must be an object, but it was:",n,e);var r=this.pf(e,n);return new Gh(r,null,n.fieldTransforms)},rl.prototype.yf=function(t,e,n){var r=new tl(2,t,ji.rt);sl("Data must be an object, but it was:",r,e);var i,o,s=this.pf(e,r);if(n){for(var a=new no(ji.W),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof dh)l=h.if;else{if("string"!=typeof h)throw Au("Expected stringOrFieldPath to be a string or a FieldPath");l=ul(t,h)}if(!r.contains(l))throw new qr(Fr.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}i=Ao.Yt(a),o=r.fieldTransforms.filter((function(t){return i.$t(t.field)}))}else i=Ao.Xt(r.sn),o=r.fieldTransforms;return new Gh(s,i,o)},rl.prototype._f=function(t,e){var n=this,r=new tl(1,t,ji.rt);sl("Data must be an object, but it was:",r,e);var i=new no(ji.W),o=Is.wn();ni(e,(function(e,s){var a=ul(t,e),u=r.vf(a);if((s=n.If(s,u))instanceof Mh)i=i.add(a);else{var c=n.pf(s,u);null!=c&&(i=i.add(a),o.set(a,c))}}));var s=Ao.Yt(i);return new Hh(o.an(),s,r.fieldTransforms)},rl.prototype.Tf=function(t,e,n,r){var i=new tl(1,t,ji.rt),o=[al(t,e)],s=[n];if(r.length%2!=0)throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(al(t,r[a])),s.push(r[a+1]);var u=new no(ji.W),c=Is.wn();for(a=0;a<o.length;++a){var h=o[a],l=i.vf(h),f=this.If(s[a],l);if(f instanceof Mh)u=u.add(h);else{var p=this.pf(f,l);null!=p&&(u=u.add(h),c.set(h,p))}}var d=Ao.Yt(u);return new Hh(c.an(),d,i.fieldTransforms)},rl.prototype.Ef=function(t,e,n){void 0===n&&(n=!1);var r=new tl(n?4:3,t,ji.rt),i=this.pf(e,r);return Su(null!=i,"Parsed data should not be null."),Su(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},rl.prototype.If=function(t,e){try{return this.gf(t)}catch(t){var n=cl(t);throw e.mf(n)}},rl.prototype.pf=function(t,e){if(ol(t=this.If(t,e)))return sl("Unsupported field value:",e,t),this.Df(t,e);if(t instanceof Lh)return this.Rf(t,e),null;if(e.path&&e.sn.push(e.path),t instanceof Array){if(e.af&&4!==e.cf)throw e.mf("Nested arrays are not supported");return this.Sf(t,e)}return this.Af(t,e)},rl.prototype.Df=function(t,e){var n=this,r=new Fi(Ou);return ri(t)?e.path&&0<e.path.length&&e.sn.push(e.path):ni(t,(function(t,i){var o=n.pf(i,e.lf(t));null!=o&&(r=r.dt(t,o))})),new Is(r)},rl.prototype.Sf=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=o[i],a=this.pf(s,e.wf(r));null==a&&(a=Mo.yn),n.push(a),r++}return new Ts(n)},rl.prototype.Rf=function(t,e){if(!Zh(e.cf))throw e.mf(t.rf+"() can only be used with update() and set()");if(null===e.path)throw e.mf(t.rf+"() is not currently supported inside arrays");if(t instanceof Mh){if(2!==e.cf)throw 1===e.cf?(Su(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.mf("FieldValue.delete() can only appear at the top level of your update data")):e.mf("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.sn.push(e.path)}else if(t instanceof Uh)e.fieldTransforms.push(new So(e.path,io.instance));else if(t instanceof jh){var n=this.Cf(t.rf,t.uf),r=new oo(n);e.fieldTransforms.push(new So(e.path,r))}else if(t instanceof Vh){n=this.Cf(t.rf,t.uf);var i=new so(n);e.fieldTransforms.push(new So(e.path,i))}else if(t instanceof Fh){var o=this.Ef("FieldValue.increment",t.sf),s=new ao(o);e.fieldTransforms.push(new So(e.path,s))}else Au("Unknown FieldValue type: "+t)},rl.prototype.Af=function(t,e){if(null===t)return Mo.yn;if("number"==typeof t)return zs(t)?new ps(t):new ds(t);if("boolean"==typeof t)return Uo.of(t);if("string"==typeof t)return new vs(t);if(t instanceof Date)return new ys(xi.fromDate(t));if(t instanceof xi)return new ys(new xi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Ri)return new bs(t);if(t instanceof Di)return new gs(t);if(t instanceof el)return new ws(t.Dn,t.key);throw e.mf("Unsupported field value: "+vi(t))},rl.prototype.Cf=function(t,e){var n=this;return e.map((function(e,r){var i=new tl(3,t,ji.rt);return n.pf(e,i.wf(r))}))},rl);function rl(t){this.gf=t}function il(t,e,n,r,i,o){this.cf=t,this.methodName=e,this.path=n,this.af=r,void 0===i&&this.ff(),this.af=void 0!==r&&r,this.fieldTransforms=i||[],this.sn=o||[]}function ol(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof xi||t instanceof Ri||t instanceof Di||t instanceof el||t instanceof Lh)}function sl(t,e,n){if(!ol(n)||!di(n)){var r=vi(n);throw"an object"===r?e.mf(t+" a custom object"):e.mf(t+" "+r)}}function al(t,e){if(e instanceof dh)return e.if;if("string"==typeof e)return ul(t,e);throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function ul(t,e){try{return function(t){if(0<=t.search(vh))throw new qr(Fr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(dh.bind.apply(dh,l([void 0],t.split("."))))}catch(e){throw new qr(Fr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).if}catch(e){var n=cl(e);throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function cl(t){return t instanceof Error?t.message:t.toString()}function hl(t){this.key=t}function ll(t){this.key=t}var fl=(wl.prototype.lookup=function(t){return c(this,void 0,void 0,(function(){var e,n=this;return h(this,(function(r){switch(r.label){case 0:if(this.Vf(),0<this.mutations.length)throw new qr(Fr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.Pf.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof Ss||t instanceof As?n.Uf(t):Au("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},wl.prototype.set=function(t,e){this.write(e.hf(t,this.en(t))),this.Ff.add(t)},wl.prototype.update=function(t,e){try{this.write(e.hf(t,this.xf(t)))}catch(t){this.Of=t}this.Ff.add(t)},wl.prototype.delete=function(t){this.write([new Ro(t,this.en(t))]),this.Ff.add(t)},wl.prototype.commit=function(){return c(this,void 0,void 0,(function(){var t,e=this;return h(this,(function(n){switch(n.label){case 0:if(this.Vf(),this.Of)throw this.Of;return t=this.kf,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new xo(t,e.en(t)))})),[4,this.Pf.commit(this.mutations)];case 1:return n.sent(),this.Nf=!0,[2]}}))}))},wl.prototype.Uf=function(t){var e;if(t instanceof As)e=t.version;else{if(!(t instanceof Ss))throw Au("Document in a transaction was a "+t.constructor.name);e=Pi.q()}var n=this.kf.get(t.key);if(null!==n){if(!e.isEqual(n))throw new qr(Fr.ABORTED,"Document version changed between two reads.")}else this.kf=this.kf.dt(t.key,e)},wl.prototype.en=function(t){var e=this.kf.get(t);return!this.Ff.has(t)&&e?ko.updateTime(e):ko.NONE},wl.prototype.xf=function(t){var e=this.kf.get(t);if(this.Ff.has(t)||!e)return ko.exists(!0);if(e.isEqual(Pi.q()))throw new qr(Fr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ko.updateTime(e)},wl.prototype.write=function(t){this.Vf(),this.mutations=this.mutations.concat(t)},wl.prototype.Vf=function(){Su(!this.Nf,"A transaction object cannot be used after its update callback has been invoked.")},wl),pl=(gl.prototype.Bf=function(){var t=this;0===this.jf&&(this.Mf("Unknown"),Su(null===this.Lf,"onlineStateTimer shouldn't be started yet"),this.Lf=this.$r.yu("online_state_timeout",1e4,(function(){return t.Lf=null,Su("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Qf("Backend didn't respond within 10 seconds."),t.Mf("Offline"),Promise.resolve()})))},gl.prototype.Gf=function(t){"Online"===this.state?(this.Mf("Unknown"),Su(0===this.jf,"watchStreamFailures must be 0"),Su(null===this.Lf,"onlineStateTimer must be null")):(this.jf++,1<=this.jf&&(this.Wf(),this.Qf("Connection failed 1 times. Most recent error: "+t.toString()),this.Mf("Offline")))},gl.prototype.set=function(t){this.Wf(),this.jf=0,"Online"===t&&(this.qf=!1),this.Mf(t)},gl.prototype.Mf=function(t){t!==this.state&&(this.state=t,this.vh(t))},gl.prototype.Qf=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qf?(Tu(e),this.qf=!1):Eu("OnlineStateTracker",e)},gl.prototype.Wf=function(){null!==this.Lf&&(this.Lf.cancel(),this.Lf=null)},gl),dl=(ml.prototype.start=function(){return this.enableNetwork()},ml.prototype.enableNetwork=function(){return c(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.$f()?(t=this.ul,[4,this.zf.Eo()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.cl()?this.al():this.tl.set("Unknown"),[4,this.fl()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},ml.prototype.disableNetwork=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.ll()];case 1:return t.sent(),this.tl.set("Offline"),[2]}}))}))},ml.prototype.ll=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.ul.stop()];case 1:return t.sent(),[4,this.nl.stop()];case 2:return t.sent(),0<this.Kf.length&&(Eu("RemoteStore","Stopping write stream with "+this.Kf.length+" pending writes"),this.Kf=[]),this.dl(),[2]}}))}))},ml.prototype.shutdown=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return Eu("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.ll()];case 1:return t.sent(),this.Yf.shutdown(),this.tl.set("Unknown"),[2]}}))}))},ml.prototype.listen=function(t){Zr(this.Hf,t.targetId)||(this.Hf[t.targetId]=t,this.cl()?this.al():this.nl.Ca()&&this.vl(t))},ml.prototype.wl=function(t){Su(Zr(this.Hf,t),"unlisten called on target no currently watched: "+t),delete this.Hf[t],this.nl.Ca()&&this.ml(t),ri(this.Hf)&&(this.nl.Ca()?this.nl.Na():this.$f()&&this.tl.set("Unknown"))},ml.prototype.be=function(t){return this.Hf[t]||null},ml.prototype.ge=function(t){return this.dh.ge(t)},ml.prototype.vl=function(t){this.Jf.Ji(t.targetId),this.nl.watch(t)},ml.prototype.ml=function(t){this.Jf.Ji(t),this.nl.Wa(t)},ml.prototype.al=function(){Su(this.cl(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Jf=new Qa(this),this.nl.start(),this.tl.Bf()},ml.prototype.cl=function(){return this.$f()&&!this.nl.Aa()&&!ri(this.Hf)},ml.prototype.$f=function(){return this.isPrimary&&this.networkEnabled},ml.prototype.dl=function(){this.Jf=null},ml.prototype.il=function(){return c(this,void 0,void 0,(function(){var t=this;return h(this,(function(e){return ei(this.Hf,(function(e,n){t.vl(n)})),[2]}))}))},ml.prototype.el=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return void 0===t&&Su(!this.cl(),"Watch stream was stopped gracefully while still needed."),this.dl(),this.cl()?(this.tl.Gf(t),this.al()):this.tl.set("Unknown"),[2]}))}))},ml.prototype.rl=function(t,e){return c(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return this.tl.set("Online"),t instanceof za&&2===t.state&&t.cause?[2,this.gl(t)]:(t instanceof Ga?this.Jf.ee(t):t instanceof Ha?this.Jf.fe(t):(Su(t instanceof za,"Expected watchChange to be an instance of WatchTargetChange"),this.Jf.se(t)),e.isEqual(Pi.MIN)?[3,3]:[4,this.zf.Ro()]);case 1:return n=r.sent(),0<=e.B(n)?[4,this.bl(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},ml.prototype.bl=function(t){var e=this;Su(!t.isEqual(Pi.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.Jf.ve(t);return ei(n.Ei,(function(n,r){if(0<r.resumeToken.P()){var i=e.Hf[n];i&&(e.Hf[n]=i.li(r.resumeToken,t))}})),n.Di.forEach((function(t){var n=e.Hf[t];if(n){e.Hf[t]=n.li(Ei.k,n.ai),e.ml(t);var r=new da(n.target,t,1,n.sequenceNumber);e.vl(r)}})),this.dh.So(n)},ml.prototype.gl=function(t){var e=this;Su(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return c(e,void 0,void 0,(function(){return h(this,(function(e){return Zr(this.Hf,t)?(delete this.Hf[t],this.Jf.removeTarget(t),[2,this.dh.pl(t,n)]):[2]}))}))}))})),r},ml.prototype.fl=function(){return c(this,void 0,void 0,(function(){var t,e;return h(this,(function(n){switch(n.label){case 0:return this.yl()?(t=0<this.Kf.length?this.Kf[this.Kf.length-1].batchId:-1,[4,this.zf.jo(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.Kf.length&&this.ul.Na(),[3,4]);case 2:return this._l(e),[4,this.fl()];case 3:n.sent(),n.label=4;case 4:return this.Il()&&this.Tl(),[2]}}))}))},ml.prototype.yl=function(){return this.$f()&&this.Kf.length<10},ml.prototype.El=function(){return this.Kf.length},ml.prototype._l=function(t){Su(this.yl(),"addToWritePipeline called when pipeline is full"),this.Kf.push(t),this.ul.Ca()&&this.ul.Ka&&this.ul.Ha(t.mutations)},ml.prototype.Il=function(){return this.$f()&&!this.ul.Aa()&&0<this.Kf.length},ml.prototype.Tl=function(){Su(this.Il(),"startWriteStream() called when shouldStartWriteStream() is false."),this.ul.start()},ml.prototype.sl=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){return this.ul.Xa(),[2]}))}))},ml.prototype.hl=function(){var t=this;return this.zf.Do(this.ul.lastStreamToken).then((function(){for(var e=0,n=t.Kf;e<n.length;e++){var r=n[e];t.ul.Ha(r.mutations)}})).catch(yc)},ml.prototype.Ja=function(t,e){var n=this;Su(0<this.Kf.length,"Got result for empty write pipeline");var r=this.Kf.shift(),i=Mu.from(r,t,e,this.ul.lastStreamToken);return this.dh.Dl(i).then((function(){return n.fl()}))},ml.prototype.ol=function(t){return c(this,void 0,void 0,(function(){var e=this;return h(this,(function(n){return void 0===t&&Su(!this.Il(),"Write stream was stopped gracefully while still needed."),t&&0<this.Kf.length?[2,(this.ul.Ka?this.Rl(t):this.Sl(t)).then((function(){e.Il()&&e.Tl()}))]:[2]}))}))},ml.prototype.Sl=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){return Da(t.code)?(Eu("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.ul.lastStreamToken),this.ul.lastStreamToken=Ei.k,[2,this.zf.Do(Ei.k).catch(yc)]):[2]}))}))},ml.prototype.Rl=function(t){return c(this,void 0,void 0,(function(){var e,n=this;return h(this,(function(r){return Da(i=t.code)&&i!==Fr.ABORTED?(e=this.Kf.shift(),this.ul.ka(),[2,this.dh.Al(e.batchId,t).then((function(){return n.fl()}))]):[2];var i}))}))},ml.prototype.Cl=function(){return new fl(this.Pf)},ml.prototype.Zf=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.ll()];case 1:return t.sent(),this.tl.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},ml.prototype.Pl=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.$f()?(Eu("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Zf()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},ml.prototype.kl=function(t){return c(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return(this.isPrimary=t)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.ll()];case 3:e.sent(),this.tl.set("Unknown"),e.label=4;case 4:return[2]}}))}))},ml),vl=(Object.defineProperty(yl.prototype,"Ul",{get:function(){return this.Nl},enumerable:!0,configurable:!0}),yl.prototype.xl=function(t,e){var n=this,r=e?e.jl:new Ka,i=e?e.Vl:this.Vl,o=e?e.yi:this.yi,s=i,a=!1,u=this.query.ii()&&i.size===this.query.limit?i.last():null,c=this.query.ei()&&i.size===this.query.limit?i.first():null;if(t.bt((function(t,e){var h=i.get(t),l=e instanceof As?e:null;l&&(Su(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var f=!!h&&n.yi.has(h.key),p=!!l&&(l.rn||n.yi.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.Ll(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&0<n.query.Xn(l,u)||c&&n.query.Xn(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(o=l?(s=s.add(l),p?o.add(t):o.delete(t)):(s=s.delete(t),o.delete(t)))})),this.query.ii()||this.query.ei())for(;s.size>this.query.limit;){var h=this.query.ii()?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return Su(!a||!e,"View was refilled using docs that themselves needed refilling."),{Vl:s,jl:r,yc:a,yi:o}},yl.prototype.Ll=function(t,e){return t.rn&&e.hasCommittedMutations&&!e.rn},yl.prototype.qs=function(t,e,n){var r=this;Su(!t.yc,"Cannot apply changes that need a refill");var i=this.Vl;this.Vl=t.Vl,this.yi=t.yi;var o=t.jl.bi();o.sort((function(t,e){return i=t.type,o=e.type,n(i)-n(o)||r.query.Xn(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Au("Unknown ChangeType: "+t)}}var i,o})),this.ql(n);var s=e?this.Bl():[],a=0===this.Fl.size&&this.Pi?1:0,u=a!==this.Ol;return this.Ol=a,0!==o.length||u?{snapshot:new Ja(this.query,t.Vl,i,o,t.yi,0==a,u,!1),Ml:s}:{Ml:s}},yl.prototype.Ql=function(t){return this.Pi&&"Offline"===t?(this.Pi=!1,this.qs({Vl:this.Vl,jl:new Ka,yi:this.yi,yc:!1},!1)):{Ml:[]}},yl.prototype.Gl=function(t){return!this.Nl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).rn},yl.prototype.ql=function(t){var e=this;t&&(t.ki.forEach((function(t){return e.Nl=e.Nl.add(t)})),t.Ni.forEach((function(t){return Su(e.Nl.has(t),"Modified document "+t+" not found in view.")})),t.Oi.forEach((function(t){return e.Nl=e.Nl.delete(t)})),this.Pi=t.Pi)},yl.prototype.Bl=function(){var t=this;if(!this.Pi)return[];var e=this.Fl;this.Fl=Fa(),this.Vl.forEach((function(e){t.Gl(e.key)&&(t.Fl=t.Fl.add(e.key))}));var n=[];return e.forEach((function(e){t.Fl.has(e)||n.push(new ll(e))})),this.Fl.forEach((function(t){e.has(t)||n.push(new hl(t))})),n},yl.prototype.Wl=function(t){this.Nl=t.Yo,this.Fl=Fa();var e=this.xl(t.documents);return this.qs(e,!0)},yl.prototype.zl=function(){return Ja.Ti(this.query,this.Vl,this.yi,0===this.Ol)},yl);function yl(t,e){this.query=t,this.Nl=e,this.Ol=null,this.Pi=!1,this.Fl=Fa(),this.yi=Fa(),this.Vl=new Wa(t.Xn.bind(t))}function ml(t,e,n,r,i){var o=this;this.zf=t,this.Pf=e,this.Kf=[],this.Hf={},this.Jf=null,this.networkEnabled=!1,this.isPrimary=!1,this.Yf=i,this.Yf.Xf((function(t){n.ou((function(){return c(o,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.$f()?(Eu("RemoteStore","Restarting streams for network reachability change."),[4,this.Zf()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.tl=new pl(n,r),this.nl=this.Pf.Za({Ma:this.il.bind(this),xa:this.el.bind(this),Ga:this.rl.bind(this)}),this.ul=this.Pf.$a({Ma:this.sl.bind(this),xa:this.ol.bind(this),Ya:this.hl.bind(this),Ja:this.Ja.bind(this)})}function gl(t,e){this.$r=t,this.vh=e,this.state="Unknown",this.jf=0,this.Lf=null,this.qf=!0}function wl(t){this.Pf=t,this.kf=ja(),this.mutations=[],this.Nf=!1,this.Of=null,this.Ff=new Set}function bl(t,e,n){this.query=t,this.targetId=e,this.view=n}function Il(t){this.key=t,this.Zl=!1}function El(){this.Nd=null,this.targetId=0,this.listeners=[]}var Tl=(Pl.prototype.run=function(){this.Jl()},Pl.prototype.Jl=function(){var t=this;this.Sa._a((function(){return c(t,void 0,void 0,(function(){var t,e,n=this;return h(this,(function(r){return t=this.Kl.Cl(),(e=this.Yl(t))&&e.then((function(e){n.$r.ou((function(){return t.commit().then((function(){n.iu.resolve(e)})).catch((function(t){n.Xl(t)}))}))})).catch((function(t){n.Xl(t)})),[2]}))}))}))},Pl.prototype.Yl=function(t){try{var e=this.updateFunction(t);return!Gs(e)&&e.catch&&e.then?e:(this.iu.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.iu.reject(t),null}},Pl.prototype.Xl=function(t){var e=this;0<this.Hl&&this.$l(t)?(this.Hl-=1,this.$r.ou((function(){return e.Jl(),Promise.resolve()}))):this.iu.reject(t)},Pl.prototype.$l=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!Da(e)},Pl),Nl=(Object.defineProperty(xl.prototype,"ld",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),xl.prototype.subscribe=function(t){Su(null!==t,"SyncEngine listener cannot be null"),Su(null===this.nd,"SyncEngine already has a subscriber."),this.nd=t},xl.prototype.listen=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i,o;return h(this,(function(s){switch(s.label){case 0:return this.dd("listen()"),(r=this.ed.get(t))?(e=r.targetId,this.td.Vh(e),n=r.view.zl(),[3,4]):[3,1];case 1:return[4,this.zf.Mo(t.Yn())];case 2:return i=s.sent(),o=this.td.Vh(i.targetId),e=i.targetId,[4,this.vd(t,e,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.Kl.listen(i),s.label=4;case 4:return this.nd.Ga([n]),[2,e]}}))}))},xl.prototype.vd=function(t,e,n){return c(this,void 0,void 0,(function(){var r,i,o,s,a,u;return h(this,(function(c){switch(c.label){case 0:return[4,this.zf.Ko(t,!0)];case 1:return r=c.sent(),i=new vl(t,r.Yo),o=i.xl(r.documents),s=Xa.Ci(e,n&&"Offline"!==this.onlineState),Su(0===(a=i.qs(o,!0===this.isPrimary,s)).Ml.length,"View returned limbo docs before target ack from the server."),Su(!!a.snapshot,"applyChanges for new view should always return a snapshot"),u=new bl(t,e,i),this.ed.set(t,u),this.rd[e]||(this.rd[e]=[]),this.rd[e].push(t),[2,a.snapshot]}}))}))},xl.prototype.wd=function(t){return c(this,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:return[4,this.zf.Ko(t.query,!0)];case 1:return e=r.sent(),n=t.view.Wl(e),this.isPrimary&&this.md(t.targetId,n.Ml),[2,n]}}))}))},xl.prototype.wl=function(t){return c(this,void 0,void 0,(function(){var e,n,r=this;return h(this,(function(i){switch(i.label){case 0:return this.dd("unlisten()"),Su(!!(e=this.ed.get(t)),"Trying to unlisten on query not found:"+t),1<(n=this.rd[e.targetId]).length?(this.rd[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.ed.delete(t),[2]):this.isPrimary?(this.td.xh(e.targetId),this.td.Ph(e.targetId)?[3,2]:[4,this.zf.zo(e.targetId,!1).then((function(){r.td.Lh(e.targetId),r.Kl.wl(e.targetId),r.gd(e.targetId)})).catch(yc)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.gd(e.targetId),[4,this.zf.zo(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},xl.prototype.write=function(t,e){return c(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return this.dd("write()"),[4,this.zf.ao(t)];case 1:return n=r.sent(),this.td.kh(n.batchId),this.bd(n.batchId,e),[4,this.pd(n.ks)];case 2:return r.sent(),[4,this.Kl.fl()];case 3:return r.sent(),[2]}}))}))},xl.prototype.runTransaction=function(t,e,n){new Tl(t,this.Kl,e,n).run()},xl.prototype.So=function(t){return c(this,void 0,void 0,(function(){var e,n=this;return h(this,(function(r){switch(r.label){case 0:this.dd("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zf.So(t)];case 2:return e=r.sent(),ni(t.Ei,(function(t,e){var r=n.sd[Number(t)];r&&(Su(e.ki.size+e.Ni.size+e.Oi.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.ki.size?r.Zl=!0:0<e.Ni.size?Su(r.Zl,"Received change for limbo target document without add."):0<e.Oi.size&&(Su(r.Zl,"Received remove for limbo target document without add."),r.Zl=!1))})),[4,this.pd(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,yc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},xl.prototype.Ql=function(t,e){if(this.isPrimary&&0===e||!this.isPrimary&&1===e){this.dd("applyOnlineStateChange()");var n=[];this.ed.forEach((function(e,r){var i=r.view.Ql(t);Su(0===i.Ml.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.nd.yd(t),this.nd.Ga(n),this.onlineState=t,this.isPrimary&&this.td.Mh(t)}},xl.prototype.pl=function(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return h(this,(function(u){switch(u.label){case 0:return this.dd("rejectListens()"),this.td.qh(t,"rejected",e),n=this.sd[t],(r=n&&n.key)?(this.ud=this.ud.remove(r),delete this.sd[t],i=(i=new Fi(Vi.W)).dt(r,new Ss(r,Pi.q())),o=Fa().add(r),s=new Ya(Pi.MIN,{},new no(Ou),i,o),[2,this.So(s)]):[3,1];case 1:return[4,this.zf.zo(t,!1).then((function(){return a.gd(t,e)})).catch(yc)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},xl.prototype.Xh=function(t,e,n){return c(this,void 0,void 0,(function(){var r;return h(this,(function(i){switch(i.label){case 0:return this.dd("applyBatchState()"),[4,this.zf.lo(t)];case 1:return null===(r=i.sent())?(Eu("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.Kl.fl()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this._d(t,n||null),this.zf.Zo(t)):Au("Unknown batchState: "+e),i.label=4;case 4:return[4,this.pd(r)];case 5:return i.sent(),[2]}}))}))},xl.prototype.Dl=function(t){return c(this,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:this.dd("applySuccessfulWrite()"),e=t.batch.batchId,this._d(e,null),this.Id(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zf.vo(t)];case 2:return n=r.sent(),this.td.Oh(e,"acknowledged"),[4,this.pd(n)];case 3:return r.sent(),[3,6];case 4:return[4,yc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},xl.prototype.Al=function(t,e){return c(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:this.dd("rejectFailedWrite()"),this._d(t,e),this.Id(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zf.yo(t)];case 2:return n=r.sent(),this.td.Oh(t,"rejected",e),[4,this.pd(n)];case 3:return r.sent(),[3,6];case 4:return[4,yc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},xl.prototype.Td=function(t){return c(this,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:return this.Kl.$f()||Eu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.zf.To()];case 1:return-1===(e=r.sent())?t.resolve():((n=this.ad.get(e)||[]).push(t),this.ad.set(e,n)),[2]}}))}))},xl.prototype.Id=function(t){(this.ad.get(t)||[]).forEach((function(t){t.resolve()})),this.ad.delete(t)},xl.prototype.Ed=function(t){this.ad.forEach((function(e){e.forEach((function(e){e.reject(new qr(Fr.CANCELLED,t))}))})),this.ad.clear()},xl.prototype.bd=function(t,e){var n=this.hd[this.currentUser.i()];n=(n=n||new Fi(Ou)).dt(t,e),this.hd[this.currentUser.i()]=n},xl.prototype._d=function(t,e){var n=this.hd[this.currentUser.i()];if(n){var r=n.get(t);r&&(Su(t===n.wt(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.hd[this.currentUser.i()]=n}},xl.prototype.gd=function(t,e){var n=this;void 0===e&&(e=null),this.td.xh(t),Su(this.rd[t]&&0!==this.rd[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.rd[t];r<i.length;r++){var o=i[r];this.ed.delete(o),e&&this.nd.Dd(o,e)}if(delete this.rd[t],this.isPrimary){var s=this.od.As(t);this.od.Rs(t),s.forEach((function(t){n.od.Cs(t)||n.Rd(t)}))}},xl.prototype.Rd=function(t){var e=this.ud.get(t);null!==e&&(this.Kl.wl(e),this.ud=this.ud.remove(t),delete this.sd[e])},xl.prototype.md=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof hl?(this.od._s(i.key,t),this.Sd(i)):i instanceof ll?(Eu("SyncEngine","Document no longer in limbo: "+i.key),this.od.Ts(i.key,t),this.od.Cs(i.key)||this.Rd(i.key)):Au("Unknown limbo change: "+JSON.stringify(i))}},xl.prototype.Sd=function(t){var e=t.key;if(!this.ud.get(e)){Eu("SyncEngine","New document in limbo: "+e);var n=this.fd.next(),r=ea.jn(e.path);this.sd[n]=new Il(e),this.Kl.listen(new da(r.Yn(),n,2,Vu.Xr)),this.ud=this.ud.dt(e,n)}},xl.prototype.Ad=function(){return this.ud},xl.prototype.pd=function(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o=this;return h(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.ed.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.xl(t);return e.yc?o.zf.Ko(a.query,!1).then((function(t){var n=t.documents;return a.view.xl(n,e)})):e})).then((function(t){var i=e&&e.Ei[a.targetId],s=a.view.qs(t,!0===o.isPrimary,i);if(o.md(a.targetId,s.Ml),s.snapshot){o.isPrimary&&o.td.qh(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var u=ju.zr(a.targetId,s.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.nd.Ga(n),[4,this.zf.xo(r)];case 2:return s.sent(),[2]}}))}))},xl.prototype.dd=function(t){Su(null!==this.nd,"Trying to call "+t+" before calling subscribe().")},xl.prototype.Pl=function(t){return c(this,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.Ed("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.zf.ro(t)]):[3,3];case 1:return n=r.sent(),this.td.ro(t,n.ho,n.co),[4,this.pd(n.oo)];case 2:r.sent(),r.label=3;case 3:return[4,this.Kl.Pl()];case 4:return r.sent(),[2]}}))}))},xl.prototype.kl=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i,o,s,a=this;return h(this,(function(u){switch(u.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Kl.kl(!0)]);case 1:return u.sent(),o=this.td.Ch(),[4,this.Cd(o.nt())];case 2:for(e=u.sent(),n=0,r=e;n<r.length;n++)i=r[n],this.Kl.listen(i);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),ei(this.rd,(function(t,e){a.td.jh(t)?o.push(t):s=s.then((function(){return a.gd(t),a.zf.zo(t,!0)})),a.Kl.wl(t)})),[4,s]);case 4:return u.sent(),[4,this.Cd(o)];case 5:return u.sent(),this.Pd(),[4,this.Kl.kl(!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))},xl.prototype.Pd=function(){var t=this;ei(this.sd,(function(e){t.Kl.wl(e)})),this.od.Ss(),this.sd=[],this.ud=new Fi(Vi.W)},xl.prototype.Cd=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,f,p,d;return h(this,(function(h){switch(h.label){case 0:e=[],n=[],r=0,i=t,h.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.rd[o])&&0!==a.length?[4,this.zf.zo(o,!0)]:[3,8]):[3,14];case 2:return h.sent(),[4,this.zf.Mo(a[0].Yn())];case 3:s=h.sent(),u=0,c=a,h.label=4;case 4:return u<c.length?(l=c[u],Su(!!(f=this.ed.get(l)),"No query view found for "+l),[4,this.wd(f)]):[3,7];case 5:(p=h.sent()).snapshot&&n.push(p.snapshot),h.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return Su(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.zf.ih(o)];case 9:return Su(!!(d=h.sent()),"Target for id "+o+" not found"),[4,this.zf.Mo(d)];case 10:return s=h.sent(),[4,this.vd(this.kd(d),o,!1)];case 11:h.sent(),h.label=12;case 12:e.push(s),h.label=13;case 13:return r++,[3,1];case 14:return this.nd.Ga(n),[2,e]}}))}))},xl.prototype.kd=function(t){return new ea(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},xl.prototype.$o=function(){return this.zf.$o()},xl.prototype.$h=function(t,e,n){return c(this,void 0,void 0,(function(){var r,i;return h(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return Eu("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.rd[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.zf.eh()];case 2:return r=o.sent(),i=Ya.Ai(t,"current"===e),[4,this.pd(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.zf.zo(t,!0)];case 5:return o.sent(),this.gd(t,n),[3,7];case 6:Au("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},xl.prototype.Zh=function(t,e){return c(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,f=this;return h(this,(function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(l=r[n],Su(!this.rd[l],"Trying to add an already active target"),[4,this.zf.ih(l)]):[3,6];case 2:return Su(!!(i=p.sent()),"Query data for active target "+l+" not found"),[4,this.zf.Mo(i)];case 3:return o=p.sent(),[4,this.vd(this.kd(i),o.targetId,!1)];case 4:p.sent(),this.Kl.listen(o),p.label=5;case 5:return n++,[3,1];case 6:s=function(t){return h(this,(function(e){switch(e.label){case 0:return a.rd[t]?[4,a.zf.zo(t,!1).then((function(){f.Kl.wl(t),f.gd(t)})).catch(yc)]:[2,"continue"];case 1:return e.sent(),[2]}}))},a=this,u=0,c=e,p.label=7;case 7:return u<c.length?(l=c[u],[5,s(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},xl.prototype.enableNetwork=function(){return this.zf.nh(!0),this.Kl.enableNetwork()},xl.prototype.disableNetwork=function(){return this.zf.nh(!1),this.Kl.disableNetwork()},xl.prototype.ge=function(t){var e=this.sd[t];if(e&&e.Zl)return Fa().add(e.key);var n=Fa(),r=this.rd[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.ed.get(s);Su(!!a,"No query view found for "+s),n=n.Qt(a.view.Ul)}return n},xl),Al=(Rl.prototype.listen=function(t){var e=t.query,n=!1,r=this.Od.get(e);return r||(n=!0,r=new El,this.Od.set(e,r)),r.listeners.push(t),Su(!t.Ql(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.Nd&&t.Vd(r.Nd)&&this.Ud(),n?this.dh.listen(e).then((function(t){return r.targetId=t})):Promise.resolve(r.targetId)},Rl.prototype.wl=function(t){return c(this,void 0,void 0,(function(){var e,n,r,i;return h(this,(function(o){return e=t.query,n=!1,(r=this.Od.get(e))&&0<=(i=r.listeners.indexOf(t))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.Od.delete(e),[2,this.dh.wl(e)]):[2]}))}))},Rl.prototype.Ga=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.Od.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].Vd(i)&&(e=!0);s.Nd=i}}e&&this.Ud()},Rl.prototype.Dd=function(t,e){var n=this.Od.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.Od.delete(t)},Rl.prototype.yd=function(t){this.onlineState=t;var e=!1;this.Od.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].Ql(t)&&(e=!0)})),e&&this.Ud()},Rl.prototype.xd=function(t){this.Fd.add(t),t.next()},Rl.prototype.jd=function(t){this.Fd.delete(t)},Rl.prototype.Ud=function(){this.Fd.forEach((function(t){t.next()}))},Rl),Sl=(Cl.prototype.Vd=function(t){if(Su(0<t.docChanges.length||t._i,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ja(t.query,t.docs,t.pi,e,t.yi,t.fromCache,t._i,!0)}var o=!1;return this.qd?this.Md(t)&&(this.Ld.next(t),o=!0):this.Qd(t,this.onlineState)&&(this.Gd(t),o=!0),this.Bd=t,o},Cl.prototype.onError=function(t){this.Ld.error(t)},Cl.prototype.Ql=function(t){this.onlineState=t;var e=!1;return this.Bd&&!this.qd&&this.Qd(this.Bd,t)&&(this.Gd(this.Bd),e=!0),e},Cl.prototype.Qd=function(t,e){if(Su(!this.qd,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n="Offline"!==e;return this.options.Wd&&n?(Su(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.Y()||"Offline"===e},Cl.prototype.Md=function(t){if(0<t.docChanges.length)return!0;var e=this.Bd&&this.Bd.hasPendingWrites!==t.hasPendingWrites;return!(!t._i&&!e)&&!0===this.options.includeMetadataChanges},Cl.prototype.Gd=function(t){Su(!this.qd,"Trying to raise initial events for second time"),t=Ja.Ti(t.query,t.docs,t.yi,t.fromCache),this.qd=!0,this.Ld.next(t)},Cl),kl=(Dl.prototype.start=function(t,e){var n=this;this.Kd();var r=new xu,i=new xu,o=!1;return this.credentials.v((function(s){o?n.$r.ou((function(){return n.Pl(s)})):(o=!0,n.Hd(t,e,s,i).then((function(){return n.Jd(s)})).then(r.resolve,r.reject))})),this.$r.ou((function(){return r.promise})),i.promise},Dl.prototype.enableNetwork=function(){var t=this;return this.Kd(),this.$r.enqueue((function(){return t.dh.enableNetwork()}))},Dl.prototype.Hd=function(t,e,n,r){return c(this,void 0,void 0,(function(){var i;return h(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t.initialize(this.$r,this.zd,this.platform,this.clientId,n,e)];case 1:return o.sent(),this.persistence=t.la(),this.Yd=t.fa(),this.td=t.da(),r.resolve(),[3,3];case 2:if(i=o.sent(),r.reject(i),!this.Xd(i))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),[2,this.Hd(new uh,{aa:!1},n,r)];case 3:return[2]}}))}))},Dl.prototype.Xd=function(t){return"FirebaseError"===t.name?t.code===Fr.FAILED_PRECONDITION||t.code===Fr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},Dl.prototype.Kd=function(){if(this.$r.vu)throw new qr(Fr.FAILED_PRECONDITION,"The client has already been terminated.")},Dl.prototype.Jd=function(t){var e=this;return Eu("FirestoreClient","Initializing. user=",t.uid),this.platform.$d(this.zd).then((function(n){return c(e,void 0,void 0,(function(){var e,r,i,o,s,a,u=this;return h(this,(function(l){switch(l.label){case 0:return e=new Mc,this.zf=new ac(this.persistence,e,t),[4,this.zf.start()];case 1:return l.sent(),r=this.platform.Zd(),i=this.platform.tv(this.zd.Dn),o=new ph(this.$r,n,this.credentials,i),s=function(t){return u.dh.Ql(t,0)},a=function(t){return u.dh.Ql(t,1)},this.Kl=new dl(this.zf,o,this.$r,s,r),this.dh=new Nl(this.zf,this.Kl,this.td,t),this.td.vh=a,this.Kl.dh=this.dh,this.td.dh=this.dh,this.nv=new Al(this.dh),[4,this.td.start()];case 2:return l.sent(),[4,this.Kl.start()];case 3:return l.sent(),[4,this.persistence.na((function(t){return c(u,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.dh.kl(t)];case 1:return e.sent(),t&&!this.Yd.ss?this.Yd.start(this.zf):t||this.Yd.stop(),[2]}}))}))}))];case 4:return l.sent(),[4,this.persistence.ia((function(){return c(u,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return l.sent(),[2]}}))}))}))},Dl.prototype.Pl=function(t){return this.$r.Iu(),Eu("FirestoreClient","Credential Changed. Current user: "+t.uid),this.dh.Pl(t)},Dl.prototype.disableNetwork=function(){var t=this;return this.Kd(),this.$r.enqueue((function(){return t.dh.disableNetwork()}))},Dl.prototype.terminate=function(){var t=this;return this.$r.pu((function(){return c(t,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.Yd.stop(),[4,this.Kl.shutdown()];case 1:return t.sent(),[4,this.td.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.m(),[2]}}))}))}))},Dl.prototype.waitForPendingWrites=function(){var t=this;this.Kd();var e=new xu;return this.$r.ou((function(){return t.dh.Td(e)})),e.promise},Dl.prototype.listen=function(t,e,n){var r=this;this.Kd();var i=new Sl(t,e,n);return this.$r.ou((function(){return r.nv.listen(i)})),i},Dl.prototype.wl=function(t){var e=this;this.iv||this.$r.ou((function(){return e.nv.wl(t)}))},Dl.prototype.ev=function(t){var e=this;return this.Kd(),this.$r.enqueue((function(){return e.zf.qo(t)})).then((function(t){if(t instanceof As)return t;if(t instanceof Ss)return null;throw new qr(Fr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},Dl.prototype.rv=function(t){var e=this;return this.Kd(),this.$r.enqueue((function(){return c(e,void 0,void 0,(function(){var e,n,r;return h(this,(function(i){switch(i.label){case 0:return[4,this.zf.Ko(t,!0)];case 1:return e=i.sent(),n=new vl(t,e.Yo),r=n.xl(e.documents),[2,n.qs(r,!1).snapshot]}}))}))}))},Dl.prototype.write=function(t){var e=this;this.Kd();var n=new xu;return this.$r.ou((function(){return e.dh.write(t,n)})),n.promise},Dl.prototype.Dn=function(){return this.zd.Dn},Dl.prototype.xd=function(t){var e=this;this.Kd(),this.$r.ou((function(){return e.nv.xd(t),Promise.resolve()}))},Dl.prototype.jd=function(t){this.iv||this.nv.jd(t)},Object.defineProperty(Dl.prototype,"iv",{get:function(){return this.$r.vu},enumerable:!0,configurable:!0}),Dl.prototype.transaction=function(t){var e=this;this.Kd();var n=new xu;return this.$r.ou((function(){return e.dh.runTransaction(e.$r,t,n),Promise.resolve()})),n.promise},Dl),_l=(Ol.prototype.next=function(t){this.uv(this.observer.next,t)},Ol.prototype.error=function(t){this.uv(this.observer.error,t)},Ol.prototype.sv=function(){this.muted=!0},Ol.prototype.uv=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},Ol);function Ol(t){this.observer=t,this.muted=!1}function Dl(t,e,n,r){this.platform=t,this.zd=e,this.credentials=n,this.$r=r,this.clientId=ku.Ur()}function Cl(t,e,n){this.query=t,this.Ld=e,this.qd=!1,this.Bd=null,this.onlineState="Unknown",this.options=n||{}}function Rl(t){this.dh=t,this.Od=new Uu((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.Fd=new Set,this.dh.subscribe(this)}function xl(t,e,n,r){this.zf=t,this.Kl=e,this.td=n,this.currentUser=r,this.nd=null,this.ed=new Uu((function(t){return t.canonicalId()})),this.rd={},this.ud=new Fi(Vi.W),this.sd={},this.od=new ic,this.hd={},this.ad=new Map,this.fd=nh.Bc(),this.isPrimary=void 0,this.onlineState="Unknown"}function Pl(t,e,n,r){this.$r=t,this.Kl=e,this.updateFunction=n,this.iu=r,this.Hl=5,this.Sa=new ch(this.$r,"retry_transaction")}function Ll(t){return function(){if("object"!=typeof t||null===t)return!1;for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}()}var Ml,Ul=ec.Xu,jl=(rf.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},rf),Vl=(nf.prototype.settings=function(t){if(oi("Firestore.settings",arguments,1),ui("Firestore.settings","object",1,t),Zr(t,"persistence"))throw new qr(Fr.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new jl(t);if(this.av&&!this.mv.isEqual(e))throw new qr(Fr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.mv=e).credentials&&(this.vv=function(t){if(!t)return new Br;switch(t.type){case"gapi":var e=t.S;return Su(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new zr(e,t.D||"0");case"provider":return t.S;default:throw new qr(Fr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},nf.prototype.enableNetwork=function(){return this.cv(),this.av.enableNetwork()},nf.prototype.disableNetwork=function(){return this.cv(),this.av.disableNetwork()},nf.prototype.enablePersistence=function(t){if(this.av)throw new qr(Fr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&Tu("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=ti(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.pv(this.wv,{aa:!0,cacheSizeBytes:this.mv.cacheSizeBytes,synchronizeTabs:e})},nf.prototype.clearPersistence=function(){return c(this,void 0,void 0,(function(){var t,e=this;return h(this,(function(n){if(void 0!==this.av&&!this.av.iv)throw new qr(Fr.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new xu,this.hv.wu((function(){return c(e,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.yv(),[4,this.wv.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),[2,t.promise]}))}))},nf.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(nf.prototype,"_v",{get:function(){return this.cv(),this.av.iv},enumerable:!0,configurable:!0}),nf.prototype.waitForPendingWrites=function(){return this.cv(),this.av.waitForPendingWrites()},nf.prototype.onSnapshotsInSync=function(t){if(this.cv(),Ll(t))return this.Iv(t);ui("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.Iv(e)},nf.prototype.Iv=function(t){var e=this,n=new _l({next:function(){t.next&&t.next()},error:function(t){throw Au("Uncaught Error in onSnapshotsInSync")}});return this.av.xd(n),function(){n.sv(),e.av.jd(n)}},nf.prototype.cv=function(){return this.av||this.pv(new uh,{aa:!1}),this.av},nf.prototype.yv=function(){return new Ru(this.fv,this.dv,this.mv.host,this.mv.ssl,this.mv.forceLongPolling)},nf.prototype.pv=function(t,e){Su(!!this.mv.host,"FirestoreSettings.host is not set"),Su(!this.av,"configureClient() called multiple times");var n=this.yv();return this.av=new kl(yu.C(),n,this.vv,this.hv),this.av.start(t,e)},nf.prototype.bv=function(t){return new nl((function(e){if(e instanceof Bl){var n=t,r=e.firestore.fv;if(!r.isEqual(n))throw new qr(Fr.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new el(t,e.Tv)}return e}))},nf.lv=function(t){var e=t.options;if(!Zr(e,"projectId"))throw new qr(Fr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new qr(Fr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Pu(n)},Object.defineProperty(nf.prototype,"app",{get:function(){if(!this.ov)throw new qr(Fr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ov},enumerable:!0,configurable:!0}),nf.prototype.collection=function(t){return oi("Firestore.collection",arguments,1),ui("Firestore.collection","non-empty string",1,t),this.cv(),new sf(Mi.et(t),this)},nf.prototype.doc=function(t){return oi("Firestore.doc",arguments,1),ui("Firestore.doc","non-empty string",1,t),this.cv(),Bl.Ev(Mi.et(t),this)},nf.prototype.collectionGroup=function(t){if(oi("Firestore.collectionGroup",arguments,1),ui("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new qr(Fr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.cv(),new Wl(new ea(Mi.rt,t),this)},nf.prototype.runTransaction=function(t){var e=this;return oi("Firestore.runTransaction",arguments,1),ui("Firestore.runTransaction","function",1,t),this.cv().transaction((function(n){return t(new Fl(e,n))}))},nf.prototype.batch=function(){return this.cv(),new ql(this)},Object.defineProperty(nf,"logLevel",{get:function(){switch(bu()){case 0:return"debug";case 1:return"error";case 2:return"silent";default:return Au("Unknown log level: "+bu())}},enumerable:!0,configurable:!0}),nf.setLogLevel=function(t){switch(oi("Firestore.setLogLevel",arguments,1),ui("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":Iu(0);break;case"error":Iu(1);break;case"silent":Iu(2);break;default:throw new qr(Fr.INVALID_ARGUMENT,"Invalid log level: "+t)}},nf.prototype.Dv=function(){return this.mv.timestampsInSnapshots},nf),Fl=(ef.prototype.get=function(t){var e=this;oi("Transaction.get",arguments,1);var n=lf("Transaction.get",t,this.Rv);return this.Sv.lookup([n.Tv]).then((function(t){if(!t||1!==t.length)return Au("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof Ss)return new Hl(e.Rv,n.Tv,null,!1,!1,n.Av);if(r instanceof As)return new Hl(e.Rv,n.Tv,r,!1,!1,n.Av);throw Au("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},ef.prototype.set=function(t,e,n){ai("Transaction.set",arguments,2,3);var r=lf("Transaction.set",t,this.Rv);n=uf("Transaction.set",n);var i=ff(r.Av,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.Rv.gv.yf(s,o,n.mergeFields):this.Rv.gv.bf(s,o);return this.Sv.set(r.Tv,a),this},ef.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof dh?(si("Transaction.update",arguments,3),r=lf("Transaction.update",t,this.Rv),this.Rv.gv.Tf("Transaction.update",e,n,o)):(oi("Transaction.update",arguments,2),r=lf("Transaction.update",t,this.Rv),this.Rv.gv._f("Transaction.update",e)),this.Sv.update(r.Tv,i),this},ef.prototype.delete=function(t){oi("Transaction.delete",arguments,1);var e=lf("Transaction.delete",t,this.Rv);return this.Sv.delete(e.Tv),this},ef),ql=(tf.prototype.set=function(t,e,n){ai("WriteBatch.set",arguments,2,3),this.kv();var r=lf("WriteBatch.set",t,this.Rv);n=uf("WriteBatch.set",n);var i=ff(r.Av,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.Rv.gv.yf(s,o,n.mergeFields):this.Rv.gv.bf(s,o);return this.Cv=this.Cv.concat(a.hf(r.Tv,ko.NONE)),this},tf.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.kv(),i="string"==typeof e||e instanceof dh?(si("WriteBatch.update",arguments,3),r=lf("WriteBatch.update",t,this.Rv),this.Rv.gv.Tf("WriteBatch.update",e,n,o)):(oi("WriteBatch.update",arguments,2),r=lf("WriteBatch.update",t,this.Rv),this.Rv.gv._f("WriteBatch.update",e)),this.Cv=this.Cv.concat(i.hf(r.Tv,ko.exists(!0))),this},tf.prototype.delete=function(t){oi("WriteBatch.delete",arguments,1),this.kv();var e=lf("WriteBatch.delete",t,this.Rv);return this.Cv=this.Cv.concat(new Ro(e.Tv,ko.NONE)),this},tf.prototype.commit=function(){return c(this,void 0,void 0,(function(){return h(this,(function(t){return this.kv(),this.Pv=!0,0<this.Cv.length?[2,this.Rv.cv().write(this.Cv)]:[2]}))}))},tf.prototype.kv=function(){if(this.Pv)throw new qr(Fr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},tf),Bl=(Zl.Ev=function(t,e,n){if(t.length%2!=0)throw new qr(Fr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.it()+" has "+t.length);return new Zl(new Vi(t),e,n)},Object.defineProperty(Zl.prototype,"id",{get:function(){return this.Tv.path.$()},enumerable:!0,configurable:!0}),Object.defineProperty(Zl.prototype,"parent",{get:function(){return new sf(this.Tv.path.J(),this.firestore,this.Av)},enumerable:!0,configurable:!0}),Object.defineProperty(Zl.prototype,"path",{get:function(){return this.Tv.path.it()},enumerable:!0,configurable:!0}),Zl.prototype.collection=function(t){if(oi("DocumentReference.collection",arguments,1),ui("DocumentReference.collection","non-empty string",1,t),!t)throw new qr(Fr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Mi.et(t);return new sf(this.Tv.path.child(e),this.firestore)},Zl.prototype.isEqual=function(t){if(!(t instanceof Zl))throw gi("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Tv.isEqual(t.Tv)&&this.Av===t.Av},Zl.prototype.set=function(t,e){ai("DocumentReference.set",arguments,1,2),e=uf("DocumentReference.set",e);var n=ff(this.Av,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.gv.yf(i,r,e.mergeFields):this.firestore.gv.bf(i,r);return this.av.write(o.hf(this.Tv,ko.NONE))},Zl.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof dh?(si("DocumentReference.update",arguments,2),this.firestore.gv.Tf("DocumentReference.update",t,e,r)):(oi("DocumentReference.update",arguments,1),this.firestore.gv._f("DocumentReference.update",t)),this.av.write(n.hf(this.Tv,ko.exists(!0)))},Zl.prototype.delete=function(){return oi("DocumentReference.delete",arguments,0),this.av.write([new Ro(this.Tv,ko.NONE)])},Zl.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ai("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Ll(t[i])||(mi("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),li("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=Ll(t[i])?t[i]:(ui("DocumentReference.onSnapshot","function",i,t[i]),ci("DocumentReference.onSnapshot","function",i+1,t[i+1]),ci("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Nv(o,n)},Zl.prototype.Nv=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new _l({next:function(t){if(e.next){Su(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n.Tv);e.next(new Hl(n.firestore,n.Tv,r,t.fromCache,t.hasPendingWrites,n.Av))}},error:r}),o=this.av.listen(ea.jn(this.Tv.path),i,t);return function(){i.sv(),n.av.wl(o)}},Zl.prototype.get=function(t){var e=this;return ai("DocumentReference.get",arguments,0,1),hf("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.cv().ev(e.Tv).then((function(t){n(new Hl(e.firestore,e.Tv,t,!0,t instanceof As&&t.rn,e.Av))}),r):e.Ov(n,r,t)}))},Zl.prototype.Ov=function(t,e,n){var r=this.Nv({includeMetadataChanges:!0,Wd:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new qr(Fr.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new qr(Fr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},Zl.prototype.withConverter=function(t){return new Zl(this.Tv,this.firestore,t)},Zl),Gl=(Ql.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Ql),Hl=($l.prototype.data=function(t){if(ai("DocumentSnapshot.data",arguments,0,1),t=cf("DocumentSnapshot.data",t),this.Fv){if(this.Av){var e=new zl(this.Rv,this.Tv,this.Fv,this.Vv,this.Uv);return this.Av.fromFirestore(e,t)}return this.xv(this.Fv.data(),Po.gn(t,this.Rv.Dv()))}},$l.prototype.get=function(t,e){if(ai("DocumentSnapshot.get",arguments,1,2),e=cf("DocumentSnapshot.get",e),this.Fv){var n=this.Fv.data().field(al("DocumentSnapshot.get",t));if(null!==n)return this.jv(n,Po.gn(e,this.Rv.Dv()))}},Object.defineProperty($l.prototype,"id",{get:function(){return this.Tv.path.$()},enumerable:!0,configurable:!0}),Object.defineProperty($l.prototype,"ref",{get:function(){return new Bl(this.Tv,this.Rv,this.Av)},enumerable:!0,configurable:!0}),Object.defineProperty($l.prototype,"exists",{get:function(){return null!==this.Fv},enumerable:!0,configurable:!0}),Object.defineProperty($l.prototype,"metadata",{get:function(){return new Gl(this.Uv,this.Vv)},enumerable:!0,configurable:!0}),$l.prototype.isEqual=function(t){if(!(t instanceof $l))throw gi("isEqual","DocumentSnapshot",1,t);return this.Rv===t.Rv&&this.Vv===t.Vv&&this.Tv.isEqual(t.Tv)&&(null===this.Fv?null===t.Fv:this.Fv.isEqual(t.Fv))&&this.Av===t.Av},$l.prototype.xv=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.jv(i,e)})),r},$l.prototype.jv=function(t,e){if(t instanceof Is)return this.xv(t,e);if(t instanceof Ts)return this.Lv(t,e);if(t instanceof ws){var n=t.value(e),r=this.Rv.cv().Dn();return t.Dn.isEqual(r)||Tu("Document "+this.Tv.path+" contains a document reference within a different database ("+t.Dn.projectId+"/"+t.Dn.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Bl(n,this.Rv,this.Av)}return t.value(e)},$l.prototype.Lv=function(t,e){var n=this;return t.Jt.map((function(t){return n.jv(t,e)}))},$l),zl=(i(Xl,Ml=Hl),Xl.prototype.data=function(t){var e=Ml.prototype.data.call(this,t);return Su(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e},Xl),Wl=(Yl.prototype.where=function(t,e,n){var r;oi("Query.where",arguments,3),yi("Query.where",3,n),function(t,e,n,r){if(!e.some((function(t){return t===r})))throw new qr(Fr.INVALID_ARGUMENT,"Invalid value "+vi(r)+" provided to function Query.where() for its "+bi(2)+" argument. Acceptable values: "+e.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,e);var i=al("Query.where",t),o=na.et(e);if(i.st()){if(o===na.ARRAY_CONTAINS||o===na.ARRAY_CONTAINS_ANY)throw new qr(Fr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===na.IN){this.Bv(n,o);for(var s=[],a=0,u=n;a<u.length;a++){var c=u[a];s.push(this.Mv(c))}r=new Ts(s)}else r=this.Mv(n)}else o!==na.IN&&o!==na.ARRAY_CONTAINS_ANY||this.Bv(n,o),r=this.firestore.gv.Ef("Query.where",n,o===na.IN);var h=ra.create(i,o,r);return this.Qv(h),new Yl(this.qv.Bn(h),this.firestore,this.Av)},Yl.prototype.orderBy=function(t,e){var n;if(ai("Query.orderBy",arguments,1,2),ci("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=ca.ASCENDING;else{if("desc"!==e)throw new qr(Fr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=ca.DESCENDING}if(null!==this.qv.startAt)throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.qv.endAt)throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=al("Query.orderBy",t),i=new la(r,n);return this.Gv(i),new Yl(this.qv.Qn(i),this.firestore,this.Av)},Yl.prototype.limit=function(t){return oi("Query.limit",arguments,1),ui("Query.limit","number",1,t),wi("Query.limit",1,t),new Yl(this.qv.Gn(t),this.firestore,this.Av)},Yl.prototype.limitToLast=function(t){return oi("Query.limitToLast",arguments,1),ui("Query.limitToLast","number",1,t),wi("Query.limitToLast",1,t),new Yl(this.qv.Wn(t),this.firestore,this.Av)},Yl.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];si("Query.startAt",arguments,1);var r=this.Wv("Query.startAt",t,e,!0);return new Yl(this.qv.zn(r),this.firestore,this.Av)},Yl.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];si("Query.startAfter",arguments,1);var r=this.Wv("Query.startAfter",t,e,!1);return new Yl(this.qv.zn(r),this.firestore,this.Av)},Yl.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];si("Query.endBefore",arguments,1);var r=this.Wv("Query.endBefore",t,e,!0);return new Yl(this.qv.Kn(r),this.firestore,this.Av)},Yl.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];si("Query.endAt",arguments,1);var r=this.Wv("Query.endAt",t,e,!1);return new Yl(this.qv.Kn(r),this.firestore,this.Av)},Yl.prototype.isEqual=function(t){if(!(t instanceof Yl))throw gi("isEqual","Query",1,t);return this.firestore===t.firestore&&this.qv.isEqual(t.qv)},Yl.prototype.withConverter=function(t){return new Yl(this.qv,this.firestore,t)},Yl.prototype.Wv=function(t,e,n,r){if(yi(t,1,e),e instanceof Hl){if(0<n.length)throw new qr(Fr.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new qr(Fr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.zv(t,i.Fv,r)}var o=[e].concat(n);return this.Kv(t,o,r)},Yl.prototype.zv=function(t,e,n){for(var r=[],i=0,o=this.qv.orderBy;i<o.length;i++){var s=o[i];if(s.field.st())r.push(new ws(this.firestore.fv,e.key));else{var a=e.field(s.field);if(a instanceof ms)throw new qr(Fr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.it();throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new ha(r,n)},Yl.prototype.Kv=function(t,e,n){var r=this.qv.On;if(e.length>r.length)throw new qr(Fr.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.st()){if("string"!=typeof s)throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.qv.ui()&&-1!==s.indexOf("/"))throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.qv.path.child(Mi.et(s));if(!Vi.ct(a))throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new Vi(a);i.push(new ws(this.firestore.fv,u))}else{var c=this.firestore.gv.Ef(t,s);i.push(c)}}return new ha(i,n)},Yl.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ai("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Ll(t[i])||(mi("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),li("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=Ll(t[i])?t[i]:(ui("Query.onSnapshot","function",i,t[i]),ci("Query.onSnapshot","function",i+1,t[i+1]),ci("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Hv(this.qv),this.Nv(r,n)},Yl.prototype.Nv=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new _l({next:function(t){e.next&&e.next(new Kl(n.firestore,n.qv,t,n.Av))},error:r}),o=this.firestore.cv(),s=o.listen(this.qv,i,t);return function(){i.sv(),o.wl(s)}},Yl.prototype.Hv=function(t){if(t.ei()&&0===t.On.length)throw new qr(Fr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},Yl.prototype.get=function(t){var e=this;return ai("Query.get",arguments,0,1),hf("Query.get",t),this.Hv(this.qv),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.cv().rv(e.qv).then((function(t){n(new Kl(e.firestore,e.qv,t,e.Av))}),r):e.Ov(n,r,t)}))},Yl.prototype.Ov=function(t,e,n){var r=this.Nv({includeMetadataChanges:!0,Wd:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new qr(Fr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},Yl.prototype.Mv=function(t){if("string"==typeof t){if(""===t)throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.qv.ui()&&-1!==t.indexOf("/"))throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.qv.path.child(Mi.et(t));if(!Vi.ct(e))throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new ws(this.firestore.fv,new Vi(e))}if(t instanceof Bl){var n=t;return new ws(this.firestore.fv,n.Tv)}throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+vi(t)+".")},Yl.prototype.Bv=function(t,e){if(!Array.isArray(t)||0===t.length)throw new qr(Fr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new qr(Fr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new qr(Fr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter((function(t){return Number.isNaN(t)})).length)throw new qr(Fr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},Yl.prototype.Qv=function(t){if(t instanceof ra){var e=[na.ARRAY_CONTAINS,na.ARRAY_CONTAINS_ANY],n=[na.IN,na.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.Mn()){var o=this.qv.Ln();if(null!==o&&!o.isEqual(t.field))throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.qv.qn();null!==s&&this.Jv(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.qv.ri(n)),null===a&&r&&(a=this.qv.ri(e)),null!=a)throw a===t.op?new qr(Fr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new qr(Fr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},Yl.prototype.Gv=function(t){if(null===this.qv.qn()){var e=this.qv.Ln();null!==e&&this.Jv(e,t.field)}},Yl.prototype.Jv=function(t,e){if(!e.isEqual(t))throw new qr(Fr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},Yl),Kl=(Object.defineProperty(Jl.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(Jl.prototype,"empty",{get:function(){return this.Xv.docs.Y()},enumerable:!0,configurable:!0}),Object.defineProperty(Jl.prototype,"size",{get:function(){return this.Xv.docs.size},enumerable:!0,configurable:!0}),Jl.prototype.forEach=function(t,e){var n=this;ai("QuerySnapshot.forEach",arguments,1,2),ui("QuerySnapshot.forEach","function",1,t),this.Xv.docs.forEach((function(r){t.call(e,n.tw(r))}))},Object.defineProperty(Jl.prototype,"query",{get:function(){return new Wl(this.Yv,this.Rv,this.Av)},enumerable:!0,configurable:!0}),Jl.prototype.docChanges=function(t){t&&(mi("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),li("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Xv.Ii)throw new qr(Fr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.$v&&this.Zv===e||(this.$v=function(t,e,n,r){if(n.pi.Y()){var i,o=0;return n.docChanges.map((function(e){var s=new zl(t,e.doc.key,e.doc,n.fromCache,n.yi.has(e.doc.key),r);return Su(0===e.type,"Invalid event type for first snapshot"),Su(!i||n.query.Xn(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:s,oldIndex:-1,newIndex:o++}}))}var s=n.pi;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new zl(t,e.doc.key,e.doc,n.fromCache,n.yi.has(e.doc.key),r),o=-1,a=-1;return 0!==e.type&&(Su(0<=(o=s.indexOf(e.doc.key)),"Index for document not found"),s=s.delete(e.doc.key)),1!==e.type&&(a=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Au("Unknown change type: "+t)}}(e.type),doc:i,oldIndex:o,newIndex:a}}))}(this.Rv,e,this.Xv,this.Av),this.Zv=e),this.$v},Jl.prototype.isEqual=function(t){if(!(t instanceof Jl))throw gi("isEqual","QuerySnapshot",1,t);return this.Rv===t.Rv&&this.Yv.isEqual(t.Yv)&&this.Xv.isEqual(t.Xv)&&this.Av===t.Av},Jl.prototype.tw=function(t){return new zl(this.Rv,t.key,t,this.metadata.fromCache,this.Xv.yi.has(t.key),this.Av)},Jl);function Jl(t,e,n,r){this.Rv=t,this.Yv=e,this.Xv=n,this.Av=r,this.$v=null,this.Zv=null,this.metadata=new Gl(n.hasPendingWrites,n.fromCache)}function Yl(t,e,n){this.qv=t,this.firestore=e,this.Av=n}function Xl(){return null!==Ml&&Ml.apply(this,arguments)||this}function $l(t,e,n,r,i,o){this.Rv=t,this.Tv=e,this.Fv=n,this.Vv=r,this.Uv=i,this.Av=o}function Ql(t,e){this.hasPendingWrites=t,this.fromCache=e}function Zl(t,e,n){this.Tv=t,this.firestore=e,this.Av=n,this.av=this.firestore.cv()}function tf(t){this.Rv=t,this.Cv=[],this.Pv=!1}function ef(t,e){this.Rv=t,this.Sv=e}function nf(t,e,n){var r=this;if(void 0===n&&(n=new uh),this.ov=null,this.hv=new qu,this.INTERNAL={delete:function(){return c(r,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.cv(),[4,this.av.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof t.options){var i=t;this.ov=i,this.fv=nf.lv(i),this.dv=i.name,this.vv=new Gr(e)}else{var o=t;if(!o.projectId)throw new qr(Fr.INVALID_ARGUMENT,"Must provide projectId");this.fv=new Pu(o.projectId,o.database),this.dv="[DEFAULT]",this.vv=new Br}this.wv=n,this.mv=new jl({}),this.gv=this.bv(this.fv)}function rf(t){if(void 0===t.host){if(void 0!==t.ssl)throw new qr(Fr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else hi("settings","non-empty string","host",t.host),this.host=t.host,li("settings","boolean","ssl",t.ssl),this.ssl=ti(t.ssl,!0);if(mi("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),li("settings","object","credentials",t.credentials),this.credentials=t.credentials,li("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?Tu("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&Tu("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=ti(t.timestampsInSnapshots,!0),li("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=ec.Zu;else{if(t.cacheSizeBytes!==Ul&&t.cacheSizeBytes<ec.$u)throw new qr(Fr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ec.$u);this.cacheSizeBytes=t.cacheSizeBytes}li("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}l(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(Kl.prototype.docChanges,t,{get:function(){return function(){throw new qr(Fr.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var of,sf=(i(af,of=Wl),Object.defineProperty(af.prototype,"id",{get:function(){return this.qv.path.$()},enumerable:!0,configurable:!0}),Object.defineProperty(af.prototype,"parent",{get:function(){var t=this.qv.path.J();return t.Y()?null:new Bl(new Vi(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(af.prototype,"path",{get:function(){return this.qv.path.it()},enumerable:!0,configurable:!0}),af.prototype.doc=function(t){if(ai("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=ku.Ur()),ui("CollectionReference.doc","non-empty string",1,t),""===t)throw new qr(Fr.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Mi.et(t);return Bl.Ev(this.qv.path.child(e),this.firestore,this.Av)},af.prototype.add=function(t){oi("CollectionReference.add",arguments,1),ui("CollectionReference.add","object",1,this.Av?this.Av.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},af.prototype.withConverter=function(t){return new af(this.nw,this.firestore,t)},af);function af(t,e,n){var r=of.call(this,ea.jn(t),e,n)||this;if((r.nw=t).length%2!=1)throw new qr(Fr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.it()+" has "+t.length);return r}function uf(t,e){if(void 0===e)return{merge:!1};if(mi(t,e,["merge","mergeFields"]),li(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+vi(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new qr(Fr.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+vi(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof dh}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new qr(Fr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function cf(t,e){return void 0===e?{}:(mi(t,e,["serverTimestamps"]),fi(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function hf(t,e){ci(t,"object",1,e),e&&(mi(t,e,["source"]),fi(t,0,"source",e.source,["default","server","cache"]))}function lf(t,e,n){if(e instanceof Bl){if(e.firestore!==n)throw new qr(Fr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw gi(t,"DocumentReference",1,e)}function ff(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var pf=Qr(Vl,"Use firebase.firestore() instead."),df=Qr(Fl,"Use firebase.firestore().runTransaction() instead."),vf=Qr(ql,"Use firebase.firestore().batch() instead."),yf=Qr(Bl,"Use firebase.firestore().doc() instead."),mf=Qr(Hl),gf=Qr(zl),wf=Qr(Wl),bf=Qr(Kl),If=Qr(sf,"Use firebase.firestore().collection() instead."),Ef=(Of.ew=function(t,e,n){return Su(Of.ph(),"IndexedDB not supported in current environment."),Eu("SimpleDb","Opening database:",t),new Bu((function(r,i){var o=window.indexedDB.open(t,e);o.onsuccess=function(t){var e=t.target.result;r(new Of(e))},o.onblocked=function(){i(new qr(Fr.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(t){var e=t.target.error;"VersionError"===e.name?i(new qr(Fr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(e)},o.onupgradeneeded=function(e){Eu("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var r=e.target.result;n.createOrUpgrade(r,o.transaction,e.oldVersion,tp).next((function(){Eu("SimpleDb","Database upgrade to version "+tp+" complete")}))}})).Ou()},Of.delete=function(t){return Eu("SimpleDb","Removing database:",t),Df(window.indexedDB.deleteDatabase(t)).Ou()},Of.ph=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(Of.rw())return!0;if(void 0===window.navigator)return!1;var t=g(),e=Of.iw(t),n=0<e&&e<10,r=Of.uw(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},Of.rw=function(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.sw)},Of.ow=function(t,e){return t.store(e)},Of.iw=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Of.uw=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Of.prototype.hw=function(t){this.db.onversionchange=function(e){return t(e)}},Of.prototype.runTransaction=function(t,e,n){return c(this,void 0,void 0,(function(){var r,i,o,s,a;return h(this,(function(u){switch(u.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,a,u;return h(this,(function(c){switch(c.label){case 0:++i,t=Nf.open(s.db,r?"readonly":"readwrite",e),c.label=1;case 1:return c.trys.push([1,3,,4]),(o=n(t).catch((function(e){return t.abort(e),Bu.reject(e)})).Ou()).catch((function(){})),[4,t.cw];case 2:return c.sent(),[2,{value:o}];case 3:return a=c.sent(),u="FirebaseError"!==a.name&&i<3,Eu("SimpleDb","Transaction failed with error: %s. Retrying: %s.",a.message,u),u?[3,4]:[2,{value:Promise.reject(a)}];case 4:return[2]}}))},s=this,u.label=1;case 1:return[5,o()];case 2:return"object"==typeof(a=u.sent())?[2,a.value]:[3,1];case 3:return[2]}}))}))},Of.prototype.close=function(){this.db.close()},Of),Tf=(Object.defineProperty(_f.prototype,"Cu",{get:function(){return this.fw},enumerable:!0,configurable:!0}),Object.defineProperty(_f.prototype,"dw",{get:function(){return this.lw},enumerable:!0,configurable:!0}),Object.defineProperty(_f.prototype,"cursor",{set:function(t){this.aw=t},enumerable:!0,configurable:!0}),_f.prototype.done=function(){this.fw=!0},_f.prototype.vw=function(t){this.lw=t},_f.prototype.delete=function(){return Df(this.aw.delete())},_f),Nf=(kf.open=function(t,e,n){return new kf(t.transaction(n,e))},Object.defineProperty(kf.prototype,"cw",{get:function(){return this.ww.promise},enumerable:!0,configurable:!0}),kf.prototype.abort=function(t){t&&this.ww.reject(t),this.aborted||(Eu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},kf.prototype.store=function(t){var e=this.transaction.objectStore(t);return Su(!!e,"Object store not part of transaction: "+t),new Af(e)},kf),Af=(Sf.prototype.put=function(t,e){return Df(void 0!==e?(Eu("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Eu("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},Sf.prototype.add=function(t){return Eu("SimpleDb","ADD",this.store.name,t,t),Df(this.store.add(t))},Sf.prototype.get=function(t){var e=this;return Df(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Eu("SimpleDb","GET",e.store.name,t,n),n}))},Sf.prototype.delete=function(t){return Eu("SimpleDb","DELETE",this.store.name,t),Df(this.store.delete(t))},Sf.prototype.count=function(){return Eu("SimpleDb","COUNT",this.store.name),Df(this.store.count())},Sf.prototype.mw=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.gw(n,(function(t,e){r.push(e)})).next((function(){return r}))},Sf.prototype.bw=function(t,e){Eu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.pw=!1;var r=this.cursor(n);return this.gw(r,(function(t,e,n){return n.delete()}))},Sf.prototype.yw=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.gw(r,e)},Sf.prototype._w=function(t){var e=this.cursor({});return new Bu((function(n,r){e.onerror=function(t){var e=Rf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},Sf.prototype.gw=function(t,e){var n=[];return new Bu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Tf(i),s=e(i.primaryKey,i.value,o);if(s instanceof Bu){var a=s.catch((function(t){return o.done(),Bu.reject(t)}));n.push(a)}o.Cu?r():null===o.dw?i.continue():i.continue(o.dw)}else r()}})).next((function(){return Bu.Vu(n)}))},Sf.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(Su(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},Sf.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.pw?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},Sf);function Sf(t){this.store=t}function kf(t){var e=this;this.transaction=t,this.aborted=!1,this.ww=new xu,this.transaction.oncomplete=function(){e.ww.resolve()},this.transaction.onabort=function(){t.error?e.ww.reject(t.error):e.ww.resolve()},this.transaction.onerror=function(t){var n=Rf(t.target.error);e.ww.reject(n)}}function _f(t){this.aw=t,this.fw=!1,this.lw=null}function Of(t){this.db=t,12.2===Of.iw(g())&&Tu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Df(t){return new Bu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Rf(t.target.error);n(e)}}))}var Cf=!1;function Rf(t){var e=Ef.iw(g());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new qr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Cf||(Cf=!0,setTimeout((function(){throw r}),0)),r}}return t}var xf=(Pf.Tw=function(t,e,n,r){return Su(""!==t.uid,"UserID must not be an empty string."),new Pf(t.t()?t.uid:"",e,n,r)},Pf.prototype.Dc=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uf(t).yw({index:ap.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},Pf.prototype.vo=function(t,e,n){return this.Ew(t).next((function(e){return e.lastStreamToken=n.toBase64(),Vf(t).put(e)}))},Pf.prototype.Eo=function(t){return this.Ew(t).next((function(t){return Ei.fromBase64String(t.lastStreamToken)}))},Pf.prototype.Do=function(t,e){return this.Ew(t).next((function(n){return n.lastStreamToken=e.toBase64(),Vf(t).put(n)}))},Pf.prototype.fo=function(t,e,n,r){var i=this,o=jf(t),s=Uf(t);return s.add({}).next((function(a){Su("number"==typeof a,"Auto-generated key is not a number");for(var u=new Lu(a,e,n,r),c=i.serializer.Dw(i.userId,u),h=[],l=new no((function(t,e){return Ou(t.it(),e.it())})),f=0,p=r;f<p.length;f++){var d=p[f],v=hp.key(i.userId,d.key.path,a);l=l.add(d.key.path.J()),h.push(s.put(c)),h.push(o.put(v,hp.PLACEHOLDER))}return l.forEach((function(e){h.push(i.sc.Ic(t,e))})),t.ec((function(){i.Iw[a]=u.keys()})),Bu.Vu(h).next((function(){return u}))}))},Pf.prototype._o=function(t,e){var n=this;return Uf(t).get(e).next((function(t){return t?(Su(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.Rw(t)):null}))},Pf.prototype.do=function(t,e){var n=this;return this.Iw[e]?Bu.resolve(this.Iw[e]):this._o(t,e).next((function(t){if(t){var r=t.keys();return n.Iw[e]=r}return null}))},Pf.prototype.Lo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Uf(t).yw({index:ap.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Su(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.Rw(e)),i.done()})).next((function(){return o}))},Pf.prototype.To=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Uf(t).yw({index:ap.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},Pf.prototype.uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uf(t).mw(ap.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.Rw(t)}))}))},Pf.prototype.oc=function(t,e){var n=this,r=hp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return jf(t).yw({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Hc(u);if(a===n.userId&&e.path.isEqual(h))return Uf(t).get(c).next((function(t){if(!t)throw Au("Dangling document-mutation reference found: "+r+" which points to "+c);Su(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.Rw(t))}));s.done()})).next((function(){return o}))},Pf.prototype.ac=function(t,e){var n=this,r=new no(Ou),i=[];return e.forEach((function(e){var o=hp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=jf(t).yw({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Hc(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Bu.Vu(i).next((function(){return n.Sw(t,r)}))},Pf.prototype.wc=function(t,e){var n=this;Su(!e.Nn(),"Document queries shouldn't go down this path"),Su(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=hp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new no(Ou);return jf(t).yw({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Hc(u);s===n.userId&&r.Z(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Sw(t,a)}))},Pf.prototype.Sw=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Uf(t).get(e).next((function(t){if(null===t)throw Au("Dangling document-mutation reference found, which points to "+e);Su(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.Rw(t))})))})),Bu.Vu(i).next((function(){return r}))},Pf.prototype.Io=function(t,e){var n=this;return Mf(t.Aw,this.userId,e).next((function(r){return t.ec((function(){n.th(e.batchId)})),Bu.forEach(r,(function(e){return n.Ks.Pc(t,e)}))}))},Pf.prototype.th=function(t){delete this.Iw[t]},Pf.prototype.po=function(t){var e=this;return this.Dc(t).next((function(n){if(!n)return Bu.resolve();var r=IDBKeyRange.lowerBound(hp.prefixForUser(e.userId)),i=[];return jf(t).yw({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Hc(t[1]);i.push(o)}else r.done()})).next((function(){Su(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.it()})))}))}))},Pf.prototype.Cs=function(t,e){return Lf(t,this.userId,e)},Pf.prototype.Ew=function(t){var e=this;return Vf(t).get(this.userId).next((function(t){return t||new sp(e.userId,-1,"")}))},Pf);function Pf(t,e,n,r){this.userId=t,this.serializer=e,this.sc=n,this.Ks=r,this.Iw={}}function Lf(t,e,n){var r=hp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return jf(t).yw({range:o,pw:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Mf(t,e,n){var r=t.store(ap.store),i=t.store(hp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.yw({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Su(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=hp.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Bu.Vu(o).next((function(){return c}))}function Uf(t){return jp.ow(t,ap.store)}function jf(t){return jp.ow(t,hp.store)}function Vf(t){return jp.ow(t,sp.store)}var Ff=(qf.prototype.Go=function(t){var e=this;return this.Cw(t).next((function(n){return n.highestTargetId=e.Wc.after(n.highestTargetId),e.Pw(t,n).next((function(){return n.highestTargetId}))}))},qf.prototype.Ro=function(t){return this.Cw(t).next((function(t){return Pi.L(new xi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},qf.prototype.zc=function(t){return Hf(t.Aw)},qf.prototype.Fo=function(t,e,n){var r=this;return this.Cw(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Pw(t,i)}))},qf.prototype.Wo=function(t,e){var n=this;return this.Kc(t,e).next((function(){return n.Cw(t).next((function(r){return r.targetCount+=1,n.kw(e,r),n.Pw(t,r)}))}))},qf.prototype.No=function(t,e){return this.Kc(t,e)},qf.prototype.Hc=function(t,e){var n=this;return this.Jc(t,e.targetId).next((function(){return Bf(t).delete(e.targetId)})).next((function(){return n.Cw(t)})).next((function(e){return Su(0<e.targetCount,"Removing from an empty target cache"),e.targetCount-=1,n.Pw(t,e)}))},qf.prototype.ds=function(t,e,n){var r=this,i=0,o=[];return Bf(t).yw((function(s,a){var u=r.serializer.Nw(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Hc(t,u)))})).next((function(){return Bu.Vu(o)})).next((function(){return i}))},qf.prototype.oe=function(t,e){var n=this;return Bf(t).yw((function(t,r){var i=n.serializer.Nw(r);e(i)}))},qf.prototype.Cw=function(t){return Gf(t.Aw)},qf.prototype.Pw=function(t,e){return(n=t,jp.ow(n,bp.store)).put(bp.key,e);var n},qf.prototype.Kc=function(t,e){return Bf(t).put(this.serializer.Ow(e))},qf.prototype.kw=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},qf.prototype.Yc=function(t){return this.Cw(t).next((function(t){return t.targetCount}))},qf.prototype.Qo=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Bf(t).yw({range:i,index:gp.queryTargetsIndexName},(function(t,r,i){var s=n.serializer.Nw(r);e.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},qf.prototype.Co=function(t,e,n){var r=this,i=[],o=zf(t);return e.forEach((function(e){var s=qc(e.path);i.push(o.put(new wp(n,s))),i.push(r.Ks._s(t,e))})),Bu.Vu(i)},qf.prototype.Ao=function(t,e,n){var r=this,i=zf(t);return Bu.forEach(e,(function(e){var o=qc(e.path);return Bu.Vu([i.delete([n,o]),r.Ks.Ts(t,e)])}))},qf.prototype.Jc=function(t,e){var n=zf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},qf.prototype.Ho=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=zf(t),i=Fa();return r.yw({range:n,pw:!0},(function(t,e,n){var r=Hc(t[1]),o=new Vi(r);i=i.add(o)})).next((function(){return i}))},qf.prototype.Cs=function(t,e){var n=qc(e.path),r=IDBKeyRange.bound([n],[Cu(n)],!1,!0),i=0;return zf(t).yw({index:wp.documentTargetsIndex,pw:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},qf.prototype.be=function(t,e){var n=this;return Bf(t).get(e).next((function(t){return t?n.serializer.Nw(t):null}))},qf);function qf(t,e){this.Ks=t,this.serializer=e,this.Wc=nh.qc()}function Bf(t){return jp.ow(t,gp.store)}function Gf(t){return Ef.ow(t,bp.store).get(bp.key).next((function(t){return Su(null!==t,"Missing metadata row."),t}))}function Hf(t){return Gf(t).next((function(t){return t.highestListenSequenceNumber}))}function zf(t){return jp.ow(t,wp.store)}var Wf,Kf=(Jf.prototype.Fs=function(t,e,n){return $f(t).put(Qf(e),n)},Jf.prototype.Us=function(t,e){var n=$f(t),r=Qf(e);return n.delete(r)},Jf.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Fw(t,r)}))},Jf.prototype.xs=function(t,e){var n=this;return $f(t).get(Qf(e)).next((function(t){return n.Vw(t)}))},Jf.prototype.Uw=function(t,e){var n=this;return $f(t).get(Qf(e)).next((function(t){var e=n.Vw(t);return e?{Nc:e,size:Zf(t)}:null}))},Jf.prototype.getEntries=function(t,e){var n=this,r=Pa();return this.xw(t,e,(function(t,e){var i=n.Vw(e);r=r.dt(t,i)})).next((function(){return r}))},Jf.prototype.jw=function(t,e){var n=this,r=Pa(),i=new Fi(Vi.W);return this.xw(t,e,(function(t,e){var o=n.Vw(e);i=o?(r=r.dt(t,o),i.dt(t,Zf(e))):(r=r.dt(t,null),i.dt(t,0))})).next((function(){return{Lw:r,qw:i}}))},Jf.prototype.xw=function(t,e,n){if(e.Y())return Bu.resolve();var r=IDBKeyRange.bound(e.first().path.nt(),e.last().path.nt()),i=e.yt(),o=i.Rt();return $f(t).yw({range:r},(function(t,e,r){for(var s=Vi.ft(t);o&&Vi.W(o,s)<0;)n(o,null),o=i.Rt();o&&o.isEqual(s)&&(n(o,e),o=i.St()?i.Rt():null),o?r.vw(o.path.nt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.St()?i.Rt():null}))},Jf.prototype.Jo=function(t,e,n){var r=this;Su(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Ma(),o=e.path.length+1,s={};if(n.isEqual(Pi.MIN)){var a=e.path.nt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.nt(),c=this.serializer.Bw(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=dp.collectionReadTimeIndex}return $f(t).yw(s,(function(t,n,s){if(t.length===o){var a=r.serializer.Mw(n);e.path.Z(a.key.path)?a instanceof As&&e.matches(a)&&(i=i.dt(a.key,a)):s.done()}})).next((function(){return i}))},Jf.prototype.eh=function(t,e){var n=this,r=xa(),i=this.serializer.Bw(e),o=$f(t),s=IDBKeyRange.lowerBound(i,!0);return o.yw({index:dp.readTimeIndex,range:s},(function(t,e){var o=n.serializer.Mw(e);r=r.dt(o.key,o),i=e.readTime})).next((function(){return{rh:r,readTime:n.serializer.Qw(i)}}))},Jf.prototype.uh=function(t){var e=this,n=$f(t),r=Pi.MIN;return n.yw({index:dp.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.Qw(n.readTime)),i.done()})).next((function(){return r}))},Jf.prototype.wo=function(t){return new Jf.Fc(this,!!t&&t.mo)},Jf.prototype.Vc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},Jf.prototype.getMetadata=function(t){return Xf(t).get(vp.key).next((function(t){return Su(!!t,"Missing document cache metadata"),t}))},Jf.prototype.Fw=function(t,e){return Xf(t).put(vp.key,e)},Jf.prototype.Vw=function(t){if(t){var e=this.serializer.Mw(t);return e instanceof Ss&&e.version.isEqual(Pi.q())?null:e}return null},Jf.Fc=(i(Yf,Wf=sc),Yf.prototype.qs=function(t){var e=this,n=[],r=0,i=new no((function(t,e){return Ou(t.it(),e.it())}));return this.ks.forEach((function(o,s){var a=e.Gw.get(o);if(Su(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){Su(!e.readTime.isEqual(Pi.MIN),"Cannot add a document with a read time of zero");var u=e.Uc.serializer.Ww(s,e.readTime);i=i.add(o.path.J());var c=Zf(u);r+=c-a,n.push(e.Uc.Fs(t,o,u))}else if(r-=a,e.mo){var h=e.Uc.serializer.Ww(new Ss(o,Pi.q()),e.readTime);n.push(e.Uc.Fs(t,o,h))}else n.push(e.Uc.Us(t,o))})),i.forEach((function(r){n.push(e.Uc.sc.Ic(t,r))})),n.push(this.Uc.updateMetadata(t,r)),Bu.Vu(n)},Yf.prototype.js=function(t,e){var n=this;return this.Uc.Uw(t,e).next((function(t){return null===t?(n.Gw.set(e,0),null):(n.Gw.set(e,t.size),t.Nc)}))},Yf.prototype.Ls=function(t,e){var n=this;return this.Uc.jw(t,e).next((function(t){var e=t.Lw;return t.qw.forEach((function(t,e){n.Gw.set(t,e)})),e}))},Yf),Jf);function Jf(t,e){this.serializer=t,this.sc=e}function Yf(t,e){var n=Wf.call(this)||this;return n.Uc=t,n.mo=e,n.Gw=new Uu((function(t){return t.toString()})),n}function Xf(t){return jp.ow(t,vp.store)}function $f(t){return jp.ow(t,dp.store)}function Qf(t){return t.path.nt()}function Zf(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Au("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var tp=9,ep=(np.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Su(n<r&&0<=n&&r<=tp,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o,s=new Nf(e);n<1&&1<=r&&(t.createObjectStore(ip.store),(o=t).createObjectStore(sp.store,{keyPath:sp.keyPath}),o.createObjectStore(ap.store,{keyPath:ap.keyPath,autoIncrement:!0}).createIndex(ap.userMutationsIndex,ap.userMutationsKeyPath,{unique:!0}),o.createObjectStore(hp.store),Sp(t),t.createObjectStore(dp.store));var a,u=Bu.resolve();return n<3&&3<=r&&(0!==n&&((a=t).deleteObjectStore(wp.store),a.deleteObjectStore(gp.store),a.deleteObjectStore(bp.store),Sp(t)),u=u.next((function(){return t=s.store(bp.store),e=new bp(0,0,Pi.MIN.G(),0),t.put(bp.key,e);var t,e}))),n<4&&4<=r&&(0!==n&&(u=u.next((function(){return e=t,(n=s).store(ap.store).mw().next((function(t){e.deleteObjectStore(ap.store),e.createObjectStore(ap.store,{keyPath:ap.keyPath,autoIncrement:!0}).createIndex(ap.userMutationsIndex,ap.userMutationsKeyPath,{unique:!0});var r=n.store(ap.store),i=t.map((function(t){return r.put(t)}));return Bu.Vu(i)}));var e,n}))),u=u.next((function(){t.createObjectStore(kp.store,{keyPath:kp.keyPath})}))),n<5&&5<=r&&(u=u.next((function(){return i.removeAcknowledgedMutations(s)}))),n<6&&6<=r&&(u=u.next((function(){return t.createObjectStore(vp.store),i.addDocumentGlobal(s)}))),n<7&&7<=r&&(u=u.next((function(){return i.ensureSequenceNumbers(s)}))),n<8&&8<=r&&(u=u.next((function(){return i.createCollectionParentIndex(t,s)}))),n<9&&9<=r&&(u=u.next((function(){var n,r;(r=t).objectStoreNames.contains("remoteDocumentChanges")&&r.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(dp.store)).createIndex(dp.readTimeIndex,dp.readTimeIndexPath,{unique:!1}),n.createIndex(dp.collectionReadTimeIndex,dp.collectionReadTimeIndexPath,{unique:!1})}))),u},np.prototype.addDocumentGlobal=function(t){var e=0;return t.store(dp.store).yw((function(t,n){e+=Zf(n)})).next((function(){var n=new vp(e);return t.store(vp.store).put(vp.key,n)}))},np.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(sp.store),r=t.store(ap.store);return n.mw().next((function(n){return Bu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.mw(ap.userMutationsIndex,i).next((function(r){return Bu.forEach(r,(function(r){Su(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.Rw(r);return Mf(t,n.userId,i).next((function(){}))}))}))}))}))},np.prototype.ensureSequenceNumbers=function(t){var e=t.store(wp.store),n=t.store(dp.store);return Hf(t).next((function(t){var r=[];return n.yw((function(n,i){var o=new Mi(n),s=[0,qc(o)];r.push(e.get(s).next((function(n){return n?Bu.resolve():(r=o,e.put(new wp(0,qc(r),t)));var r})))})).next((function(){return Bu.Vu(r)}))}))},np.prototype.createCollectionParentIndex=function(t,e){function n(t){if(i.add(t)){var e=t.$(),n=t.J();return r.put({collectionId:e,parent:qc(n)})}}t.createObjectStore(Ip.store,{keyPath:Ip.keyPath});var r=e.store(Ip.store),i=new Wc;return e.store(dp.store).yw({pw:!0},(function(t,e){return n(new Mi(t).J())})).next((function(){return e.store(hp.store).yw({pw:!0},(function(t,e){t[0];var r=t[1];return n((t[2],Hc(r)).J())}))}))},np);function np(t){this.serializer=t}function rp(t,e){this.seconds=t,this.nanoseconds=e}var ip=(op.store="owner",op.key="owner",op);function op(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var sp=(cp.store="mutationQueues",cp.keyPath="userId",cp),ap=(up.store="mutations",up.keyPath="batchId",up.userMutationsIndex="userMutationsIndex",up.userMutationsKeyPath=["userId","batchId"],up);function up(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}function cp(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}var hp=(lp.prefixForUser=function(t){return[t]},lp.prefixForPath=function(t,e){return[t,qc(e)]},lp.key=function(t,e,n){return[t,qc(e),n]},lp.store="documentMutations",lp.PLACEHOLDER=new lp,lp);function lp(){}function fp(t,e){this.path=t,this.readTime=e}function pp(t,e){this.path=t,this.version=e}var dp=(mp.store="remoteDocuments",mp.readTimeIndex="readTimeIndex",mp.readTimeIndexPath="readTime",mp.collectionReadTimeIndex="collectionReadTimeIndex",mp.collectionReadTimeIndexPath=["parentPath","readTime"],mp),vp=(yp.store="remoteDocumentGlobal",yp.key="remoteDocumentGlobalKey",yp);function yp(t){this.byteSize=t}function mp(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var gp=(Ap.store="targets",Ap.keyPath="targetId",Ap.queryTargetsIndexName="queryTargetsIndex",Ap.queryTargetsKeyPath=["canonicalId","targetId"],Ap),wp=(Np.store="targetDocuments",Np.keyPath=["targetId","path"],Np.documentTargetsIndex="documentTargetsIndex",Np.documentTargetsKeyPath=["path","targetId"],Np),bp=(Tp.key="targetGlobalKey",Tp.store="targetGlobal",Tp),Ip=(Ep.store="collectionParents",Ep.keyPath=["collectionId","parent"],Ep);function Ep(t,e){this.collectionId=t,this.parent=e}function Tp(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function Np(t,e,n){this.targetId=t,this.path=e,Su(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}function Ap(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}function Sp(t){t.createObjectStore(wp.store,{keyPath:wp.keyPath}).createIndex(wp.documentTargetsIndex,wp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(gp.store,{keyPath:gp.keyPath}).createIndex(gp.queryTargetsIndexName,gp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(bp.store)}var kp=(_p.store="clientMetadata",_p.keyPath="clientId",_p);function _p(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}var Op=l(l(l([sp.store,ap.store,hp.store,dp.store,gp.store,ip.store,bp.store,wp.store],[kp.store]),[vp.store]),[Ip.store]),Dp=(Cp.prototype.Ic=function(t,e){var n=this;if(Su(e.length%2==1,"Expected a collection path."),this.zw.has(e))return Bu.resolve();var r=e.$(),i=e.J();t.ec((function(){n.zw.add(e)}));var o={collectionId:r,parent:qc(i)};return Rp(t).put(o)},Cp.prototype.vc=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Cu(e),""],!1,!0);return Rp(t).mw(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Hc(o.parent))}return n}))},Cp);function Cp(){this.zw=new Wc}function Rp(t){return jp.ow(t,Ip.store)}var xp=(Pp.prototype.Mw=function(t){if(t.document)return this.Kw.We(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Vi.ft(t.noDocument.path),n=this.Hw(t.noDocument.readTime);return new Ss(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=Vi.ft(t.unknownDocument.path),n=this.Hw(t.unknownDocument.version),new ks(e,n)):Au("Unexpected DbRemoteDocument")},Pp.prototype.Ww=function(t,e){var n=this.Bw(e),r=t.key.path.J().nt();if(t instanceof As){var i=t.proto?t.proto:this.Kw.Ge(t),o=t.hasCommittedMutations;return new dp(null,null,i,o,n,r)}if(t instanceof Ss){var s=t.key.path.nt(),a=this.Jw(t.version);return o=t.hasCommittedMutations,new dp(null,new fp(s,a),null,o,n,r)}if(t instanceof ks){s=t.key.path.nt();var u=this.Jw(t.version);return new dp(new pp(s,u),null,null,!0,n,r)}return Au("Unexpected MaybeDocument")},Pp.prototype.Bw=function(t){var e=t.G();return[e.seconds,e.nanoseconds]},Pp.prototype.Qw=function(t){var e=new xi(t[0],t[1]);return Pi.L(e)},Pp.prototype.Jw=function(t){var e=t.G();return new rp(e.seconds,e.nanoseconds)},Pp.prototype.Hw=function(t){var e=new xi(t.seconds,t.nanoseconds);return Pi.L(e)},Pp.prototype.Dw=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.Kw.tr(t)})),i=e.mutations.map((function(t){return n.Kw.tr(t)}));return new ap(t,e.batchId,e.En.toMillis(),r,i)},Pp.prototype.Rw=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.Kw.rr(t)})),r=t.mutations.map((function(t){return e.Kw.rr(t)})),i=xi.fromMillis(t.localWriteTimeMs);return new Lu(t.batchId,i,n,r)},Pp.prototype.Yw=function(t){var e=[];return t.forEach((function(t){e.push(qc(t.path))})),e},Pp.prototype.Xw=function(t){for(var e=Fa(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new Vi(Hc(i)))}return e},Pp.prototype.Nw=function(t){var e,n=this.Hw(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Hw(t.lastLimboFreeSnapshotVersion):Pi.MIN;return e=void 0!==t.query.documents?this.Kw.lr(t.query):this.Kw.gr(t.query),new da(e,t.targetId,0,t.lastListenSequenceNumber,n,r,Ei.fromBase64String(t.resumeToken))},Pp.prototype.Ow=function(t){Su(0===t.ci,"Only queries with purpose 0 may be stored, got "+t.ci);var e,n=this.Jw(t.ai),r=this.Jw(t.lastLimboFreeSnapshotVersion);e=t.target.Nn()?this.Kw.ar(t.target):this.Kw.dr(t.target);var i=t.resumeToken.toBase64();return new gp(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},Pp);function Pp(t){this.Kw=t}var Lp,Mp="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Up=(i(Fp,Lp=Pc),Fp),jp=(Vp.ow=function(t,e){if(t instanceof Up)return Ef.ow(t.Aw,e);throw Au("IndexedDbPersistence must use instances of IndexedDbTransaction")},Vp.om=function(t){return c(this,void 0,void 0,(function(){var e;return h(this,(function(n){switch(n.label){case 0:if(!Vp.ph())throw new qr(Fr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(e=new Vp(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.hm,t.fh,t.serializer,t.$w)).start()];case 1:return n.sent(),[2,e]}}))}))},Vp.prototype.start=function(){var t=this;return Su(!this.ss,"IndexedDbPersistence double-started!"),Su(null!==this.window,"Expected 'window' to be defined"),Ef.ew(this.rm,tp,new ep(this.serializer)).then((function(e){return t.cm=e,t.am()})).then((function(){return t.fm(),t.lm(),t.dm(),t.cm.runTransaction("readonly",[bp.store],(function(t){return Hf(t)}))})).then((function(e){t.$c=new Vu(e,t.$w)})).then((function(){t.Zc=!0})).catch((function(e){return t.cm&&t.cm.close(),Promise.reject(e)}))},Vp.prototype.na=function(t){var e=this;return this.em=function(n){return c(e,void 0,void 0,(function(){return h(this,(function(e){return this.ss?[2,t(n)]:[2]}))}))},t(this.isPrimary)},Vp.prototype.ia=function(t){var e=this;this.cm.hw((function(n){return c(e,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},Vp.prototype.nh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fh.ou((function(){return c(e,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.ss?[4,this.am()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},Vp.prototype.am=function(){var t=this;return this.cm.runTransaction("readwrite",Op,(function(e){return Bp(e).put(new kp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.vm(e).next((function(e){e||(t.isPrimary=!1,t.fh.ou((function(){return t.em(!1)})))}))})).next((function(){return t.wm(e)})).next((function(n){return t.isPrimary&&!n?t.mm(e).next((function(){return!1})):!!n&&t.gm(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return Eu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fh.ou((function(){return t.em(e)})),t.isPrimary=e}))},Vp.prototype.vm=function(t){var e=this;return qp(t).get(ip.key).next((function(t){return Bu.resolve(e.bm(t))}))},Vp.prototype.pm=function(t){return Bp(t).delete(this.clientId)},Vp.prototype.ym=function(){return c(this,void 0,void 0,(function(){var t=this;return h(this,(function(e){switch(e.label){case 0:return!this.isPrimary||this._m(this.im,18e5)?[3,2]:(this.im=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=Vp.ow(e,kp.store);return n.mw().next((function(e){var r=t.Im(e,18e5),i=e.filter((function(t){return-1===r.indexOf(t)}));return Bu.forEach(i,(function(t){return n.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:e.sent().forEach((function(e){t.window.localStorage.removeItem(t.Tm(e.clientId))})),e.label=2;case 2:return[2]}}))}))},Vp.prototype.dm=function(){var t=this;this.nm=this.fh.yu("client_metadata_refresh",4e3,(function(){return t.am().then((function(){return t.ym()})).then((function(){return t.dm()}))}))},Vp.prototype.bm=function(t){return!!t&&t.ownerId===this.clientId},Vp.prototype.wm=function(t){var e=this;return qp(t).get(ip.key).next((function(n){if(null!==n&&e._m(n.leaseTimestampMs,5e3)&&!e.Em(n.ownerId)){if(e.bm(n)&&e.networkEnabled)return!0;if(!e.bm(n)){if(!n.allowTabSynchronization)throw new qr(Fr.FAILED_PRECONDITION,Mp);return!1}}return!(!e.networkEnabled||!e.inForeground)||Bp(t).mw().next((function(t){return void 0===e.Im(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Eu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},Vp.prototype.shutdown=function(){return c(this,void 0,void 0,(function(){var t=this;return h(this,(function(e){switch(e.label){case 0:return this.Zc=!1,this.Dm(),this.nm&&(this.nm.cancel(),this.nm=null),this.Rm(),this.Sm(),[4,this.cm.runTransaction("readwrite",[ip.store,kp.store],(function(e){return t.mm(e).next((function(){return t.pm(e)}))}))];case 1:return e.sent(),this.cm.close(),this.Am(),[2]}}))}))},Vp.prototype.Im=function(t,e){var n=this;return t.filter((function(t){return n._m(t.updateTimeMs,e)&&!n.Em(t.clientId)}))},Vp.prototype.$o=function(){var t=this;return this.cm.runTransaction("readonly",[kp.store],(function(e){return Bp(e).mw().next((function(e){return t.Im(e,18e5).map((function(t){return t.clientId}))}))}))},Vp.clearPersistence=function(t){return c(this,void 0,void 0,(function(){var e;return h(this,(function(n){switch(n.label){case 0:return Vp.ph()?(e=t+Vp.um,[4,Ef.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(Vp.prototype,"ss",{get:function(){return this.Zc},enumerable:!0,configurable:!0}),Vp.prototype.Js=function(t){return Su(this.ss,"Cannot initialize MutationQueue before persistence is started."),xf.Tw(t,this.serializer,this.sc,this.Ks)},Vp.prototype.Zs=function(){return Su(this.ss,"Cannot initialize TargetCache before persistence is started."),this.$s},Vp.prototype.Xs=function(){return Su(this.ss,"Cannot initialize RemoteDocumentCache before persistence is started."),this.uc},Vp.prototype.no=function(){return Su(this.ss,"Cannot initialize IndexManager before persistence is started."),this.sc},Vp.prototype.runTransaction=function(t,e,n){var r=this;Eu("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.cm.runTransaction(o,Op,(function(o){return i=new Up(o,r.$c.next()),"readwrite-primary"===e?r.vm(o).next((function(t){return!!t||r.wm(o)})).next((function(e){if(!e)throw Tu("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fh.ou((function(){return r.em(!1)})),new qr(Fr.FAILED_PRECONDITION,xc);return n(i)})).next((function(t){return r.gm(o).next((function(){return t}))})):r.Cm(o).next((function(){return n(i)}))})).then((function(t){return i.rc(),t}))},Vp.prototype.Cm=function(t){var e=this;return qp(t).get(ip.key).next((function(t){if(null!==t&&e._m(t.leaseTimestampMs,5e3)&&!e.Em(t.ownerId)&&!e.bm(t)&&!t.allowTabSynchronization)throw new qr(Fr.FAILED_PRECONDITION,Mp)}))},Vp.prototype.gm=function(t){var e=new ip(this.clientId,this.allowTabSynchronization,Date.now());return qp(t).put(ip.key,e)},Vp.ph=function(){return Ef.ph()},Vp.Pm=function(t){var e=t.Dn.projectId;return t.Dn.xr||(e+="."+t.Dn.database),"firestore/"+t.persistenceKey+"/"+e+"/"},Vp.prototype.mm=function(t){var e=this,n=qp(t);return n.get(ip.key).next((function(t){return e.bm(t)?(Eu("IndexedDbPersistence","Releasing primary lease."),n.delete(ip.key)):Bu.resolve()}))},Vp.prototype._m=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Tu("Detected an update time that is in the future: "+t+" > "+n),1))},Vp.prototype.fm=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.tm=function(){t.fh.ou((function(){return t.inForeground="visible"===t.document.visibilityState,t.am()}))},this.document.addEventListener("visibilitychange",this.tm),this.inForeground="visible"===this.document.visibilityState)},Vp.prototype.Rm=function(){this.tm&&(Su(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.tm),this.tm=null)},Vp.prototype.lm=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Zw=function(){t.Dm(),t.fh.ou((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Zw))},Vp.prototype.Sm=function(){this.Zw&&(Su("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Zw),this.Zw=null)},Vp.prototype.Em=function(t){try{var e=null!==this.sm.getItem(this.Tm(t));return Eu("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Tu("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},Vp.prototype.Dm=function(){try{this.sm.setItem(this.Tm(this.clientId),String(Date.now()))}catch(t){Tu("Failed to set zombie client id.",t)}},Vp.prototype.Am=function(){try{this.sm.removeItem(this.Tm(this.clientId))}catch(t){}},Vp.prototype.Tm=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},Vp.um="main",Vp);function Vp(t,e,n,r,i,o,s,a){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.fh=o,this.$w=a,this.Zc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zw=null,this.inForeground=!1,this.tm=null,this.nm=null,this.im=Number.NEGATIVE_INFINITY,this.em=function(t){return Promise.resolve()},this.Ks=new Gp(this,i),this.rm=e+Vp.um,this.serializer=new xp(s),this.document=r.document,this.$s=new Ff(this.Ks,this.serializer),this.sc=new Dp,this.uc=new Kf(this.serializer,this.sc),!r.window||!r.window.localStorage)throw new qr(Fr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.sm=this.window.localStorage}function Fp(t,e){var n=Lp.call(this)||this;return n.Aw=t,n.Po=e,n}function qp(t){return t.store(ip.store)}function Bp(t){return t.store(kp.store)}var Gp=(Hp.prototype.as=function(t){var e=this.km(t);return this.db.Zs().Yc(t).next((function(t){return e.next((function(e){return t+e}))}))},Hp.prototype.km=function(t){var e=0;return this.ls(t,(function(t){e++})).next((function(){return e}))},Hp.prototype.oe=function(t,e){return this.db.Zs().oe(t,e)},Hp.prototype.ls=function(t,e){return this.Nm(t,(function(t,n){return e(n)}))},Hp.prototype.zs=function(t){this.sa=t},Hp.prototype._s=function(t,e){return zp(t,e)},Hp.prototype.Ts=function(t,e){return zp(t,e)},Hp.prototype.ds=function(t,e,n){return this.db.Zs().ds(t,e,n)},Hp.prototype.Pc=function(t,e){return zp(t,e)},Hp.prototype.Om=function(t,e){return this.sa.Cs(e)?Bu.resolve(!0):(r=e,i=!1,Vf(n=t)._w((function(t){return Lf(n,t,r).next((function(t){return t&&(i=!0),Bu.resolve(!t)}))})).next((function(){return i})));var n,r,i},Hp.prototype.vs=function(t,e){var n=this,r=this.db.Xs().wo(),i=[],o=0;return this.Nm(t,(function(s,a){if(a<=e){var u=n.Om(t,s).next((function(e){if(!e)return o++,r.xs(t,s).next((function(){return r.Us(s),zf(t).delete([0,qc(s.path)])}))}));i.push(u)}})).next((function(){return Bu.Vu(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},Hp.prototype.removeTarget=function(t,e){var n=e.fi(t.Po);return this.db.Zs().No(t,n)},Hp.prototype.Oo=function(t,e){return zp(t,e)},Hp.prototype.Nm=function(t,e){var n,r=zf(t),i=Vu.Xr;return r.yw({index:wp.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Vu.Xr&&e(new Vi(Hc(n)),i),i=a,n=s):i=Vu.Xr})).next((function(){i!==Vu.Xr&&e(new Vi(Hc(n)),i)}))},Hp.prototype.ms=function(t){return this.db.Xs().Vc(t)},Hp);function Hp(t,e){this.db=t,this.sa=null,this.ns=new rc(this,e)}function zp(t,e){return zf(t).put((n=e,r=t.Po,new wp(0,qc(n.path),r)));var n,r}var Wp=(Jp.prototype.initialize=function(t,e,n,r,i,o){return c(this,void 0,void 0,(function(){var s,a,u,c;return h(this,(function(h){switch(h.label){case 0:if(Su(o.aa,"IndexedDbPersistenceProvider can only provide durable persistence"),Su(!this.persistence,"configure() already called"),s=jp.Pm(e),a=new vu(e.Dn,{_e:!0}),!Ac.ph(n))throw new qr(Fr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return this.td=o.synchronizeTabs?new Ac(t,n,s,r,i):new Rc,u=this,[4,jp.om({allowTabSynchronization:o.synchronizeTabs,persistenceKey:s,clientId:r,platform:n,fh:t,serializer:a,hm:ec.Hu(o.cacheSizeBytes),$w:this.td})];case 1:return u.persistence=h.sent(),c=this.persistence.Ks.ns,this.Yd=new nc(c,t),[2]}}))}))},Jp.prototype.la=function(){return Su(!!this.persistence,"initialize() not called"),this.persistence},Jp.prototype.da=function(){return Su(!!this.td,"initialize() not called"),this.td},Jp.prototype.fa=function(){return Su(!!this.Yd,"initialize() not called"),this.Yd},Jp.prototype.clearPersistence=function(t){var e=jp.Pm(t);return jp.clearPersistence(e)},Jp),Kp={Firestore:pf,GeoPoint:Ri,Timestamp:xi,Blob:Ci,Transaction:df,WriteBatch:vf,DocumentReference:yf,DocumentSnapshot:mf,Query:wf,QueryDocumentSnapshot:gf,QuerySnapshot:bf,CollectionReference:If,FieldPath:dh,FieldValue:qh,setLogLevel:Vl.setLogLevel,CACHE_SIZE_UNLIMITED:Ul};function Jp(){}var Yp,Xp,$p,Qp=(cd.prototype.Xf=function(t){},cd.prototype.shutdown=function(){},cd),Zp=(ud.prototype.Xf=function(t){this.jm.push(t)},ud.prototype.shutdown=function(){window.removeEventListener("online",this.Fm),window.removeEventListener("offline",this.Um)},ud.prototype.Lm=function(){window.addEventListener("online",this.Fm),window.addEventListener("offline",this.Um)},ud.prototype.Vm=function(){Eu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.jm;t<e.length;t++)(0,e[t])(0)},ud.prototype.xm=function(){Eu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.jm;t<e.length;t++)(0,e[t])(1)},ud.ph=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},ud),td=(ad.prototype.Ma=function(t){Su(!this.Mm,"Called onOpen on stream twice!"),this.Mm=t},ad.prototype.xa=function(t){Su(!this.Qm,"Called onClose on stream twice!"),this.Qm=t},ad.prototype.onMessage=function(t){Su(!this.Gm,"Called onMessage on stream twice!"),this.Gm=t},ad.prototype.close=function(){this.Bm()},ad.prototype.send=function(t){this.qm(t)},ad.prototype.Wm=function(){Su(void 0!==this.Mm,"Cannot call onOpen because no callback was set"),this.Mm()},ad.prototype.zm=function(t){Su(void 0!==this.Qm,"Cannot call onClose because no callback was set"),this.Qm(t)},ad.prototype.Km=function(t){Su(void 0!==this.Gm,"Cannot call onMessage because no callback was set"),this.Gm(t)},ad),ed={BatchGetDocuments:"batchGet",Commit:"commit"},nd="gl-js/ fire/"+jr,rd=(sd.prototype.Jm=function(t,e){if(e)for(var n in e.o)e.o.hasOwnProperty(n)&&(t[n]=e.o[n]);t["X-Goog-Api-Client"]=nd},sd.prototype.tf=function(t,e,n){var r=this,i=this.Ym(t);return new Promise((function(o,s){var a=new Ur;a.listenOnce(Lr.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Pr.NO_ERROR:var e=a.getResponseJson();Eu("Connection","XHR received:",JSON.stringify(e)),o(e);break;case Pr.TIMEOUT:Eu("Connection",'RPC "'+t+'" timed out'),s(new qr(Fr.DEADLINE_EXCEEDED,"Request time out"));break;case Pr.HTTP_ERROR:var n=a.getStatus();if(Eu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),0<n){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=(u=r.status.toLowerCase().replace("_","-"),0<=Object.values(Fr).indexOf(u)?u:Fr.UNKNOWN);s(new qr(i,r.message))}else s(new qr(Fr.UNKNOWN,"Server responded with status "+a.getStatus()))}else Eu("Connection",'RPC "'+t+'" failed'),s(new qr(Fr.UNAVAILABLE,"Connection failed."));break;default:Au('RPC "'+t+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{Eu("Connection",'RPC "'+t+'" completed.')}var u}));var c=u({},e);delete c.database;var h=JSON.stringify(c);Eu("Connection","XHR sending: ",i+" "+h);var l={"Content-Type":"text/plain"};r.Jm(l,n),a.send(i,"POST",h,l,15)}))},sd.prototype.nf=function(t,e,n){return this.tf(t,e,n)},sd.prototype.Qa=function(t,e){var n=[this.Hm,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=xr(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.Dn.projectId+"/databases/"+this.Dn.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Jm(i.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=g().indexOf("Electron/")||function(){var t=g();return 0<=t.indexOf("MSIE ")||0<=t.indexOf("Trident/")}()||0<=g().indexOf("MSAppHost/")||function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))}Eu("Connection","Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,c=!1,h=new td({qm:function(t){c?Eu("Connection","Not sending because WebChannel is closed:",t):(u||(Eu("Connection","Opening WebChannel transport."),a.open(),u=!0),Eu("Connection","WebChannel sending:",t),a.send(t))},Bm:function(){return a.close()}});return s(Mr.EventType.OPEN,(function(){c||Eu("Connection","WebChannel transport opened.")})),s(Mr.EventType.CLOSE,(function(){c||(c=!0,Eu("Connection","WebChannel transport closed"),h.zm())})),s(Mr.EventType.ERROR,(function(t){c||(c=!0,Eu("Connection","WebChannel transport errored:",t),h.zm(new qr(Fr.UNAVAILABLE,"The operation could not be completed")))})),s(Mr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Su(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Eu("Connection","WebChannel received error:",i);var o=i.status,s=function(){var t=Ws[o];if(void 0!==t)return Ca(t)}(),u=i.message;void 0===s&&(s=Fr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.zm(new qr(s,u)),a.close()}else Eu("Connection","WebChannel received:",n),h.Km(n)}})),setTimeout((function(){h.Wm()}),0),h},sd.prototype.Ym=function(t){var e=ed[t];return Su(void 0!==e,"Unknown REST mapping for: "+t),this.Hm+"/v1/projects/"+this.Dn.projectId+"/databases/"+this.Dn.database+"/documents:"+e},sd),id=(Object.defineProperty(od.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(od.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),od.prototype.$d=function(t){return Promise.resolve(new rd(t))},od.prototype.Zd=function(){return Zp.ph()?new Zp:new Qp},od.prototype.tv=function(t){return new vu(t,{_e:!0})},od.prototype.Vr=function(t){return JSON.stringify(t)},od.prototype.atob=function(t){return atob(t)},od.prototype.btoa=function(t){return btoa(t)},od.prototype.randomBytes=function(t){if(t<=0)return new Uint8Array;var e=new Uint8Array(t);return crypto.getRandomValues(e),e},od);function od(){this.N="undefined"!=typeof atob}function sd(t){this.Dn=t.Dn;var e=t.ssl?"https":"http";this.Hm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function ad(t){this.qm=t.qm,this.Bm=t.Bm}function ud(){var t=this;this.Fm=function(){return t.Vm()},this.Um=function(){return t.xm()},this.jm=[],this.Lm()}function cd(){}yu.Fr(new id),Yp=function(t,e){return new Vl(t,e,new Wp)},($p=n).INTERNAL.registerComponent(new A("firestore",(function(t){var e=t.getProvider("app").getImmediate();return Yp(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((Su((Xp=Kp)&&"object"==typeof Xp,"shallowCopy() expects object parameter."),u({},Xp)))),$p.registerVersion("@firebase/firestore","1.13.0")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.")}}(n(0))}).call(this,n(3),n(10))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||h||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports='\r\n<nav id="appMenu" class="w3-bar w3-firebase">\r\n  <a href=""      data-key=""          route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button selected"><i class="fa fa-2x fa-home"></i></a>\r\n  <a href="notes" data-key="notes"     route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button "><i class="fa fa-2x fa-sticky-note"></i></a>\r\n  <a href="funcs"  data-key="functions" route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button "><i class="fa fa-2x fa-cogs"></i></a>\r\n  <a href="about" data-key="about"     route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button w3-right"><i class="fa fa-2x fa-question"></i></a>\r\n  <a href="auth"  data-key="auth"      route-link on-publish="TOPICS.VIEW_CHANGE:sync" class="w3-bar-item w3-button w3-right"><i class="fa fa-2x fa-user"></i></a>\r\n</nav>  \r\n'},function(t,e){t.exports='\r\n<div class="w3-container w3-center w3-animate-left" style="padding-top:60px;">\r\n  <img src="./assets/img/logo.png" alt="logo" style="width: 75%">\r\n  <p>Firebase es una plataforma para el desarrollo de aplicaciones web y aplicaciones móviles desarrollada Google.</p>\r\n\r\n  <div xbind xif="@mustLogin" login-container class="w3-container w3-padding w3-center">\r\n    <button type="button" on-click="login" class="w3-button w3-firebase-btn" style="width:75%">Iniciar sesión</button>\r\n  </div>\r\n\r\n</div>'},function(t,e){t.exports='\r\n<div>\r\n  <div class="w3-container w3-margin-bottom w3-animate-left">\r\n    <h3>Sobre Firebase App</h3>\r\n    <p style="text-indent:1em;">\r\n      Aplicación de prueba de los servicios y funcionalidades de la plataforma Firebase.\r\n    </p>\r\n    <h3>Qué es Firebase</h3>\r\n    <p style="text-indent:1em;">\r\n      Firebase te da las herramientas para programar apps de alta calidad, aumentar tu base de usuarios y ganar más dinero. \r\n      Nos encargamos de los aspectos básicos para que puedas monetizar tu negocio y concentrarte en tus usuarios.\r\n    </p>\r\n    <div class="w3-container w3-margin-bottom w3-center">\r\n      <button type="button" about-btn class="w3-button w3-firebase-btn"><i class="fa fa-2x fa-home"></i></button>\r\n    </div>\r\n</div>\r\n'},function(t,e){t.exports='\r\n<div>\r\n  <div class="w3-margin-bottom w3-animate-left">\r\n    <div id="loading-box" class="w3-margin w3-border w3-round w3-animate-left" style="display: none;">\r\n      <p class="w3-center" style="overflow:hidden;">\r\n        <i class="fa fa-2x fa-cog fa-spin"></i><br>Cargando notas...\r\n      </p>\r\n    </div>\r\n    <div id="list-container" style="display: none;">\r\n      <div class="w3-center" style="">\r\n        <br/>\r\n        <button xbind on-click="add" class="w3-button w3-firebase-btn"><i class="fa fa-2x fa-plus"></i></button>\r\n      </div>\r\n      <div template>\r\n        <div xbind xfor="nota in notas" id="div-{nota.id}" class="w3-padding w3-animate-right" style="transition: all 1s">      \r\n          <div class="w3-card-4 w3-padding w3-round">\r\n            <textarea xbind class="w3-padding w3-round" style="height:100px; display:inline-block;">{nota.contenido}</textarea>\r\n            <div class="w3-small" xbind>Fecha: {nota.timestamp|format,hhmmss}<br>Usuario: {nota.uid}</div>\r\n            <div class="w3-right-align w3-padding-small w3-border-top">\r\n              <button xbind id="save-{nota.id}" on-click="save" class="w3-tbutton w3-firebase-btn"><i class="fa fa-2x fa-save"></i></button>\r\n              <button xbind id="delete-{nota.id}" on-click="delete" class="w3-tbutton w3-firebase-btn"><i class="fa fa-2x fa-trash"></i></button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>  \r\n</div>\r\n'},function(t,e){t.exports='\r\n<div>\r\n  <div class="w3-container w3-margin-bottom w3-animate-left">\r\n\r\n    <div xbind xif="@state==\'login\'">\r\n      <h3>Inicio de sesión</h3>\r\n      <form class="w3-margin-bottom">\r\n        <label for="txt-login-email">Correo electrónico</label>\r\n        <input xbind="value:email" class="w3-input w3-border" type="text" id="txt-login-email" >\r\n        <label for="txt-login-password">Contraseña</label>\r\n        <input xbind="value:password" class="w3-input w3-border" type="password" id="txt-login-password" >\r\n      </form>\r\n      <div class="w3-container w3-margin-bottom w3-center">\r\n        <button type="button" on-click="login" class="w3-button w3-firebase-btn" style="width:75%">Iniciar sesión</button>\r\n      </div>\r\n      <div class="w3-center">\r\n        <p style="text-indent:1em;text-align:left">\r\n          Si todavía no dispones de una cuenta con la que identificarte o quieres crear una nueva pulsa el botón...\r\n        </p>\r\n        <button type="button" on-click="initCreate" class="w3-button w3-firebase-btn" style="width:75%">Crear una cuenta</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div xbind xif="@state==\'create\'" style="display:none">\r\n      <h3>Registro</h3>\r\n      <form class="w3-margin-bottom">\r\n        <label for="txt-email">Correo electrónico</label>\r\n        <input xbind="value:email" class="w3-input w3-border" type="text" id="txt-email">\r\n        <label for="txt-password">Contraseña</label>\r\n        <input xbind="value:password" class="w3-input w3-border" type="password" id="txt-password">\r\n        <label for="txt-password-check">Repite la contraseña</label>\r\n        <input xbind="value:password" class="w3-input w3-border" type="password" id="txt-password-check">\r\n      </form>\r\n      <div class="w3-container w3-margin-bottom w3-center">\r\n        <button type="button" on-click="cancelCreate" class="w3-button w3-firebase-btn" style="width:48%">Cancelar</button>\r\n        <button type="button" on-click="createAccount" class="w3-button w3-firebase-btn" style="width:48%">Aceptar</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div xbind xif="@state==\'logged\'">\r\n      <h3>Datos de la sesión</h3>\r\n      <form class="w3-margin-bottom">\r\n        <label for="txt-login-email">Correo electrónico</label>\r\n        <input xbind="value:email" class="w3-input w3-border" type="text" id="txt-logged-email" disabled >\r\n        <label>Contraseña</label>\r\n        <input class="w3-input w3-border" value="xxxxxxxxxxxxxx" type="password" disabled >\r\n      </form>\r\n      <div class="w3-container w3-margin w3-center">\r\n        <button type="button" on-click="logout" class="w3-button w3-firebase-btn" style="width:75%">Cerrar la sesión</button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n'},function(t,e){t.exports='\r\n<div>\r\n  <div class="w3-container w3-margin-bottom w3-animate-left">\r\n\r\n    <h3>Invocación de funciones</h3>\r\n    <p style="text-indent:1em;">\r\n      Cloud Functions para Firebase te permite ejecutar automáticamente el código de backend en respuesta a eventos activados \r\n      por las funciones de Firebase y las solicitudes HTTPS. \r\n    </p>\r\n    <p style="text-indent:1em;">\r\n      Tu código se almacena en la nube de Google y se ejecuta en un entorno administrado. \r\n      No necesitas administrar ni escalar tus propios servidores.\r\n    </p>\r\n\r\n    <div class="w3-container w3-margin-bottom w3-center">\r\n      <button type="button" on-click="callHelloWorld" class="w3-button w3-firebase-btn" style="width:75%;text-align:left;padding-left: 20px;">\r\n        <i class="fa fa-2x fa-gear"></i> Mensaje\r\n      </button>\r\n      <div class="w3-container w3-border-bottom w3-padding w3-margin" on-publish="msg__helloworld"></div>\r\n    </div>\r\n        \r\n    <div class="w3-container w3-margin-bottom w3-center">\r\n      <button type="button" on-click="callGetServerTime" class="w3-button w3-firebase-btn" style="width:75%;text-align:left;padding-left: 20px;">\r\n        <i class="fa fa-2x fa-clock-o"></i> Hora del servidor\r\n      </button>\r\n      <div class="w3-container w3-border-bottom w3-padding w3-margin" on-publish="msg__getdate"></div>\r\n    </div>\r\n\r\n    <div class="w3-container w3-center">\r\n      <button type="button" on-click="goToHome" class="w3-button w3-firebase-btn"><i class="fa fa-2x fa-home"></i></button>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n'},function(t,e,n){"use strict";n.r(e);let r={};!function(t,e){var n=t.Pol={apply:function t(e,n,r){if(r&&t(e,r),e&&n&&"object"==typeof n)for(var i in n)"object"==typeof n[i]?t(e[i],n[i]):e[i]=n[i];return e}};!function(t){t.apply(t,{toArray:function(t){return Array.prototype.slice.call(t)},isNull:function(t){return null===t},isArray:function(t){return Array.isArray(t)},isString:function(t){return"string"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isNumber:function(t){return"number"==typeof t},isFunction:function(t){return"function"==typeof t},isDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)},isObject:function(t){return t&&"object"==typeof t},clone:function(e){return t.isDate(e)?new Date(e.getTime()):t.isArray(e)?e.slice(0):t.isObject(e)&&e.clone?e.clone():t.isObject(e)?Object.keys(e).reduce((function(n,r){return n[r]=t.clone(e[r]),n}),{}):e},join:function(t,e,n){return t.reduce((function(t,n){return t.append(n[e||"id"])}),[]).join(void 0===n?"-":n||"")},stringBuilder:function(t){return{value:t||"",append:function(t){return this.value=this.value+t,this},appendLine:function(t){return this.value=this.value+(t||"")+"\n",this}}},build:function(e,r,i){let o=t.isString(r)?{innerHTML:r}:r,s=n.apply(document.createElement(e),o);return i?s.firstElementChild:s},$:function(e,n){return"string"==typeof e?document.getElementById(e)||t.toArray((n||document).querySelectorAll(e)||[]):e},parseQueryString:function(){return location.search.slice(1).split("&").reduce((t,e)=>(t[e.split("=")[0]]=e.split("=")[1]||"",t),{})}})}(n),function(t){t.apply(String,{stringBuilder:t.stringBuilder,leftPad:function(t,e,n){var r=""+t;for(null!=n&&""!==n||(n=" ");r.length<e;)r=n+r;return r},trimValues:function(t){return t.map((function(t){return t.trim()}))}}),t.apply(String.prototype,{replaceAll:function(t,e){return this.split(t).join(e)},repeat:String.prototype.repeat||function(t){return new Array(t+1).join(this)},contains:String.prototype.includes||function(t,e){return this.indexOf(t)>=(e||0)},startsWith:String.prototype.startsWith||function(t){return 0==this.indexOf(t)},toFloat:function(){return this.trim().replaceAll(".","").replaceAll(",",".")},fixDate:function(t){return this.split(t||" ")[0]},fixTime:function(t){return this.split(t||" ")[1]},fixYear:function(){return this.fixDate().split("/")[2]},trimSeconds:function(){return this.split(":")[0]+":"+this.split(":")[1]},paddingLeft:function(t){return(t+this).slice(-t.length)},format:function(){var e=arguments,n=e[e.length-1]||self,r=function(e,r,i){var o=String.trimValues(r).reduce((function(e,r){return e.push("@"==r.charAt(0)?t.templates.getValue(r.slice(1),n):r),e}),i);return e.apply(n,o)};return this.replace(/\{(\d+|[^{]+)\}/g,(function(i,o){let s,[a,u]=String.trimValues(o.split(":"));if(/^\d+/.test(a)){let r=String.trimValues(a.split("|")),i=r[0],o=0==r.length?"data":["data"].concat(r.slice(1)).join("|"),u={data:e[i],outerScope:n};s=t.templates.getValue(o,u)}else s=t.templates.getValue(a,n);if(t.isFunction(s))return r(s,u?u.split(/\s|\;/):[],[]);if(u){let[e,i]=String.trimValues(u.split(/=>/));return i=i?i.split(/\s|\;/):[],r(t.templates.getValue(e,n),i,[s])}return s}))},htmlDecode:function(){return(new DOMParser).parseFromString(this,"text/html").documentElement.textContent}})}(n),function(t){t.apply(Date.prototype,{format:function(t){return"yyyymmdd"==t?"{2|paddingLeft,0000}/{1|paddingLeft,00}/{0|paddingLeft,00}".format(this.getDate().toString(),(this.getMonth()+1).toString(),this.getFullYear().toString()):"{0|paddingLeft,00}/{1|paddingLeft,00}/{2|paddingLeft,0000}".format(this.getDate().toString(),(this.getMonth()+1).toString(),this.getFullYear().toString())+("hhmmss"===t?" "+"{0|paddingLeft,00}:{1|paddingLeft,00}:{2|paddingLeft,00}".format((e=this).getHours().toString(),e.getMinutes().toString(),e.getSeconds().toString()):"");var e}})}(n),function(t){t.apply(Array.prototype,{remove:function(t){var e=this.indexOf(t);return-1!=e&&this.splice(e,1),this},add:function(t){return this.push(t),t},append:function(t){return this.push(t),this},item:function(t,e,n){return 1==arguments?this.filter((function(e){return e.id==t||e._id==t}))[0]||n:this.filter((function(n){return n[t]==e}))[0]||n},contains:function(t,e){return this.item(t,e)},lastItem:function(){return this[this.length-1]},select:function(t){return this.map(t)},where:function(e){return t.isFunction(e)?this.filter(e):t.isObject(e)?this.filter(new Function("a",Object.keys(e).reduce((function(n,r,i){return n+(i>0?" && ":"")+((o=e[r])instanceof RegExp?"{1}.test(a.{0})".format(r,o):t.isString(o)?"a.{0} === '{1}'".format(r,o):"a.{0} === {1}".format(r,o));var o}),"return "))):this},sortBy:function(t,e){var n=[],r=t.split(",").map((function(t,e){var r=t.split(" ");return n[e]=r[1]&&"DESC"==r[1].toUpperCase()?-1:1,r[0]}));return n[0]=e?-1:1,this.sort((function(t,e){var i=0,o=function(t,e){var s=t[r[i]],a=e[r[i]];return s<a?-1*n[i]:s>a?1*n[i]:++i<r.length?o(t,e):0};return o(t,e)})),this},orderBy:function(e){var n=e;return t.isString(e)&&(n=function(t){return t[e]}),this.map((function(t){return t})).sort((function(t,e){var r=n(t),i=n(e);return r<i?-1:r>i?1:0}))},distinct:function(e){var n=e;t.isString(e)&&(n=function(t){return t[e]});var r=[];return this.forEach((function(t){var e=n(t);-1==r.indexOf(e)&&r.push(e)})),r},groupBy:function(e){var n=e;return t.isString(e)&&(n=function(t){return t[e]}),this.reduce((function(t,e){var r=n(e);return(t[r]=t[r]||[]).push(e),t}),{})},toDictionary:function(t,e){return this.reduce((function(n,r){return n[r[t]]=e?r[e]:r,n}),{})}})}(n),function(t){var e=[];t.Include=function(n){return new Promise(r=>{function i(){e.push(n.toLowerCase()),r()}if(e.indexOf(n.toLowerCase())>-1)r();else{var o=t.build("script",{type:"text/javascript"});o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,i())}:o.onload=function(){i()},o.src=n,document.getElementsByTagName("head")[0].appendChild(o)}})}}(n),function(t){function e(t,n){return t.split(/\.|\[|\]/).reduce((function(t,n){if(""===n)return t;if("this"===n)return t;let r=n,i=n.indexOf("|")>-1,o=[];if(i){let t=String.trimValues(n.split("|"));r=t[0],o=String.trimValues(t[1].split(","))}let s=t[r];return void 0===s&&t.outerScope&&(s=e(r,t.outerScope)),null!=s?i?s.__proto__[o[0]].apply(s,o.slice(1)):s:t===self?"":self}),n||self)}function r(n,r,i){var o=function(t,n,o){var s=String.trimValues(n).reduce((function(t,n){return t.push("@"==n.charAt(0)?e(n.slice(1),r):n),t}),o);return i&&s.push(i),t.apply(r,s)};return n.replace(/{([^{]+)?}/g,(function(n,i){if(i.indexOf(":")>0){let t=String.trimValues(i.split(":")),n=e(t[0],r),[s,a]=String.trimValues(t[1].split(/=>/)),u=a?String.trimValues(a.split(/\s|\;/)):[];return o(e(s,r),u,[n])}let[s,a]=String.trimValues(i.split(/=>/));var u=e(s,r);return t.isFunction(u)?o(u,a.split(/\s|\;/),[]):u}))}function i(o,s){var a=t.$(o),u=t.$("[xfor]",a),c=u.reduce((e,n)=>e.concat(t.$("[xbind]",n)),[...u]),h=t.$("[xbind]",a).filter(t=>!c.includes(t));return a.attributes.xbind&&h.push(a),h.forEach((function(n){if(n.attributes.xif){let t=new Function("ctx","return {0};".format(n.attributes.xif.value).replaceAll("@","this."));n.style.display=t.apply(s)?"":"none"}t.toArray(n.attributes).where({value:/{[^{]+?}/g}).map(t=>t.value=r(t.value,s)),t.toArray(n.childNodes).where({nodeType:3}).where({textContent:/{[^{]+?}/g}).forEach(t=>t.textContent=r(t.textContent,s,t)),String.trimValues(n.attributes.xbind.value.split(";")).forEach((function(r){if(""===r)return;let[i,o]=String.trimValues(r.split(":")),[a,u]=String.trimValues(o.split(/=>/));var c=e(a,s);if(t.isFunction(c)){var h=String.trimValues(u.split(/\s|#/)).reduce((function(t,n){return t.push("@"==n.charAt(0)?e(n.slice(1),s):n),t}),[]);h.push(n),c=c.apply(s,h)}i&&(n[i]=c)}))})),u.map(t=>{let[r,o]=String.trimValues(t.attributes.xfor.value.split(" in ")),a=e(o,s);return a&&a!=window&&a.map((e,o)=>{let a={index:o,outerScope:s};a[r]=n.clone(e);let u=i(t.cloneNode(!0),a);t.parentNode.insertBefore(u,t)}),t}).forEach(t=>t.parentNode.removeChild(t)),s.addEventListeners&&s.addEventListeners(o,s),o}t.templates={getValue:e,merge:r,execute:function(e,n,r){var o=t.$(e),s=n.reduce((function(t,e,n){var s={index:n,data:e,node:i(o.cloneNode(!0),e)};return t.nodes.push(s),r||t.html.push(s.node.outerHTML.replace(/xbind="[^"]*"/g,"")),t}),{nodes:[],html:[]});return r?s.nodes:s.html.join("")},fill:i}}(n),function(t){t.ajax={},t.apply(t.ajax,{get:function(t,e){return new Promise((n,r)=>{var i=this.createXMLHttpRequest();e&&e(i),i.open("GET",t,!0),i.onreadystatechange=function(){4==i.readyState&&n(i.responseText)},i.onerror=function(t){r(t)},i.send(null)})},post:function(t,e,n){return new Promise((r,i)=>{var o=this.createXMLHttpRequest();o.open("POST",t,!0),n?n(o):o.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset:ISO-8859-1"),o.onreadystatechange=function(){4==o.readyState&&r(o.responseText)},o.send(e)})},callWebMethod:function(t,e,n){var r=this.createXMLHttpRequest();r.open("POST",t,!0),r.onreadystatechange=function(){4==r.readyState&&n(r.responseText)},r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.send(e)},createXMLHttpRequest:function(){return new XMLHttpRequest}})}(n),function(t){var e;t.tabbly={execute:function(t){var n;e={sections:[],groups:[],details:[]};var r="",i="",o=!1;function s(t){return t&&t.trim().startsWith("@")?e[t.trim().split("@")[1].trim()]||"":t?t.trim():""}function a(t){for(var e=/([a-zA-Z0-9_\-]*)\s*:\s*('[^']*'|[^\s]*)/g,n={},r=e.exec(t);null!=r;)n[r[1].trim()]=s(r[2].trim().replace(/^'([^']*)'$/g,"$1")),r=e.exec(t);return n}return t.split("\n").forEach((function(t){!function(t,e){if(!r&&!t.trim())return function(){};var s;if(!/DEFINE|#|CREATE|SET|FUNCTION|END/.test(t)){if(r)return i+=e,i+="\n",function(){};throw new Error("Tabbly : Unrecognized text")}if(/^#/.test(t))return function(){};if(/^SET (\w.*)/.test(t)){var u=t.match(/^SET (\w.*)$/);return o=!0,r=u[1].trim(),i="",function(){}}if(/^FUNCTION (\w.*)/.test(t)){var u=t.match(/^FUNCTION (\w.*)$/);return o=!1,r=u[1].trim(),i="",function(){}}if(/^END/.test(t)){var c=i,h=r;return r=i="",o?(o=!1,function(t){n[h]=c.trim()}):function(t){t[h]=new Function("ctx",c)}}if(/^DEFINE\s\s*(\w.*)\s*=\s*(.*)$/.test(t)){u=t.match(/^DEFINE\s\s*([a-zA-Z0-9_\-]*)\s*=\s*(.*)$/);return s=u,function(t){t[s[1].trim()]=s[2].trim()}}if(!/^CREATE\s\s*(\w*) (.*)$/.test(t))throw new Error("Tabbly : Unrecognized text after DEFINE");return"section"==(u=t.match(/^CREATE\s\s*(\w*) (.*)$/))[1]?function(){var t=u;return function(e){e.sections.push(a(t[2])),n=e.sections[e.sections.length-1]}}():"group"==u[1]?function(){var t=u;return function(e){e.groups.push(a(t[2])),n=e.groups[e.groups.length-1]}}():"detail"==u[1]?function(){var t=u;return function(e){e.details.push(a(t[2])),n=e.details[e.details.length-1]}}():void 0}(t.trim(),t)(e)})),{context:e}}}}(n),function(t){t.ReportEngine={},t.ReportEngine.generateReport=function(e,n,r){r.message({type:"report.begin"});var i=e||t.ReportEngine.rd,o=i.context.parseData?i.context.parseData(i,n,r.message):n;r.message({type:"report.log.message",text:"Inicializando..."}),console.time("Render");var s=function(e,n,i){r.send(t.templates.merge(e,n))};function a(){d.forEach((function(t,e){if(!(e<c))return r.message({type:"report.sections.group.header",value:t.id}),t.definition.header?s(t.definition.header,t):t.definition.headerValueProvider?r.send(t.definition.headerValueProvider(t)):void 0}))}function u(t){var e=d.map((function(t){return t}));t&&e.splice(0,t),e.reverse().forEach((function(t){return r.message({type:"report.sections.group.footer",value:t.id}),t.definition.footer?s(t.definition.footer,t):t.definition.footerValueProvider?r.send(t.definition.footerValueProvider(t)):void 0}))}var c=-1,h=function(){var t=JSON.parse(i.context.summary||"{}");return i.context.onInitSummaryObject?i.context.onInitSummaryObject(t):t}(),l=(i.context.sections||[]).where({type:"header"}),f=(i.context.sections||[]).where({type:"total"}),p=((i.context.sections||[]).where({type:"footer"}),i.context.details||[]),d=i.context.groups.map((function(e,n){return{name:"G"+(n+1),rd:i,definition:e,current:"",data:t.clone(h),init:function(e){var n=e[this.definition.key].toString(),r=self.BS[this.name];r.all[n]=r.all[n]||[],r.all[n].push(e),r.recordCount=1,!1!==this.__resume&&(this.__resume||(this.__resume=Object.keys(this.data).length>0))&&t.ReportEngine.copy(e,this.data)},sum:function(e){var n=e[this.definition.key].toString(),r=self.BS[this.name];r.all[n]=r.all[n]||[],r.all[n].push(e),r.recordCount+=1,!1!==this.__resume&&t.ReportEngine.sum(e,this.data)},test:function(t){return t[this.definition.key]==this.current}}}))||[];self.BS={reportDefinition:i,mediator:r},i.context.iteratefn&&(r.message({type:"report.log.message",text:"Inicializando elementos..."}),o.forEach(i.context.iteratefn)),i.context.orderBy&&(r.message({type:"report.log.message",text:"Ordenando datos..."}),o.sortBy(i.context.orderBy,!1)),self.BS={recordCount:0,G0:t.clone(h),dataSet:o,reportDefinition:i,mediator:r},d.forEach((function(t,e){t.current=o&&o[0]?o[0][t.definition.key]:"",self.BS[t.name]={recordCount:0,all:{}}})),i.context.onStartfn&&i.context.onStartfn(self.BS),[i.context.sections,i.context.details,i.context.groups].reduce((function(t,e){return t.concat(e)}),[]).map((function(e){e.valueProviderfn&&(e.valueProvider=t.templates.getValue(e.valueProviderfn,self),delete e.valueProviderfn),e.footerValueProviderfn&&(e.footerValueProvider=t.templates.getValue(e.footerValueProviderfn,self),delete e.footerValueProviderfn),e.headerValueProviderfn&&(e.headerValueProvider=t.templates.getValue(e.headerValueProviderfn,self),delete e.headerValueProviderfn)})),r.message({type:"report.render.rows"}),r.message({type:"report.log.message",text:"Generando informe..."}),l.forEach((function(t){return r.message({type:"report.sections.header",value:t}),t.template?s(t.template,t):t.valueProvider?r.send(t.valueProvider(t)):void 0})),o.length>0&&a(),o.forEach((function(e,n){if(self.BS.recordCount++,self.BS.isLastRow=o.length===self.BS.recordCount,self.BS.isLastRowInGroup=self.BS.isLastRow,self.BS.percent=self.BS.recordCount/o.length*100,self.BS.previous=self.BS.data||e,self.BS.data=e,d.forEach((function(t,e){self.BS[t.name].data=Object.create(t.data)})),t.ReportEngine.sum(e,self.BS.G0),i.context.onRowfn&&i.context.onRowfn(self.BS),r.message({type:"report.render.row",text:self.BS.percent.toFixed(1)+" %",value:self.BS.percent}),d.every((function(t){return t.test(e)}))?d.forEach((function(t){t.sum(e)})):(d.some((function(t,n){return!t.test(e)&&(u(c=n),d.forEach((function(t,r){r>=c?(t.init(e),c=n):t.sum(e)})),!0)})),d.forEach((function(t){t.current=e[t.definition.key]})),i.context.onGroupChangefn&&i.context.onGroupChangefn(self.BS),r.message({type:"report.sections.group.change",value:"__groups"}),a()),d.length&&!self.BS.isLastRow){var h=o[self.BS.recordCount];self.BS.isLastRowInGroup=!d.every((function(t){var e=t.definition.key;return h[e]===self.BS.data[e]}))}p.forEach((function(t){return r.message({type:"report.sections.detail",value:t.id}),t.template?s(t.template,t):t.valueProvider?r.send(t.valueProvider(t)):void 0}))})),o.length>0&&(self.BS.previous=self.BS.data,u()),f.forEach((function(t){return r.message({type:"report.sections.total",value:t.id}),t.template?s(t.template,t):t.valueProvider?r.send(t.valueProvider(t)):void 0})),r.message({type:"report.render.end"}),r.message({type:"report.end"}),r.flush(),console.timeEnd("Render")},t.ReportEngine.copy=function(t,e){Object.keys(e).map((function(n){e[n]=t[n]}))},t.ReportEngine.sum=function(t,e){Object.keys(e).map((function(n){e[n]+=t[n]}))},t.ReportEngine.compute=function(t,e){return t.reduce((function(t,n){return t+n[e]}),0)},t.ReportEngine.group=function(t,e){var n=t,r=function(t,i){return n.distinct((function(e){return e[t]})).forEach((function(r){e[r]=n.reduce((function(e,n,o,s){return n[t]==r?e+n[i]:e}),0)})),r};return r}}(n)}(r);var i=r.Pol;let o={},s=-1;var a={subscribe:function(t,e){o[t]||(o[t]=[]);var n=(++s).toString();return o[t].push({token:n,func:e}),n},publish:function(t,e){return!!o[t]&&(setTimeout((function(){for(var n=o[t],r=n?n.length:0;r--;)n[r].func(t,e)}),0),!0)},unsubscribe:function(t){for(var e in o)if(o[e])for(var n=0,r=o[e].length;n<r;n++)if(o[e][n].token===t)return o[e].splice(n,1),t;return!1},TOPICS:{AUTH_CHANGE:"auth:change",VIEW_CHANGE:"view:change",VALUE_CHANGE:"value:change",MUNICIPIO_CHANGE:"municipio:change",WINDOW_SCROLL:"window.scroll",WINDOW_RESIZE:"window.resize",NOTIFICATION:"notification.show"}};const u=["[on-click]","[on-publish]","[route-link]","[on-change]"];var c={addEventListeners:function(t,e,n){let r={innerHTML:(t,e)=>t.innerHTML=e,className:(t,e)=>t.className=e};u.forEach((o,s)=>{i.toArray(i.$(o,t)).concat([t]).forEach(t=>{let u=o.replace("[","").replace("]","");if(!t.attributes[u])return;let c=t.attributes[u].value,h=c.split(":");if(0!==s){if(1===s){let o=i.templates.getValue(h[0],a);o=o===window?h[0]:o,a.subscribe(o,(o,s)=>{let a=h[1];if(a){let o=r[a]||e[a]||i.templates.getValue(a,n);o&&o.apply(n,[t,s])}else r.innerHTML(t,s)})}if(2===s&&(t.onclick=function(t){let e=n.router,r=e.normalizePath(t.currentTarget.href);if(e.current!=r)try{e.navigateTo(r)}catch(t){console.log(t)}return!1}),3===s){let r="SELECT"===t.tagName;if("publish"===c)return void(r?t.onchange=()=>a.publish(a.TOPICS.VALUE_CHANGE,t):t.oninput=()=>a.publish(a.TOPICS.VALUE_CHANGE,t));let o=e[c]||i.templates.getValue(c,n);r?t.onchange=()=>o.apply(n,[t]):t.oninput=()=>o.apply(n,[t])}}else{let r=e[h[0]]||i.templates.getValue(h[0],n);t.onclick=e=>{let o=h.slice(1).reduce((function(t,e){return t.push("@"==e.charAt(0)?i.templates.getValue(e.slice(1),n):e),t}),[t,e]);return r.apply(n,o)}}})})}},h=n(1),l=n.n(h);n(7),n(8),n(9);l.a.initializeApp({apiKey:"AIzaSyAIownX-ySe-_52p4JniFHPkAQ0Fn_McrE",authDomain:"belloto-c925d.firebaseapp.com",databaseURL:"https://belloto-c925d.firebaseio.com",projectId:"belloto-c925d",storageBucket:"belloto-c925d.appspot.com",messagingSenderId:"931612603004",appId:"1:931612603004:web:85d23bf6f0287b42f78ff9"});const f=l.a.functions(),p=l.a.firestore(),d=l.a.auth(),v="<h1>{title}</h1>";const y="<p>{text}</p>";const m=a.TOPICS;var g=function(t){return{root:{},init:function(){},render:function(){return this.root=i.build("section",{id:"app-content-container",innerHTML:"",className:"w3-container",style:{minHeight:"0",padding:"0 0 0 0"}}),this.root},mounted:function(){!function(){function t(){var t=document.getElementById("appMenu");if(!t.className.includes("sticky")){var e=t.offsetTop;window.onscroll=function(){window.pageYOffset>=e?t.classList.add("sticky"):t.classList.remove("sticky"),a.publish(m.WINDOW_SCROLL,window)},a.publish(m.WINDOW_RESIZE,window)}}window.addEventListener("resize",(e=t,n=150,function(){var t=this,o=arguments,s=function(){i=null,r||e.apply(t,o)},a=r&&!i;clearTimeout(i),i=setTimeout(s,n),a&&e.apply(t,o)}),!1),t();var e,n,r,i}()}}};const w=n(11);var b=function(t){let e,n={root:{},id:"menu.component.ref",init:function(){},render:function(){return this.root=i.build("div",w,!0),this.root},mounted:function(){c.addEventListeners(n.root,n.eventHandlers,{router:t.router,toggleMenu:o,hideMenu:s}),t.subscribe(t.topics.AUTH_CHANGE,r)},eventHandlers:{sync:function(t,e){s(),e.name===t.href.split("/").lastItem()?t.classList.add("selected"):t.classList.remove("selected")}}};function r(e,r){i.$("[route-link]",n.root).map(e=>{let n=t.router.routes.where({name:e.dataset.key})[0];e.style.display=n?"":"none"})}function o(t){e=t.nextElementSibling,e.classList.toggle("w3-show")}function s(t){e&&e.classList.remove("w3-show")}return n};const I=n(12);var E=function(t){return{root:{},init:function(){},render:function(){return this.root=i.build("div",I,!0),e=this.root,i.templates.fill(e,{addEventListeners:c.addEventListeners,mustLogin:!t.currentUser,login:()=>t.router.navigateTo("auth")});var e},mounted:function(){},dispose:function(){}}};const T=n(13);var N=function(t){return{root:{},init:function(){},render:function(){return this.root=i.build("div",T,!0),this.root},mounted:function(){this.root.querySelector("[about-btn]").onclick=()=>{t.router.navigateTo("")}}}};const A=n(14),S=l.a.firestore.FieldValue.serverTimestamp();var k=function(t){let e={root:{},init:function(){},render:function(){return this.root=i.build("div",A,!0),this.loadingBox=this.root.querySelector("#loading-box"),this.listContainer=this.root.querySelector("#list-container"),this.itemTemplate=this.root.querySelector("[template]").cloneNode(!0),this.root},mounted:function(){e.loadingBox.style.display="block",new Promise((t,e)=>{p.collection("notas").get().then(e=>{t(e.docs.map(t=>{let e=t.data();return{id:t.id,contenido:e.contenido,uid:e.userId,timestamp:e.timestamp.toDate()}}).orderBy("timestamp").reverse())}).catch(t=>e(t))}).then(o=>{let s={notas:o,save:function(t){n(t)},delete:function(t){r(t)},add:function(o){!function(o){let s={notas:[{id:"empty",contenido:"Texto de la nota",uid:t.currentUser.uid,timestamp:new Date}],save:n,delete:r},a=i.templates.fill(e.itemTemplate.cloneNode(!0),s);c.addEventListeners(a,{},s),e.listContainer.querySelector("div.w3-center").insertAdjacentElement("afterend",a)}()}};i.templates.fill(e.root,s),c.addEventListeners(e.root,{},s),e.loadingBox.style.display="none",e.listContainer.style.display="block"}).catch(t=>{console.log(t)})}};function n(n){let r=n.id.split("-")[1];if("empty"==r)return void p.collection("notas").add({contenido:n.parentNode.parentNode.firstElementChild.value,userId:t.currentUser.uid,timestamp:S}).then((function(t){n.id="save-{0}".format(t.id),n.nextElementSibling.id="delete-{0}".format(t.id),n.parentNode.parentNode.parentNode.id="div-{0}".format(t.id)})).catch((function(e){let n="Error al insertar la nota: {0}".format(e);t.publish(t.topics.NOTIFICATION,{message:n})}));let o=i.$("div-{0}".format(r));o.style="opacity:.6;",p.collection("notas").doc(r).update({contenido:e.root.querySelector("#div-{0} textarea".format(r)).value,userId:t.currentUser.uid,timestamp:S}).then((function(){o.style.opacity=""})).catch((function(e){o.style.opacity="",t.publish(t.topics.NOTIFICATION,{message:"Error al grabar la nota: {0}".format(e)})}))}function r(e){let n=e.id.split("-")[1];if("empty"!=n){let e=i.$("div-{0}".format(n));e.style="opacity:.6;",p.collection("notas").doc(n).delete().then((function(){e.parentNode.removeChild(e)})).catch((function(n){e.style.opacity="",t.publish(t.topics.NOTIFICATION,{message:"Error el borrar la nota: {0}".format(n)})}))}else{let t=e.parentNode.parentNode.parentNode;t.parentNode.removeChild(t)}}return e};const _=n(15);var O=function(t){let e={root:{},init:function(){},render:function(){return this.root=i.build("div",_,!0),this.root},mounted:function(){n(t.currentUser?"logged":"login"),c.addEventListeners(e.root,{initCreate:()=>n("create"),cancelCreate:()=>n("login"),createAccount:r,login:o,logout:s})}};function n(n){({create:()=>{i.templates.fill(e.root,{state:n,email:"",password:""})},login:()=>{i.templates.fill(e.root,{state:n,email:localStorage.getItem("lastUserLoggedEmail")||"",password:""})},logged:()=>{i.templates.fill(e.root,{state:n,email:t.currentUser.email,password:"xxxxxxxxxxx"})}})[n](),e.root.style.opacity=""}function r(){let r=i.$("#txt-email",e.root)[0].value,o=i.$("#txt-password",e.root)[0].value,s=i.$("#txt-password-check",e.root)[0].value;return r?o&&s?o!=s?t.publish(t.topics.NOTIFICATION,{message:"Las contraseñas no son iguales"}):(e.root.style.opacity=".4",void d.createUserWithEmailAndPassword(r,o).then(e=>{setTimeout(()=>n("login"),100),t.publish(t.topics.NOTIFICATION,{message:"Ya puedes iniciar sesión, la cuenta se ha creado correctamente"})}).catch((function(n){e.root.style.opacity="";let r="{code}<br>{message}".format(n);t.publish(t.topics.NOTIFICATION,{message:r})}))):t.publish(t.topics.NOTIFICATION,{message:"Debes introducir las contraseñas"}):t.publish(t.topics.NOTIFICATION,{message:"El correo electrónico es obligatorio"})}function o(){let r=i.$("#txt-login-email",e.root)[0].value,o=i.$("#txt-login-password",e.root)[0].value;return r?o?(e.root.style.opacity=".4",void d.signInWithEmailAndPassword(r,o).then(t=>{setTimeout(()=>n("logged"),100)}).catch((function(n){e.root.style.opacity="";let r="{code}<br>{message}".format(n);t.publish(t.topics.NOTIFICATION,{message:r})}))):t.publish(t.topics.NOTIFICATION,{message:"Debes introducir la contraseña"}):t.publish(t.topics.NOTIFICATION,{message:"El correo electrónico es obligatorio"})}function s(){e.root.style.opacity=".4",d.signOut().then(()=>{setTimeout(()=>n("login"),100)}).catch((function(n){e.root.style.opacity="";let r="{code}<br>{message}".format(n);t.publish(t.topics.NOTIFICATION,{message:r})}))}return e};const D=n(16);var C=function(t){let e={root:{},init:function(){},render:function(){return this.root=i.build("div",D,!0),this.root},mounted:function(){i.templates.fill(e.root,{addEventListeners:c.addEventListeners,goToHome:()=>t.router.navigateTo(""),callHelloWorld:()=>{f.httpsCallable("helloWorld")().then((function(e){t.publish("msg__helloworld",e.data.message)})).catch((function(e){t.publish("msg__helloworld",e)}))},callGetServerTime:()=>{f.httpsCallable("getDate")().then((function(e){t.publish("msg__getdate",new Date(e.data.date))})).catch((function(e){t.publish("msg__getdate",e)}))}})}};return e};const R=a.TOPICS,x={root:i.$("appContent"),components:[],router:{routes:[],clear:function(){return this.routes=[],this},addRoute:function(t,e,n,r){return this.routes.push({name:t,path:e,controler:n,isView:r||!1}),this},getRoute:function(t){return this.routes.where((function(e){let n=e.path.exec(t);return n&&(e.params=n.map(t=>t)),n}))[0]},navigateTo:function(t){this.current=this.getRoute(t);let e="{origin}{0}{1}".format(APP_PATH,t,location);window.history.pushState("",t,e),this.current.queryValues=i.parseQueryString(),U()},normalizePath:function(t){return t.replace(document.baseURI,"")},sync:function(){this.current=this.getRoute(this.normalizePath(window.location.href)),this.current.queryValues=i.parseQueryString(),U()},current:{}},topics:a.TOPICS,publish:a.publish,subscribe:a.subscribe,unsubscribe:a.unsubscribe};let P,L,M;function U(){P=P||i.$("app-content-container");let t=x.router.current.controler;M&&L==t||(M&&M.dispose&&M.dispose(),P.innerHTML="",M=t(x),L=t,M.init&&M.init(),P.appendChild(M.render()),M.mounted&&M.mounted(),x.publish(R.VIEW_CHANGE,x.router.current))}d.onAuthStateChanged((function(t){x.components.length||(x.components=[{root:{},title:"Firebase App",init:function(){},render:function(){let t={id:"appHeader",innerHTML:v.format(this),className:"w3-container w3-firebase"};return this.root=i.build("header",t),this.root},mounted:function(){}},b(x),g(),{text:"© Rafael Castro Gómez, 2020",init:function(){},render:function(){let t={id:"appFooter",innerHTML:y.format(this),className:"w3-container w3-center w3-firebase"};return i.build("footer",t)},mounted:function(){}}],x.components.forEach(t=>{t.init&&t.init(),x.root.appendChild(t.render()),t.mounted&&t.mounted()})),d.currentUser?(localStorage.setItem("lastUserLoggedEmail",d.currentUser.email),x.currentUser=d.currentUser,x.router.clear().addRoute("functions",/funcs$/,C).addRoute("notes",/notes$/,k).addRoute("about",/about$/,N).addRoute("auth",/auth$/,O).addRoute("",/$/,E)):(x.currentUser=d.currentUser,x.router.routes=[],x.router.clear().addRoute("about",/about$/,N).addRoute("auth",/auth$/,O).addRoute("",/$/,E)),x.publish(x.topics.AUTH_CHANGE,d.currentUser),x.router.sync()})),x.subscribe(R.VIEW_CHANGE,(t,e)=>{let n=x.components[0].root.style,r=x.components[1].root,i=x.components[2].root.style;e.isView?(r.classList.remove("sticky"),r.style.display="none",i.position="absolute",i.paddingBottom="0",i.left="0",i.right="0",i.bottom="52px",i.top="74px",i.overflow="auto",n.position="fixed",n.width="100%",n.zIndex="1000"):(r.style.display="",i.position="",i.paddingBottom="60px",i.overflow="",n.position="",n.width="",n.zIndex=""),x.router.previous=x.router.current}),function(){let t=i.build("div",{id:"notificationPanel"});x.root.parentNode.insertBefore(t,x.root),x.subscribe(R.WINDOW_SCROLL,(e,n)=>{n.pageYOffset>=40?t.classList.add("sticky"):t.classList.remove("sticky")}),x.subscribe(R.NOTIFICATION,(function(e,n){let r='<div class="msg w3-container w3-border w3-round w3-animate-top">\n                        <span on-click="close" class="w3-button w3-large w3-display-right">x</span>\n                        <p style="overflow:hidden;margin-right:27px;">{message}</p>\n                      </div>',o=i.build("div",r.format(n)).firstElementChild;t.appendChild(o),c.addEventListeners(o,{close:e=>{o.classList.remove("w3-animate-top"),o.style.backgroundColor="gray",o.style.color="white",o.style.opacity="0",o.style.transform="translate(0, -200px)",setTimeout(()=>{o.parentNode&&t.removeChild(o)},500)}})}))}(),window.onpopstate=function(t){x.router.sync()},window.addEventListener("load",()=>{if("serviceWorker"in navigator)try{navigator.serviceWorker.register("serviceWorker.js"),console.log("Service Worker Registered")}catch(t){console.log("Service Worker Registration Failed")}})}]);